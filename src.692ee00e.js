parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"clu1":[function(require,module,exports) {

},{"./../images/header/mobile_home_bg-2x.jpg":[["mobile_home_bg-2x.c1dfb37b.jpg","mKwD"],"mKwD"],"./../images/header/tablet_home_bg-2x.jpg":[["tablet_home_bg-2x.6128b7b6.jpg","Dazr"],"Dazr"],"./../images/header/desktop_home_bg-2x.jpg":[["desktop_home_bg-2x.1ae76583.jpg","cGtX"],"cGtX"],"./../images/header/mobile_library_bg-2x.jpg":[["mobile_library_bg-2x.4ce71262.jpg","fBUP"],"fBUP"],"./../images/header/tablet_library_bg-2x.jpg":[["tablet_library_bg-2x.a957ad8e.jpg","YBjA"],"YBjA"],"./../images/header/desktop_library_bg-2x.jpg":[["desktop_library_bg-2x.f792fe99.jpg","b1Rk"],"b1Rk"]}],"jPMh":[function(require,module,exports) {
var define;
var t;!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof t&&t.amd?t([],n):"object"==typeof exports?exports.Pagination=n():(e.tui=e.tui||{},e.tui.Pagination=n())}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="dist",n(n.s=10)}([function(t,e,n){"use strict";t.exports=function(t,e){var n,i,s,r,o=Object.prototype.hasOwnProperty;for(s=1,r=arguments.length;s<r;s+=1)for(i in n=arguments[s])o.call(n,i)&&(t[i]=n[i]);return t}},function(t,e,n){"use strict";t.exports=function(t){return void 0===t}},function(t,e,n){"use strict";t.exports=function(t){return t instanceof Array}},function(t,e,n){"use strict";var i=n(2),s=n(17),r=n(6);t.exports=function(t,e,n){i(t)?s(t,e,n):r(t,e,n)}},function(t,e,n){"use strict";t.exports=function(t){return"string"==typeof t||t instanceof String}},function(t,e,n){"use strict";t.exports=function(t){return t instanceof Function}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i;for(i in n=n||null,t)if(t.hasOwnProperty(i)&&!1===e.call(n,t[i],i,t))break}},function(t,e,n){"use strict";var i=n(18),s=n(0);t.exports=function(t,e){var n;return e||(e=t,t=null),n=e.init||function(){},t&&i(n,t),e.hasOwnProperty("static")&&(s(n,e.static),delete e.static),s(n.prototype,e),n}},function(t,e,n){"use strict";var i=n(2);t.exports=function(t,e,n){var s,r;if(n=n||0,!i(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,n);for(r=e.length,s=n;n>=0&&s<r;s+=1)if(e[s]===t)return s;return-1}},function(t,e,n){"use strict";var i=n(29),s=n(30),r=n(5),o={capitalizeFirstLetter:function(t){return t.substring(0,1).toUpperCase()+t.substring(1,t.length)},isContained:function(t,e){return!!e&&(t===e||e.contains(t))},createElementByTemplate:function(t,e){var n=document.createElement("div"),s=r(t)?t(e):i(t,e);return n.innerHTML=s,n.firstChild},bind:function(t,e){var n,i=Array.prototype.slice;return t.bind?t.bind.apply(t,i.call(arguments,1)):(n=i.call(arguments,2),function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)})},sendHostName:function(){s("pagination","UA-129987462-1")}};t.exports=o},function(t,e,n){"use strict";n(11),t.exports=n(12)},function(t,e,n){},function(t,e,n){"use strict";var i=n(13),s=n(7),r=n(0),o=n(1),a=n(20),u=n(9),c={totalItems:10,itemsPerPage:10,visiblePages:10,page:1,centerAlign:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",usageStatistics:!0},p=s({init:function(t,e){this._options=r({},c,e),this._currentPage=0,this._view=new a(t,this._options,u.bind(this._onClickHandler,this)),this._paginate(),this._options.usageStatistics&&u.sendHostName()},_setCurrentPage:function(t){this._currentPage=t||this._options.page},_getLastPage:function(){var t=Math.ceil(this._options.totalItems/this._options.itemsPerPage);return t||1},_getPageIndex:function(t){var e;return this._options.centerAlign?(e=t-Math.floor(this._options.visiblePages/2),e=Math.max(e,1),e=Math.min(e,this._getLastPage()-this._options.visiblePages+1)):Math.ceil(t/this._options.visiblePages)},_getRelativePage:function(t){var e="prev"===t,n=this.getCurrentPage();return e?n-1:n+1},_getMorePageIndex:function(t){var e=this._getPageIndex(this.getCurrentPage()),n=this._options.visiblePages,i="prev"===t;return this._options.centerAlign?i?e-1:e+n:i?(e-1)*n:e*n+1},_convertToValidPage:function(t){var e=this._getLastPage();return t=Math.max(t,1),t=Math.min(t,e)},_paginate:function(t){var e=this._makeViewData(t||this._options.page);this._setCurrentPage(t),this._view.update(e)},_makeViewData:function(t){var e={},n=this._getLastPage(),i=this._getPageIndex(t),s=this._getPageIndex(n),r=this._getEdge(t);return e.leftPageNumber=r.left,e.rightPageNumber=r.right,e.prevMore=i>1,e.nextMore=i<s,e.page=t,e.currentPageIndex=t,e.lastPage=n,e.lastPageListIndex=n,e},_getEdge:function(t){var e,n,i,s=this._getLastPage(),r=this._options.visiblePages,o=this._getPageIndex(t);return this._options.centerAlign?(i=Math.floor(r/2),(n=(e=Math.max(t-i,1))+r-1)>s&&(e=Math.max(s-r+1,1),n=s)):(e=(o-1)*r+1,n=o*r,n=Math.min(n,s)),{left:e,right:n}},_onClickHandler:function(t,e){switch(t){case"first":e=1;break;case"prev":e=this._getRelativePage("prev");break;case"next":e=this._getRelativePage("next");break;case"prevMore":e=this._getMorePageIndex("prev");break;case"nextMore":e=this._getMorePageIndex("next");break;case"last":e=this._getLastPage();break;default:if(!e)return}this.movePageTo(e)},reset:function(t){o(t)&&(t=this._options.totalItems),this._options.totalItems=t,this._paginate(1)},movePageTo:function(t){t=this._convertToValidPage(t),this.invoke("beforeMove",{page:t})&&(this._paginate(t),this.fire("afterMove",{page:t}))},setTotalItems:function(t){this._options.totalItems=t},setItemsPerPage:function(t){this._options.itemsPerPage=t},getCurrentPage:function(){return this._currentPage||this._options.page}});i.mixin(p),t.exports=p},function(t,e,n){"use strict";var i=n(0),s=n(14),r=n(4),o=n(16),a=n(2),u=n(5),c=n(3),p=/\s+/g;function l(){this.events=null,this.contexts=null}l.mixin=function(t){i(t.prototype,l.prototype)},l.prototype._getHandlerItem=function(t,e){var n={handler:t};return e&&(n.context=e),n},l.prototype._safeEvent=function(t){var e,n=this.events;return n||(n=this.events={}),t&&((e=n[t])||(e=[],n[t]=e),n=e),n},l.prototype._safeContext=function(){var t=this.contexts;return t||(t=this.contexts=[]),t},l.prototype._indexOfContext=function(t){for(var e=this._safeContext(),n=0;e[n];){if(t===e[n][0])return n;n+=1}return-1},l.prototype._memorizeContext=function(t){var e,n;s(t)&&(e=this._safeContext(),(n=this._indexOfContext(t))>-1?e[n][1]+=1:e.push([t,1]))},l.prototype._forgetContext=function(t){var e,n;s(t)&&(e=this._safeContext(),(n=this._indexOfContext(t))>-1&&(e[n][1]-=1,e[n][1]<=0&&e.splice(n,1)))},l.prototype._bindEvent=function(t,e,n){var i=this._safeEvent(t);this._memorizeContext(n),i.push(this._getHandlerItem(e,n))},l.prototype.on=function(t,e,n){var i=this;r(t)?(t=t.split(p),c(t,function(t){i._bindEvent(t,e,n)})):o(t)&&(n=e,c(t,function(t,e){i.on(e,t,n)}))},l.prototype.once=function(t,e,n){var i=this;if(o(t))return n=e,void c(t,function(t,e){i.once(e,t,n)});this.on(t,function s(){e.apply(n,arguments),i.off(t,s,n)},n)},l.prototype._spliceMatches=function(t,e){var n,i=0;if(a(t))for(n=t.length;i<n;i+=1)!0===e(t[i])&&(t.splice(i,1),n-=1,i-=1)},l.prototype._matchHandler=function(t){var e=this;return function(n){var i=t===n.handler;return i&&e._forgetContext(n.context),i}},l.prototype._matchContext=function(t){var e=this;return function(n){var i=t===n.context;return i&&e._forgetContext(n.context),i}},l.prototype._matchHandlerAndContext=function(t,e){var n=this;return function(i){var s=t===i.handler,r=e===i.context,o=s&&r;return o&&n._forgetContext(i.context),o}},l.prototype._offByEventName=function(t,e){var n=this,i=u(e),s=n._matchHandler(e);t=t.split(p),c(t,function(t){var e=n._safeEvent(t);i?n._spliceMatches(e,s):(c(e,function(t){n._forgetContext(t.context)}),n.events[t]=[])})},l.prototype._offByHandler=function(t){var e=this,n=this._matchHandler(t);c(this._safeEvent(),function(t){e._spliceMatches(t,n)})},l.prototype._offByObject=function(t,e){var n,i=this;this._indexOfContext(t)<0?c(t,function(t,e){i.off(e,t)}):r(e)?(n=this._matchContext(t),i._spliceMatches(this._safeEvent(e),n)):u(e)?(n=this._matchHandlerAndContext(e,t),c(this._safeEvent(),function(t){i._spliceMatches(t,n)})):(n=this._matchContext(t),c(this._safeEvent(),function(t){i._spliceMatches(t,n)}))},l.prototype.off=function(t,e){r(t)?this._offByEventName(t,e):arguments.length?u(t)?this._offByHandler(t):o(t)&&this._offByObject(t,e):(this.events={},this.contexts=[])},l.prototype.fire=function(t){this.invoke.apply(this,arguments)},l.prototype.invoke=function(t){var e,n,i,s;if(!this.hasListener(t))return!0;for(e=this._safeEvent(t),n=Array.prototype.slice.call(arguments,1),i=0;e[i];){if(!1===(s=e[i]).handler.apply(s.context,n))return!1;i+=1}return!0},l.prototype.hasListener=function(t){return this.getListenerLength(t)>0},l.prototype.getListenerLength=function(t){return this._safeEvent(t).length},t.exports=l},function(t,e,n){"use strict";var i=n(1),s=n(15);t.exports=function(t){return!i(t)&&!s(t)}},function(t,e,n){"use strict";t.exports=function(t){return null===t}},function(t,e,n){"use strict";t.exports=function(t){return t===Object(t)}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=0,s=t.length;for(n=n||null;i<s&&!1!==e.call(n,t[i],i,t);i+=1);}},function(t,e,n){"use strict";var i=n(19);t.exports=function(t,e){var n=i(e.prototype);n.constructor=t,t.prototype=n}},function(t,e,n){"use strict";t.exports=function(t){function e(){}return e.prototype=t,new e}},function(t,e,n){"use strict";var i=n(3),s=n(7),r=n(21),o=n(22),a=n(24),u=n(25),c=n(0),p=n(4),l=n(28),f=n(9),h={page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'},g=["first","prev","next","last"],_=["prev","next"],d=s({init:function(t,e,n){this._containerElement=null,this._firstItemClassName=e.firstItemClassName,this._lastItemClassName=e.lastItemClassName,this._template=c({},h,e.template),this._buttons={},this._enabledPageElements=[],this._setRootElement(t),this._setMoveButtons(),this._setDisabledMoveButtons(),this._setMoreButtons(),this._attachClickEvent(n)},_setRootElement:function(t){if(p(t)?t=document.getElementById(t)||document.querySelector(t):t.jquery&&(t=t[0]),!l(t))throw new Error("The container element is invalid.");this._containerElement=t},_setMoveButtons:function(){i(g,function(t){this._buttons[t]=f.createElementByTemplate(this._template.moveButton,{type:t})},this)},_setDisabledMoveButtons:function(){i(g,function(t){var e="disabled"+f.capitalizeFirstLetter(t);this._buttons[e]=f.createElementByTemplate(this._template.disabledMoveButton,{type:t})},this)},_setMoreButtons:function(){i(_,function(t){var e=t+"More";this._buttons[e]=f.createElementByTemplate(this._template.moreButton,{type:t})},this)},_getContainerElement:function(){return this._containerElement},_appendFirstButton:function(t){var e;e=t.page>1?this._buttons.first:this._buttons.disabledFirst,this._getContainerElement().appendChild(e)},_appendPrevButton:function(t){var e;e=t.currentPageIndex>1?this._buttons.prev:this._buttons.disabledPrev,this._getContainerElement().appendChild(e)},_appendNextButton:function(t){var e;e=t.currentPageIndex<t.lastPageListIndex?this._buttons.next:this._buttons.disabledNext,this._getContainerElement().appendChild(e)},_appendLastButton:function(t){var e;e=t.page<t.lastPage?this._buttons.last:this._buttons.disabledLast,this._getContainerElement().appendChild(e)},_appendPrevMoreButton:function(t){var e;t.prevMore&&(e=this._buttons.prevMore,u(e,this._firstItemClassName),this._getContainerElement().appendChild(e))},_appendNextMoreButton:function(t){var e;t.nextMore&&(e=this._buttons.nextMore,u(e,this._lastItemClassName),this._getContainerElement().appendChild(e))},_appendPages:function(t){var e,n,i=t.leftPageNumber,s=t.rightPageNumber;for(n=i;n<=s;n+=1)n===t.page?e=f.createElementByTemplate(this._template.currentPage,{page:n}):(e=f.createElementByTemplate(this._template.page,{page:n}),this._enabledPageElements.push(e)),n!==i||t.prevMore||u(e,this._firstItemClassName),n!==s||t.nextMore||u(e,this._lastItemClassName),this._getContainerElement().appendChild(e)},_attachClickEvent:function(t){var e=this._getContainerElement();o(e,"click",function(e){var n,i,s=r(e);a(e),(i=this._getButtonType(s))||(n=this._getPageNumber(s)),t(i,n)},this)},_getButtonType:function(t){var e,n=this._buttons;return i(n,function(n,i){return!f.isContained(t,n)||(e=i,!1)},this),e},_getPageNumber:function(t){var e,n=this._findPageElement(t);return n&&(e=parseInt(n.innerText,10)),e},_findPageElement:function(t){for(var e,n=0,i=this._enabledPageElements.length;n<i;n+=1)if(e=this._enabledPageElements[n],f.isContained(t,e))return e;return null},_empty:function(){this._enabledPageElements=[],i(this._buttons,function(t,e){this._buttons[e]=t.cloneNode(!0)},this),this._getContainerElement().innerHTML=""},update:function(t){this._empty(),this._appendFirstButton(t),this._appendPrevButton(t),this._appendPrevMoreButton(t),this._appendPages(t),this._appendNextMoreButton(t),this._appendNextButton(t),this._appendLastButton(t)}});t.exports=d},function(t,e,n){"use strict";t.exports=function(t){return t.target||t.srcElement}},function(t,e,n){"use strict";var i=n(4),s=n(3),r=n(23);function o(t,e,n,i){function o(e){n.call(i||t,e||window.event)}"addEventListener"in t?t.addEventListener(e,o):"attachEvent"in t&&t.attachEvent("on"+e,o),function(t,e,n,i){var o=r(t,e),a=!1;s(o,function(t){return t.handler!==n||(a=!0,!1)}),a||o.push({handler:n,wrappedHandler:i})}(t,e,n,o)}t.exports=function(t,e,n,r){i(e)?s(e.split(/\s+/g),function(e){o(t,e,n,r)}):s(e,function(e,i){o(t,i,e,n)})}},function(t,e,n){"use strict";var i="_feEventKey";t.exports=function(t,e){var n,s=t[i];return s||(s=t[i]={}),(n=s[e])||(n=s[e]=[]),n}},function(t,e,n){"use strict";t.exports=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}},function(t,e,n){"use strict";var i=n(3),s=n(8),r=n(26),o=n(27);t.exports=function(t){var e,n=Array.prototype.slice.call(arguments,1),a=t.classList,u=[];a?i(n,function(e){t.classList.add(e)}):((e=r(t))&&(n=[].concat(e.split(/\s+/),n)),i(n,function(t){s(t,u)<0&&u.push(t)}),o(t,u))}},function(t,e,n){"use strict";var i=n(1);t.exports=function(t){return t&&t.className?i(t.className.baseVal)?t.className:t.className.baseVal:""}},function(t,e,n){"use strict";var i=n(2),s=n(1);t.exports=function(t,e){e=(e=i(e)?e.join(" "):e).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),s(t.className.baseVal)?t.className=e:t.className.baseVal=e}},function(t,e,n){"use strict";t.exports=function(t){return"object"==typeof HTMLElement?t&&(t instanceof HTMLElement||!!t.nodeType):!(!t||!t.nodeType)}},function(t,e,n){"use strict";var i=n(8),s=n(3),r=n(2),o=n(4),a=n(0),u=/{{\s?|\s?}}/g,c=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,p=/\[\s?|\s?\]/,l=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,f=/\./,h=/^["']\w+["']$/,g=/"|'/g,_=/^-?\d+\.?\d*$/,d=2,v={if:function(t,e,n){var i=function(t,e){var n=[t],i=[],r=0,o=0;return s(e,function(t,s){0===t.indexOf("if")?r+=1:"/if"===t?r-=1:r||0!==t.indexOf("elseif")&&"else"!==t||(n.push("else"===t?["true"]:t.split(" ").slice(1)),i.push(e.slice(o,s)),o=s+1)}),i.push(e.slice(o)),{exps:n,sourcesInsideIf:i}}(t,e),r=!1,o="";return s(i.exps,function(t,e){return(r=b(t,n))&&(o=P(i.sourcesInsideIf[e],n)),!r}),o},each:function(t,e,n){var i=b(t,n),o=r(i)?"@index":"@key",u={},c="";return s(i,function(t,i){u[o]=i,u["@this"]=t,a(n,u),c+=P(e.slice(),n)}),c},with:function(t,e,n){var s=i("as",t),r=t[s+1],o=b(t.slice(0,s),n),u={};return u[r]=o,P(e,a(n,u))||""}},m=3==="a".split(/a/).length?function(t,e){return t.split(e)}:function(t,e){var n,i,s=[],r=0;for(e.global||(e=new RegExp(e,"g")),n=e.exec(t);null!==n;)i=n.index,s.push(t.slice(r,i)),r=i+n[0].length,n=e.exec(t);return s.push(t.slice(r)),s};function x(t,e){var n,i=e[t];return"true"===t?i=!0:"false"===t?i=!1:h.test(t)?i=t.replace(g,""):c.test(t)?i=x((n=t.split(p))[0],e)[x(n[1],e)]:l.test(t)?i=x((n=t.split(f))[0],e)[n[1]]:_.test(t)&&(i=parseFloat(t)),i}function y(t,e,n){for(var i,s,r,a,u=v[t],c=1,p=0+d,l=e[p];c&&o(l);)0===l.indexOf(t)?c+=1:0===l.indexOf("/"+t)&&(c-=1,i=p),l=e[p+=d];if(c)throw Error(t+" needs {{/"+t+"}} expression.");return e[0]=u(e[0].split(" ").slice(1),(s=0,r=i,(a=e.splice(s+1,r-s)).pop(),a),n),e}function b(t,e){var n=x(t[0],e);return n instanceof Function?function(t,e,n){var i=[];return s(e,function(t){i.push(x(t,n))}),t.apply(null,i)}(n,t.slice(1),e):n}function P(t,e){for(var n,i,s,r=1,a=t[r];o(a);)i=(n=a.split(" "))[0],v[i]?(s=y(i,t.splice(r,t.length-r),e),t=t.concat(s)):t[r]=b(n,e),a=t[r+=d];return t.join("")}t.exports=function(t,e){return P(m(t,u),e)}},function(t,e,n){"use strict";var i=n(1),s=n(31),r=6048e5;t.exports=function(t,e){var n=location.hostname,o="TOAST UI "+t+" for "+n+": Statistics",a=window.localStorage.getItem(o);(i(window.tui)||!1!==window.tui.usageStatistics)&&(a&&!function(t){return(new Date).getTime()-t>r}(a)||(window.localStorage.setItem(o,(new Date).getTime()),setTimeout(function(){"interactive"!==document.readyState&&"complete"!==document.readyState||s("https://www.google-analytics.com/collect",{v:1,t:"event",tid:e,cid:n,dp:n,dh:t,el:t,ec:"use"})},1e3)))}},function(t,e,n){"use strict";var i=n(6);t.exports=function(t,e){var n=document.createElement("img"),s="";return i(e,function(t,e){s+="&"+e+"="+t}),s=s.substring(1),n.src=t+"?"+s,n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n}}])});
},{}],"UYQs":[function(require,module,exports) {

},{}],"EDTP":[function(require,module,exports) {
"use strict";module.exports=function(r,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}};
},{}],"S1cf":[function(require,module,exports) {
"use strict";var r=require("./helpers/bind"),t=Object.prototype.toString;function n(r){return Array.isArray(r)}function e(r){return void 0===r}function o(r){return null!==r&&!e(r)&&null!==r.constructor&&!e(r.constructor)&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}function i(r){return"[object ArrayBuffer]"===t.call(r)}function u(r){return"[object FormData]"===t.call(r)}function c(r){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer&&i(r.buffer)}function f(r){return"string"==typeof r}function a(r){return"number"==typeof r}function l(r){return null!==r&&"object"==typeof r}function s(r){if("[object Object]"!==t.call(r))return!1;var n=Object.getPrototypeOf(r);return null===n||n===Object.prototype}function p(r){return"[object Date]"===t.call(r)}function b(r){return"[object File]"===t.call(r)}function y(r){return"[object Blob]"===t.call(r)}function d(r){return"[object Function]"===t.call(r)}function j(r){return l(r)&&d(r.pipe)}function v(r){return"[object URLSearchParams]"===t.call(r)}function m(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function B(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function g(r,t){if(null!=r)if("object"!=typeof r&&(r=[r]),n(r))for(var e=0,o=r.length;e<o;e++)t.call(null,r[e],e,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.call(null,r[i],i,r)}function A(){var r={};function t(t,e){s(r[e])&&s(t)?r[e]=A(r[e],t):s(t)?r[e]=A({},t):n(t)?r[e]=t.slice():r[e]=t}for(var e=0,o=arguments.length;e<o;e++)g(arguments[e],t);return r}function O(t,n,e){return g(n,function(n,o){t[o]=e&&"function"==typeof n?r(n,e):n}),t}function h(r){return 65279===r.charCodeAt(0)&&(r=r.slice(1)),r}module.exports={isArray:n,isArrayBuffer:i,isBuffer:o,isFormData:u,isArrayBufferView:c,isString:f,isNumber:a,isObject:l,isPlainObject:s,isUndefined:e,isDate:p,isFile:b,isBlob:y,isFunction:d,isStream:j,isURLSearchParams:v,isStandardBrowserEnv:B,forEach:g,merge:A,extend:O,trim:m,stripBOM:h};
},{"./helpers/bind":"EDTP"}],"H6Qo":[function(require,module,exports) {
"use strict";var e=require("./../utils");function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function(i,n,t){if(!n)return i;var a;if(t)a=t(n);else if(e.isURLSearchParams(n))a=n.toString();else{var c=[];e.forEach(n,function(i,n){null!=i&&(e.isArray(i)?n+="[]":i=[i],e.forEach(i,function(i){e.isDate(i)?i=i.toISOString():e.isObject(i)&&(i=JSON.stringify(i)),c.push(r(n)+"="+r(i))}))}),a=c.join("&")}if(a){var o=i.indexOf("#");-1!==o&&(i=i.slice(0,o)),i+=(-1===i.indexOf("?")?"?":"&")+a}return i};
},{"./../utils":"S1cf"}],"rj2i":[function(require,module,exports) {
"use strict";var n=require("./../utils");function e(){this.handlers=[]}e.prototype.use=function(n,e,t){return this.handlers.push({fulfilled:n,rejected:e,synchronous:!!t&&t.synchronous,runWhen:t?t.runWhen:null}),this.handlers.length-1},e.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},e.prototype.forEach=function(e){n.forEach(this.handlers,function(n){null!==n&&e(n)})},module.exports=e;
},{"./../utils":"S1cf"}],"M8l6":[function(require,module,exports) {
"use strict";var e=require("../utils");module.exports=function(t,r){e.forEach(t,function(e,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(t[r]=e,delete t[o])})};
},{"../utils":"S1cf"}],"YdsM":[function(require,module,exports) {
"use strict";module.exports=function(s,e,t,i,n){return s.config=e,t&&(s.code=t),s.request=i,s.response=n,s.isAxiosError=!0,s.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},s};
},{}],"LrSb":[function(require,module,exports) {
"use strict";module.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};
},{}],"bIiH":[function(require,module,exports) {
"use strict";var r=require("./enhanceError");module.exports=function(e,n,o,t,u){var a=new Error(e);return r(a,n,o,t,u)};
},{"./enhanceError":"YdsM"}],"aS8y":[function(require,module,exports) {
"use strict";var t=require("./createError");module.exports=function(e,s,u){var a=u.config.validateStatus;u.status&&a&&!a(u.status)?s(t("Request failed with status code "+u.status,u.config,null,u.request,u)):e(u)};
},{"./createError":"bIiH"}],"dn2M":[function(require,module,exports) {
"use strict";var e=require("./../utils");module.exports=e.isStandardBrowserEnv()?{write:function(n,t,o,r,i,u){var s=[];s.push(n+"="+encodeURIComponent(t)),e.isNumber(o)&&s.push("expires="+new Date(o).toGMTString()),e.isString(r)&&s.push("path="+r),e.isString(i)&&s.push("domain="+i),!0===u&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};
},{"./../utils":"S1cf"}],"YZjV":[function(require,module,exports) {
"use strict";module.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)};
},{}],"a2Uu":[function(require,module,exports) {
"use strict";module.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e};
},{}],"KxkP":[function(require,module,exports) {
"use strict";var e=require("../helpers/isAbsoluteURL"),r=require("../helpers/combineURLs");module.exports=function(s,u){return s&&!e(u)?r(s,u):u};
},{"../helpers/isAbsoluteURL":"YZjV","../helpers/combineURLs":"a2Uu"}],"ZeD7":[function(require,module,exports) {
"use strict";var e=require("./../utils"),t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(r){var i,o,n,s={};return r?(e.forEach(r.split("\n"),function(r){if(n=r.indexOf(":"),i=e.trim(r.substr(0,n)).toLowerCase(),o=e.trim(r.substr(n+1)),i){if(s[i]&&t.indexOf(i)>=0)return;s[i]="set-cookie"===i?(s[i]?s[i]:[]).concat([o]):s[i]?s[i]+", "+o:o}}),s):s};
},{"./../utils":"S1cf"}],"w7LF":[function(require,module,exports) {
"use strict";var t=require("./../utils");module.exports=t.isStandardBrowserEnv()?function(){var r,e=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function a(t){var r=t;return e&&(o.setAttribute("href",r),r=o.href),o.setAttribute("href",r),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return r=a(window.location.href),function(e){var o=t.isString(e)?a(e):e;return o.protocol===r.protocol&&o.host===r.host}}():function(){return!0};
},{"./../utils":"S1cf"}],"mIKj":[function(require,module,exports) {
"use strict";function t(t){this.message=t}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,module.exports=t;
},{}],"KRuG":[function(require,module,exports) {
"use strict";var e=require("./../utils"),r=require("./../core/settle"),t=require("./../helpers/cookies"),n=require("./../helpers/buildURL"),o=require("../core/buildFullPath"),s=require("./../helpers/parseHeaders"),a=require("./../helpers/isURLSameOrigin"),i=require("../core/createError"),u=require("../defaults/transitional"),l=require("../cancel/Cancel");module.exports=function(d){return new Promise(function(c,p){var f,m=d.data,g=d.headers,h=d.responseType;function T(){d.cancelToken&&d.cancelToken.unsubscribe(f),d.signal&&d.signal.removeEventListener("abort",f)}e.isFormData(m)&&delete g["Content-Type"];var E=new XMLHttpRequest;if(d.auth){var v=d.auth.username||"",q=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";g.Authorization="Basic "+btoa(v+":"+q)}var b=o(d.baseURL,d.url);function w(){if(E){var e="getAllResponseHeaders"in E?s(E.getAllResponseHeaders()):null,t={data:h&&"text"!==h&&"json"!==h?E.response:E.responseText,status:E.status,statusText:E.statusText,headers:e,config:d,request:E};r(function(e){c(e),T()},function(e){p(e),T()},t),E=null}}if(E.open(d.method.toUpperCase(),n(b,d.params,d.paramsSerializer),!0),E.timeout=d.timeout,"onloadend"in E?E.onloadend=w:E.onreadystatechange=function(){E&&4===E.readyState&&(0!==E.status||E.responseURL&&0===E.responseURL.indexOf("file:"))&&setTimeout(w)},E.onabort=function(){E&&(p(i("Request aborted",d,"ECONNABORTED",E)),E=null)},E.onerror=function(){p(i("Network Error",d,null,E)),E=null},E.ontimeout=function(){var e=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",r=d.transitional||u;d.timeoutErrorMessage&&(e=d.timeoutErrorMessage),p(i(e,d,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",E)),E=null},e.isStandardBrowserEnv()){var R=(d.withCredentials||a(b))&&d.xsrfCookieName?t.read(d.xsrfCookieName):void 0;R&&(g[d.xsrfHeaderName]=R)}"setRequestHeader"in E&&e.forEach(g,function(e,r){void 0===m&&"content-type"===r.toLowerCase()?delete g[r]:E.setRequestHeader(r,e)}),e.isUndefined(d.withCredentials)||(E.withCredentials=!!d.withCredentials),h&&"json"!==h&&(E.responseType=d.responseType),"function"==typeof d.onDownloadProgress&&E.addEventListener("progress",d.onDownloadProgress),"function"==typeof d.onUploadProgress&&E.upload&&E.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(f=function(e){E&&(p(!e||e&&e.type?new l("canceled"):e),E.abort(),E=null)},d.cancelToken&&d.cancelToken.subscribe(f),d.signal&&(d.signal.aborted?f():d.signal.addEventListener("abort",f))),m||(m=null),E.send(m)})};
},{"./../utils":"S1cf","./../core/settle":"aS8y","./../helpers/cookies":"dn2M","./../helpers/buildURL":"H6Qo","../core/buildFullPath":"KxkP","./../helpers/parseHeaders":"ZeD7","./../helpers/isURLSameOrigin":"w7LF","../core/createError":"bIiH","../defaults/transitional":"LrSb","../cancel/Cancel":"mIKj"}],"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"VQpg":[function(require,module,exports) {
var process = require("process");
var e=require("process"),r=require("../utils"),t=require("../helpers/normalizeHeaderName"),n=require("../core/enhanceError"),i=require("./transitional"),a={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function s(){var r;return"undefined"!=typeof XMLHttpRequest?r=require("../adapters/xhr"):void 0!==e&&"[object process]"===Object.prototype.toString.call(e)&&(r=require("../adapters/http")),r}function c(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}var p={transitional:i,adapter:s(),transformRequest:[function(e,n){return t(n,"Accept"),t(n,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||n&&"application/json"===n["Content-Type"]?(o(n,"application/json"),c(e)):e}],transformResponse:[function(e){var t=this.transitional||p.transitional,i=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,o=!i&&"json"===this.responseType;if(o||a&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o){if("SyntaxError"===s.name)throw n(s,this,"E_JSON_PARSE");throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(e){p.headers[e]={}}),r.forEach(["post","put","patch"],function(e){p.headers[e]=r.merge(a)}),module.exports=p;
},{"../utils":"S1cf","../helpers/normalizeHeaderName":"M8l6","../core/enhanceError":"YdsM","./transitional":"LrSb","../adapters/xhr":"KRuG","../adapters/http":"KRuG","process":"pBGv"}],"woEt":[function(require,module,exports) {
"use strict";var r=require("./../utils"),e=require("../defaults");module.exports=function(t,u,i){var s=this||e;return r.forEach(i,function(r){t=r.call(s,t,u)}),t};
},{"./../utils":"S1cf","../defaults":"VQpg"}],"V30M":[function(require,module,exports) {
"use strict";module.exports=function(t){return!(!t||!t.__CANCEL__)};
},{}],"uz6X":[function(require,module,exports) {
"use strict";var e=require("./../utils"),a=require("./transformData"),r=require("../cancel/isCancel"),t=require("../defaults"),n=require("../cancel/Cancel");function s(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new n("canceled")}module.exports=function(n){return s(n),n.headers=n.headers||{},n.data=a.call(n,n.data,n.headers,n.transformRequest),n.headers=e.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),e.forEach(["delete","get","head","post","put","patch","common"],function(e){delete n.headers[e]}),(n.adapter||t.adapter)(n).then(function(e){return s(n),e.data=a.call(n,e.data,e.headers,n.transformResponse),e},function(e){return r(e)||(s(n),e&&e.response&&(e.response.data=a.call(n,e.response.data,e.response.headers,n.transformResponse))),Promise.reject(e)})};
},{"./../utils":"S1cf","./transformData":"woEt","../cancel/isCancel":"V30M","../defaults":"VQpg","../cancel/Cancel":"mIKj"}],"OHvn":[function(require,module,exports) {
"use strict";var e=require("../utils");module.exports=function(n,t){t=t||{};var i={};function r(n,t){return e.isPlainObject(n)&&e.isPlainObject(t)?e.merge(n,t):e.isPlainObject(t)?e.merge({},t):e.isArray(t)?t.slice():t}function o(i){return e.isUndefined(t[i])?e.isUndefined(n[i])?void 0:r(void 0,n[i]):r(n[i],t[i])}function s(n){if(!e.isUndefined(t[n]))return r(void 0,t[n])}function a(i){return e.isUndefined(t[i])?e.isUndefined(n[i])?void 0:r(void 0,n[i]):r(void 0,t[i])}function d(e){return e in t?r(n[e],t[e]):e in n?r(void 0,n[e]):void 0}var c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:d};return e.forEach(Object.keys(n).concat(Object.keys(t)),function(n){var t=c[n]||o,r=t(n);e.isUndefined(r)&&t!==d||(i[n]=r)}),i};
},{"../utils":"S1cf"}],"xNqU":[function(require,module,exports) {
module.exports={version:"0.26.1"};
},{}],"lsvU":[function(require,module,exports) {
"use strict";var n=require("../env/data").version,e={};["object","boolean","number","function","string","symbol"].forEach(function(n,r){e[n]=function(e){return typeof e===n||"a"+(r<1?"n ":" ")+n}});var r={};function o(n,e,r){if("object"!=typeof n)throw new TypeError("options must be an object");for(var o=Object.keys(n),t=o.length;t-- >0;){var i=o[t],a=e[i];if(a){var s=n[i],u=void 0===s||a(s,i,n);if(!0!==u)throw new TypeError("option "+i+" must be "+u)}else if(!0!==r)throw Error("Unknown option "+i)}}e.transitional=function(e,o,t){function i(e,r){return"[Axios v"+n+"] Transitional option '"+e+"'"+r+(t?". "+t:"")}return function(n,t,a){if(!1===e)throw new Error(i(t," has been removed"+(o?" in "+o:"")));return o&&!r[t]&&(r[t]=!0,console.warn(i(t," has been deprecated since v"+o+" and will be removed in the near future"))),!e||e(n,t,a)}},module.exports={assertOptions:o,validators:e};
},{"../env/data":"xNqU"}],"OvAf":[function(require,module,exports) {
"use strict";var t=require("./../utils"),e=require("../helpers/buildURL"),r=require("./InterceptorManager"),o=require("./dispatchRequest"),i=require("./mergeConfig"),n=require("../helpers/validator"),s=n.validators;function a(t){this.defaults=t,this.interceptors={request:new r,response:new r}}a.prototype.request=function(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},(e=i(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;void 0!==r&&n.assertOptions(r,{silentJSONParsing:s.transitional(s.boolean),forcedJSONParsing:s.transitional(s.boolean),clarifyTimeoutError:s.transitional(s.boolean)},!1);var a=[],u=!0;this.interceptors.request.forEach(function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(u=u&&t.synchronous,a.unshift(t.fulfilled,t.rejected))});var h,f=[];if(this.interceptors.response.forEach(function(t){f.push(t.fulfilled,t.rejected)}),!u){var l=[o,void 0];for(Array.prototype.unshift.apply(l,a),l=l.concat(f),h=Promise.resolve(e);l.length;)h=h.then(l.shift(),l.shift());return h}for(var c=e;a.length;){var p=a.shift(),d=a.shift();try{c=p(c)}catch(m){d(m);break}}try{h=o(c)}catch(m){return Promise.reject(m)}for(;f.length;)h=h.then(f.shift(),f.shift());return h},a.prototype.getUri=function(t){return t=i(this.defaults,t),e(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},t.forEach(["delete","get","head","options"],function(t){a.prototype[t]=function(e,r){return this.request(i(r||{},{method:t,url:e,data:(r||{}).data}))}}),t.forEach(["post","put","patch"],function(t){a.prototype[t]=function(e,r,o){return this.request(i(o||{},{method:t,url:e,data:r}))}}),module.exports=a;
},{"./../utils":"S1cf","../helpers/buildURL":"H6Qo","./InterceptorManager":"rj2i","./dispatchRequest":"uz6X","./mergeConfig":"OHvn","../helpers/validator":"lsvU"}],"tsWd":[function(require,module,exports) {
"use strict";var e=require("./Cancel");function n(n){if("function"!=typeof n)throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(e){s=e});var t=this;this.promise.then(function(e){if(t._listeners){var n,s=t._listeners.length;for(n=0;n<s;n++)t._listeners[n](e);t._listeners=null}}),this.promise.then=function(e){var n,s=new Promise(function(e){t.subscribe(e),n=e}).then(e);return s.cancel=function(){t.unsubscribe(n)},s},n(function(n){t.reason||(t.reason=new e(n),s(t.reason))})}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},n.prototype.unsubscribe=function(e){if(this._listeners){var n=this._listeners.indexOf(e);-1!==n&&this._listeners.splice(n,1)}},n.source=function(){var e;return{token:new n(function(n){e=n}),cancel:e}},module.exports=n;
},{"./Cancel":"mIKj"}],"X8jb":[function(require,module,exports) {
"use strict";module.exports=function(n){return function(t){return n.apply(null,t)}};
},{}],"wICU":[function(require,module,exports) {
"use strict";var r=require("./../utils");module.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError};
},{"./../utils":"S1cf"}],"nUiQ":[function(require,module,exports) {
"use strict";var e=require("./utils"),r=require("./helpers/bind"),i=require("./core/Axios"),n=require("./core/mergeConfig"),o=require("./defaults");function u(o){var s=new i(o),t=r(i.prototype.request,s);return e.extend(t,i.prototype,s),e.extend(t,s),t.create=function(e){return u(n(o,e))},t}var s=u(o);s.Axios=i,s.Cancel=require("./cancel/Cancel"),s.CancelToken=require("./cancel/CancelToken"),s.isCancel=require("./cancel/isCancel"),s.VERSION=require("./env/data").version,s.all=function(e){return Promise.all(e)},s.spread=require("./helpers/spread"),s.isAxiosError=require("./helpers/isAxiosError"),module.exports=s,module.exports.default=s;
},{"./utils":"S1cf","./helpers/bind":"EDTP","./core/Axios":"OvAf","./core/mergeConfig":"OHvn","./defaults":"VQpg","./cancel/Cancel":"mIKj","./cancel/CancelToken":"tsWd","./cancel/isCancel":"V30M","./env/data":"xNqU","./helpers/spread":"X8jb","./helpers/isAxiosError":"wICU"}],"dZBD":[function(require,module,exports) {
module.exports=require("./lib/axios");
},{"./lib/axios":"nUiQ"}],"PZFh":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e="Expected a function",n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,f=/^0o[0-7]+$/i,c=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,v=a||s||Function("return this")(),l=Object.prototype,p=l.toString,b=Math.max,m=Math.min,y=function(){return v.Date.now()};function d(t,n,r){var i,o,u,f,c,a,s=0,v=!1,l=!1,p=!0;if("function"!=typeof t)throw new TypeError(e);function d(e){var n=i,r=o;return i=o=void 0,s=e,f=t.apply(r,n)}function g(t){var e=t-a;return void 0===a||e>=n||e<0||l&&t-s>=u}function O(){var t=y();if(g(t))return x(t);c=setTimeout(O,function(t){var e=n-(t-a);return l?m(e,u-(t-s)):e}(t))}function x(t){return c=void 0,p&&i?d(t):(i=o=void 0,f)}function T(){var t=y(),e=g(t);if(i=arguments,o=this,a=t,e){if(void 0===c)return function(t){return s=t,c=setTimeout(O,n),v?d(t):f}(a);if(l)return c=setTimeout(O,n),d(a)}return void 0===c&&(c=setTimeout(O,n)),f}return n=h(n)||0,j(r)&&(v=!!r.leading,u=(l="maxWait"in r)?b(h(r.maxWait)||0,n):u,p="trailing"in r?!!r.trailing:p),T.cancel=function(){void 0!==c&&clearTimeout(c),s=0,i=a=o=c=void 0},T.flush=function(){return void 0===c?f:x(y())},T}function j(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){return!!t&&"object"==typeof t}function O(t){return"symbol"==typeof t||g(t)&&p.call(t)==r}function h(t){if("number"==typeof t)return t;if(O(t))return n;if(j(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=j(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var r=u.test(t);return r||f.test(t)?c(t.slice(2),r?2:8):o.test(t)?n:+t}module.exports=d;
},{}],"VyiV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.refs=void 0;const e={backdrop:document.querySelector(".backdrop"),openRegisterForm:document.querySelector("#openRegisterForm"),registerForm:document.querySelector("#registerForm"),registerModal__closebtn:document.querySelector(".registerModal__closebtn"),openSignInForm:document.querySelector("#openSignInForm"),signInForm:document.querySelector("#signInForm"),signInModal__closebtn:document.querySelector(".signInModal__closebtn"),signOutBtn:document.querySelector("#signOutBtn"),addToWatchedBtn:document.querySelector("#watchedBtn"),addToQueueBtn:document.querySelector("#queueBtn"),pagination:document.getElementById("pagination"),queue:document.querySelector("#queue"),watched:document.querySelector("#watched"),home:document.querySelector("#home"),library:document.querySelector("#library"),input:document.querySelector("#input"),buttonLibrary:document.querySelector(".but__container"),background:document.querySelector("#background"),headerScroll:document.querySelector(".scroll"),progressContainer:document.querySelector(".progress-container"),openModalTeamBtn:document.querySelector(".footer-link"),closeModalTeamBtn:document.querySelector(".modal-team__close-btn"),modalTeam:document.querySelector(".backdrop-team"),teamContainer:document.querySelector(".team"),homeFilmList:document.querySelector(".film-list"),backdropCardModal:document.querySelector(".backdrop--card"),boxCardModal:document.querySelector(".card-modal__container"),buttonCloseModal:document.querySelector(".card-modal__button-close")};exports.refs=e;
},{}],"ZoLW":[function(require,module,exports) {
module.exports={genres:[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}]};
},{}],"hYIH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderCardMurkup=a,exports.renderCardMurkupLibreary=i;var e=require("./refs"),s=require("./genres.json");const n="https://image.tmdb.org/t/p/w300",r="https://raw.githubusercontent.com/oliarosiak/filmoteka-project/main/src/images/poster.jpg";function a(a){const i=a.results.map(({id:e,poster_path:a,title:i,genre_ids:c,release_date:l})=>{let t=c.slice(0,3).map(e=>s.genres.filter(s=>s.id===e)).flat().map(e=>e.name).join(", ");return i=i.length>37?`${i.slice(0,40)}...`:i,`<li class="card">\n                    <a href="#${e}" class="card__link" id="${e}">\n                        <img class="card__img" src="${null===a?r:`${n}${a}`}" alt="${i}"/>\n                        <div class="card__information">\n                            <h2 class="card__name">${i}</h2>\n                            <div class="card__inf">\n                            <p class="card__genre">${t}</p>\n                            ${t&&l?'<p class="card__genre">&nbsp;|&nbsp;</p>':""}\n                            <p class="card__genre">${l.slice(0,4)}</p>    \n                            </div>\n                        </div>\n                    </a>\n                </li>`}).join("");e.refs.homeFilmList.insertAdjacentHTML("beforeend",i)}function i(s){const a=s.map(({id:e,poster_path:s,title:a,genres:i,release_date:c,vote_average:l})=>{return i=i.map(e=>e.name),console.log(i),a=a.length>37?`${a.slice(0,40)}...`:a,`<li class="card">\n                    <a href="#${e}" class="card__link" id="${e}">\n                        <img class="card__img" src="${null===s?r:`${n}${s}`}" alt="${a}" />\n                        <div class="card__information">\n                            <h2 class="card__name">${a}</h2>\n                            <div class="card__inf">   \n                            <p class="card__genre">${i}</p>\n                            ${i&&c?'<p class="card__genre">&nbsp;|&nbsp;</p>':""}\n                            <p class="card__genre">${c.slice(0,4)}</p>                        \n                            <p class="card__rating" > ${l}</p>\n                            </div>\n                        </div>\n                    </a>\n                </li>`}).join("");e.refs.homeFilmList.insertAdjacentHTML("beforeend",a)}
},{"./refs":"VyiV","./genres.json":"ZoLW"}],"mqQf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clearRender=r;var e=require("./refs");function r(){e.refs.homeFilmList.innerHTML=""}
},{"./refs":"VyiV"}],"HUSp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchMovie=l,exports.filmName=void 0;var e=a(require("lodash.debounce")),r=require("./fetch"),t=require("./render-сard"),o=require("./pagination"),n=require("./clearRender");function a(e){return e&&e.__esModule?e:{default:e}}let i="";exports.filmName=i;const d=610,s=document.querySelector(".header__form--input"),u=document.getElementById("pagination");function l(e){exports.filmName=i=e.target.value,i.length>0&&(0,r.fetchSearchMovie)(i).then(e=>{e.total_results<=20?u.classList.add("is-hidden"):u.classList.remove("is-hidden"),o.pagination.reset(e.total_results),(0,t.renderCardMurkup)(e),o.pagination.on("beforeMove",e=>{const o=e.page;(0,r.fetchSearchMovie)(o).then(e=>{(0,n.clearRender)(),(0,t.renderCardMurkup)(e),window.scrollTo({top:0,left:0,behavior:"smooth"})})})})}s.addEventListener("input",(0,e.default)(l,610));
},{"lodash.debounce":"PZFh","./fetch":"spyz","./render-сard":"hYIH","./pagination":"o8lo","./clearRender":"mqQf"}],"krw9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.alertMessage=r,exports.onFetchError=s,exports.onFetchOk=l;var e=require("./clearRender");let t=document.querySelector(".header__alert");function r(t){t.total_results>0&&(l(),(0,e.clearRender)()),t.total_results<1&&s()}function s(){t.classList.remove("visually-hidden")}function l(){t.classList.add("visually-hidden")}
},{"./clearRender":"mqQf"}],"FqPt":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(t,i){"function"==typeof e&&e.amd?e([],function(){return i(t)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=i(t):t.Notiflix=i(t)}(void 0!==t?t:"undefined"!=typeof window?window:this,function(e){"use strict";if(void 0===e&&void 0===e.document)return!1;var t,i="Standard",n="Hourglass",a="Circle",o="Arrows",r="Dots",s="Pulse",l="Custom",m="Notiflix",c={ID:"NotiflixLoadingWrap",className:"notiflix-loading",zindex:4e3,backgroundColor:"rgba(0,0,0,0.8)",rtl:!1,fontFamily:"Quicksand",cssAnimation:!0,cssAnimationDuration:400,clickToClose:!1,customSvgUrl:null,customSvgCode:null,svgSize:"80px",svgColor:"#32c682",messageID:"NotiflixLoadingMessage",messageFontSize:"15px",messageMaxLength:34,messageColor:"#dcdcdc"},f=function(e){return console.error("%c Notiflix Error ","padding:2px;border-radius:20px;color:#fff;background:#ff5549","\n"+e+"\n\nVisit documentation page to learn more: https://notiflix.github.io/documentation")},d=function(t){return t||(t="head"),null!==e.document[t]||(f('\nNotiflix needs to be appended to the "<'+t+'>" element, but you called it before the "<'+t+'>" element has been created.'),!1)},g=function(){var e={},t=!1,i=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],i++);for(var n=function(i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t&&"[object Object]"===Object.prototype.toString.call(i[n])?e[n]=g(e[n],i[n]):e[n]=i[n])};i<arguments.length;i++)n(arguments[i]);return e},u=function(t){var i=e.document.createElement("div");return i.innerHTML=t,i.textContent||i.innerText||""},p=function(){return'[id^=NotiflixLoadingWrap]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:fixed;z-index:4000;width:100%;height:100%;left:0;top:0;right:0;bottom:0;margin:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;background:rgba(0,0,0,.8);font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}[id^=NotiflixLoadingWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixLoadingWrap].nx-loading-click-to-close{cursor:pointer}[id^=NotiflixLoadingWrap]>div[class*="-icon"]{width:60px;height:60px;position:relative;-webkit-transition:top .2s ease-in-out;-o-transition:top .2s ease-in-out;transition:top .2s ease-in-out;margin:0 auto}[id^=NotiflixLoadingWrap]>div[class*="-icon"] img,[id^=NotiflixLoadingWrap]>div[class*="-icon"] svg{max-width:unset;max-height:unset;width:100%;height:auto;position:absolute;left:0;top:0}[id^=NotiflixLoadingWrap]>p{position:relative;margin:10px auto 0;font-family:inherit!important;font-weight:normal;font-size:15px;line-height:1.4;padding:0 10px;width:100%;text-align:center}[id^=NotiflixLoadingWrap].nx-with-animation{-webkit-animation:loading-animation-fade .3s ease-in-out 0s normal;animation:loading-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes loading-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes loading-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixLoadingWrap].nx-with-animation.nx-remove{opacity:0;-webkit-animation:loading-animation-fade-remove .3s ease-in-out 0s normal;animation:loading-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes loading-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes loading-animation-fade-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixLoadingWrap]>p.nx-loading-message-new{-webkit-animation:loading-new-message-fade .3s ease-in-out 0s normal;animation:loading-new-message-fade .3s ease-in-out 0s normal}@-webkit-keyframes loading-new-message-fade{0%{opacity:0}100%{opacity:1}}@keyframes loading-new-message-fade{0%{opacity:0}100%{opacity:1}}'},h=function(m,p,h,b,w){if(!d("body"))return!1;t||k.Loading.init({});var y=g(!0,t,{});if("object"==typeof p&&!Array.isArray(p)||"object"==typeof h&&!Array.isArray(h)){var x={};"object"==typeof p?x=p:"object"==typeof h&&(x=h),t=g(!0,t,x)}var v,N,S="";if("string"==typeof p&&p.length>0&&(S=p),b){var L="";(S=S.length>t.messageMaxLength?u(S).toString().substring(0,t.messageMaxLength)+"...":u(S).toString()).length>0&&(L='<p id="'+t.messageID+'" class="nx-loading-message" style="color:'+t.messageColor+";font-size:"+t.messageFontSize+';">'+S+"</p>"),t.cssAnimation||(t.cssAnimationDuration=0);var C="";if(m===i)v=t.svgSize,N=t.svgColor,v||(v="60px"),N||(N="#32c682"),C='<svg xmlns="http://www.w3.org/2000/svg" stroke="'+N+'" width="'+v+'" height="'+v+'" transform="scale(.8)" viewBox="0 0 38 38"><g fill="none" fill-rule="evenodd" stroke-width="2" transform="translate(1 1)"><circle cx="18" cy="18" r="18" stroke-opacity=".25"/><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" dur="1s" from="0 18 18" repeatCount="indefinite" to="360 18 18" type="rotate"/></path></g></svg>';else if(m===n)C=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" id="NXLoadingHourglass" fill="'+t+'" width="'+e+'" height="'+e+'" viewBox="0 0 200 200"><style>@-webkit-keyframes NXhourglass5-animation{0%{-webkit-transform:scale(1,1);transform:scale(1,1)}16.67%{-webkit-transform:scale(1,.8);transform:scale(1,.8)}33.33%{-webkit-transform:scale(.88,.6);transform:scale(.88,.6)}37.5%{-webkit-transform:scale(.85,.55);transform:scale(.85,.55)}41.67%{-webkit-transform:scale(.8,.5);transform:scale(.8,.5)}45.83%{-webkit-transform:scale(.75,.45);transform:scale(.75,.45)}50%{-webkit-transform:scale(.7,.4);transform:scale(.7,.4)}54.17%{-webkit-transform:scale(.6,.35);transform:scale(.6,.35)}58.33%{-webkit-transform:scale(.5,.3);transform:scale(.5,.3)}83.33%,to{-webkit-transform:scale(.2,0);transform:scale(.2,0)}}@keyframes NXhourglass5-animation{0%{-webkit-transform:scale(1,1);transform:scale(1,1)}16.67%{-webkit-transform:scale(1,.8);transform:scale(1,.8)}33.33%{-webkit-transform:scale(.88,.6);transform:scale(.88,.6)}37.5%{-webkit-transform:scale(.85,.55);transform:scale(.85,.55)}41.67%{-webkit-transform:scale(.8,.5);transform:scale(.8,.5)}45.83%{-webkit-transform:scale(.75,.45);transform:scale(.75,.45)}50%{-webkit-transform:scale(.7,.4);transform:scale(.7,.4)}54.17%{-webkit-transform:scale(.6,.35);transform:scale(.6,.35)}58.33%{-webkit-transform:scale(.5,.3);transform:scale(.5,.3)}83.33%,to{-webkit-transform:scale(.2,0);transform:scale(.2,0)}}@-webkit-keyframes NXhourglass3-animation{0%{-webkit-transform:scale(1,.02);transform:scale(1,.02)}79.17%,to{-webkit-transform:scale(1,1);transform:scale(1,1)}}@keyframes NXhourglass3-animation{0%{-webkit-transform:scale(1,.02);transform:scale(1,.02)}79.17%,to{-webkit-transform:scale(1,1);transform:scale(1,1)}}@-webkit-keyframes NXhourglass1-animation{0%,83.33%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}@keyframes NXhourglass1-animation{0%,83.33%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}#NXLoadingHourglass *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g data-animator-group="true" data-animator-type="1" style="-webkit-animation-name:NXhourglass1-animation;animation-name:NXhourglass1-animation;-webkit-transform-origin:50% 50%;transform-origin:50% 50%;transform-box:fill-box"><g id="NXhourglass2" fill="inherit"><g data-animator-group="true" data-animator-type="2" style="-webkit-animation-name:NXhourglass3-animation;animation-name:NXhourglass3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform-origin:50% 100%;transform-origin:50% 100%;transform-box:fill-box" opacity=".4"><path id="NXhourglass4" d="M100 100l-34.38 32.08v31.14h68.76v-31.14z"/></g><g data-animator-group="true" data-animator-type="2" style="-webkit-animation-name:NXhourglass5-animation;animation-name:NXhourglass5-animation;-webkit-transform-origin:50% 100%;transform-origin:50% 100%;transform-box:fill-box" opacity=".4"><path id="NXhourglass6" d="M100 100L65.62 67.92V36.78h68.76v31.14z"/></g><path d="M51.14 38.89h8.33v14.93c0 15.1 8.29 28.99 23.34 39.1 1.88 1.25 3.04 3.97 3.04 7.08s-1.16 5.83-3.04 7.09c-15.05 10.1-23.34 23.99-23.34 39.09v14.93h-8.33a4.859 4.859 0 1 0 0 9.72h97.72a4.859 4.859 0 1 0 0-9.72h-8.33v-14.93c0-15.1-8.29-28.99-23.34-39.09-1.88-1.26-3.04-3.98-3.04-7.09s1.16-5.83 3.04-7.08c15.05-10.11 23.34-24 23.34-39.1V38.89h8.33a4.859 4.859 0 1 0 0-9.72H51.14a4.859 4.859 0 1 0 0 9.72zm79.67 14.93c0 15.87-11.93 26.25-19.04 31.03-4.6 3.08-7.34 8.75-7.34 15.15 0 6.41 2.74 12.07 7.34 15.15 7.11 4.78 19.04 15.16 19.04 31.03v14.93H69.19v-14.93c0-15.87 11.93-26.25 19.04-31.02 4.6-3.09 7.34-8.75 7.34-15.16 0-6.4-2.74-12.07-7.34-15.15-7.11-4.78-19.04-15.16-19.04-31.03V38.89h61.62v14.93z"/></g></g></svg>'}(t.svgSize,t.svgColor);else if(m===a)C=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+e+'" viewBox="25 25 50 50" style="-webkit-animation:rotate 2s linear infinite;animation:rotate 2s linear infinite;height:'+e+";-webkit-transform-origin:center center;-ms-transform-origin:center center;transform-origin:center center;width:"+e+';position:absolute;top:0;left:0;margin:auto"><style>@-webkit-keyframes rotate{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}@keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}</style><circle cx="50" cy="50" r="20" fill="none" stroke="'+t+'" stroke-width="2" style="-webkit-animation:dash 1.5s ease-in-out infinite,color 1.5s ease-in-out infinite;animation:dash 1.5s ease-in-out infinite,color 1.5s ease-in-out infinite" stroke-dasharray="150 200" stroke-dashoffset="-10" stroke-linecap="round"/></svg>'}(t.svgSize,t.svgColor);else if(m===o)C=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" fill="'+t+'" width="'+e+'" height="'+e+'" viewBox="0 0 128 128"><g><path fill="inherit" d="M109.25 55.5h-36l12-12a29.54 29.54 0 0 0-49.53 12H18.75A46.04 46.04 0 0 1 96.9 31.84l12.35-12.34v36zm-90.5 17h36l-12 12a29.54 29.54 0 0 0 49.53-12h16.97A46.04 46.04 0 0 1 31.1 96.16L18.74 108.5v-36z"/><animateTransform attributeName="transform" dur="1.5s" from="0 64 64" repeatCount="indefinite" to="360 64 64" type="rotate"/></g></svg>'}(t.svgSize,t.svgColor);else if(m===r)C=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" fill="'+t+'" width="'+e+'" height="'+e+'" viewBox="0 0 100 100"><g transform="translate(25 50)"><circle r="9" fill="inherit" transform="scale(.239)"><animateTransform attributeName="transform" begin="-0.266s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g><g transform="translate(50 50)"><circle r="9" fill="inherit" transform="scale(.00152)"><animateTransform attributeName="transform" begin="-0.133s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g><g transform="translate(75 50)"><circle r="9" fill="inherit" transform="scale(.299)"><animateTransform attributeName="transform" begin="0s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g></svg>'}(t.svgSize,t.svgColor);else if(m===s)C=function(e,t){return e||(e="60px"),t||(t="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" stroke="'+t+'" width="'+e+'" height="'+e+'" viewBox="0 0 44 44"><g fill="none" fill-rule="evenodd" stroke-width="2"><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="0s" calcMode="spline" dur="1.8s" keySplines="0.165, 0.84, 0.44, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 20"/><animate attributeName="stroke-opacity" begin="0s" calcMode="spline" dur="1.8s" keySplines="0.3, 0.61, 0.355, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 0"/></circle><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="-0.9s" calcMode="spline" dur="1.8s" keySplines="0.165, 0.84, 0.44, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 20"/><animate attributeName="stroke-opacity" begin="-0.9s" calcMode="spline" dur="1.8s" keySplines="0.3, 0.61, 0.355, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 0"/></circle></g></svg>'}(t.svgSize,t.svgColor);else if(m===l&&null!==t.customSvgCode&&null===t.customSvgUrl)C=t.customSvgCode||"";else if(m===l&&null!==t.customSvgUrl&&null===t.customSvgCode)C='<img class="nx-custom-loading-icon" width="'+t.svgSize+'" height="'+t.svgSize+'" src="'+t.customSvgUrl+'" alt="Notiflix">';else{if(m===l&&(null===t.customSvgUrl||null===t.customSvgCode))return f('You have to set a static SVG url to "customSvgUrl" option to use Loading Custom.'),!1;C=function(e,t,i){return e||(e="60px"),t||(t="#f8f8f8"),i||(i="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" id="NXLoadingNotiflixLib" width="'+e+'" height="'+e+'" viewBox="0 0 200 200"><defs><style>@keyframes notiflix-n{0%{stroke-dashoffset:1000}to{stroke-dashoffset:0}}@keyframes notiflix-x{0%{stroke-dashoffset:1000}to{stroke-dashoffset:0}}@keyframes notiflix-dot{0%,to{stroke-width:0}50%{stroke-width:12}}.nx-icon-line{stroke:'+t+';stroke-width:12;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:22;fill:none}</style></defs><path d="M47.97 135.05a6.5 6.5 0 1 1 0 13 6.5 6.5 0 0 1 0-13z" style="animation-name:notiflix-dot;animation-timing-function:ease-in-out;animation-duration:1.25s;animation-iteration-count:infinite;animation-direction:normal" fill="'+i+'" stroke="'+i+'" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="22" stroke-width="12"/><path class="nx-icon-line" d="M10.14 144.76V87.55c0-5.68-4.54-41.36 37.83-41.36 42.36 0 37.82 35.68 37.82 41.36v57.21" style="animation-name:notiflix-n;animation-timing-function:linear;animation-duration:2.5s;animation-delay:0s;animation-iteration-count:infinite;animation-direction:normal" stroke-dasharray="500"/><path class="nx-icon-line" d="M115.06 144.49c24.98-32.68 49.96-65.35 74.94-98.03M114.89 46.6c25.09 32.58 50.19 65.17 75.29 97.75" style="animation-name:notiflix-x;animation-timing-function:linear;animation-duration:2.5s;animation-delay:.2s;animation-iteration-count:infinite;animation-direction:normal" stroke-dasharray="500"/></svg>'}(t.svgSize,"#f8f8f8","#32c682")}var z=parseInt((t.svgSize||"").replace(/[^0-9]/g,"")),M=e.innerWidth,T=z>=M?M-40+"px":z+"px",I='<div style="width:'+T+"; height:"+T+';" class="'+t.className+"-icon"+(S.length>0?" nx-with-message":"")+'">'+C+"</div>",j=e.document.createElement("div");if(j.id=c.ID,j.className=t.className+(t.cssAnimation?" nx-with-animation":"")+(t.clickToClose?" nx-loading-click-to-close":""),j.style.zIndex=t.zindex,j.style.background=t.backgroundColor,j.style.animationDuration=t.cssAnimationDuration+"ms",j.style.fontFamily='"'+t.fontFamily+'", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif',j.style.display="flex",j.style.flexWrap="wrap",j.style.flexDirection="column",j.style.alignItems="center",j.style.justifyContent="center",t.rtl&&(j.setAttribute("dir","rtl"),j.classList.add("nx-rtl-on")),j.innerHTML=I+L,!e.document.getElementById(j.id))if(e.document.body.appendChild(j),t.clickToClose)e.document.getElementById(j.id).addEventListener("click",function(){j.classList.add("nx-remove");var e=setTimeout(function(){null!==j.parentNode&&(j.parentNode.removeChild(j),clearTimeout(e))},t.cssAnimationDuration)})}else if(e.document.getElementById(c.ID))var A=e.document.getElementById(c.ID),X=setTimeout(function(){A.classList.add("nx-remove");var e=setTimeout(function(){null!==A.parentNode&&(A.parentNode.removeChild(A),clearTimeout(e))},t.cssAnimationDuration);clearTimeout(X)},w);t=g(!0,t,y)},k={Loading:{init:function(i){t=g(!0,c,i),function(t,i){if(!d("head"))return!1;if(null!==t()&&!e.document.getElementById(i)){var n=e.document.createElement("style");n.id=i,n.innerHTML=t(),e.document.head.appendChild(n)}}(p,"NotiflixLoadingInternalCSS")},merge:function(e){if(!t)return f("You have to initialize the Loading module before call Merge function."),!1;t=g(!0,t,e)},standard:function(e,t){h(i,e,t,!0,0)},hourglass:function(e,t){h(n,e,t,!0,0)},circle:function(e,t){h(a,e,t,!0,0)},arrows:function(e,t){h(o,e,t,!0,0)},dots:function(e,t){h(r,e,t,!0,0)},pulse:function(e,t){h(s,e,t,!0,0)},custom:function(e,t){h(l,e,t,!0,0)},notiflix:function(e,t){h(m,e,t,!0,0)},remove:function(e){"number"!=typeof e&&(e=0),h(null,null,null,!1,e)},change:function(i){!function(i){"string"!=typeof i&&(i="");var n=e.document.getElementById(c.ID);if(n)if(i.length>0){i=i.length>t.messageMaxLength?u(i).substring(0,t.messageMaxLength)+"...":u(i);var a=n.getElementsByTagName("p")[0];if(a)a.innerHTML=i;else{var o=e.document.createElement("p");o.id=t.messageID,o.className="nx-loading-message nx-loading-message-new",o.style.color=t.messageColor,o.style.fontSize=t.messageFontSize,o.innerHTML=i,n.appendChild(o)}}else f("Where is the new message?")}(i)}}};return"object"==typeof e.Notiflix?g(!0,e.Notiflix,{Loading:k.Loading}):{Loading:k.Loading}});
},{}],"GTI9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=require("notiflix/build/notiflix-loading-aio");o.Loading.init({backgroundColor:"rgba(0,0,0,0.25)",svgSize:"110px",svgColor:"#ff6b08",clickToClose:!1});var e=o.Loading;exports.default=e;
},{"notiflix/build/notiflix-loading-aio":"FqPt"}],"spyz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMovies=c,exports.fetchSearchMovie=s,exports.getFilmById=l,exports.onfetchTrailers=d;var e=r(require("axios")),t=require("./searchMovie"),a=require("./searchAlert"),o=r(require("./loading"));function r(e){return e&&e.__esModule?e:{default:e}}const n="https://api.themoviedb.org/3/",u="084ca305e7a4e4bb3dbbc7b67e975385";async function c(t){o.default.dots();const a=await e.default.get(`${n}trending/movie/day?api_key=${u}&language=en-US&page=${t}`);try{const e=a.data;return o.default.remove(),e}catch(r){o.default.remove(),console.log(r)}}async function s(r){o.default.dots();const c=await e.default.get(`${n}search/movie?api_key=${u}&language=en-US&query=${t.filmName}&page=${r}`);try{const e=c.data;return o.default.remove(),(0,a.alertMessage)(e),e}catch(s){o.default.remove(),console.log(s)}}async function l(t){o.default.dots();try{const r=await e.default.get(`${n}movie/${t}?api_key=${u}`);return o.default.remove(),r.data}catch(a){o.default.remove(),console.log(a)}}async function d(t){o.default.dots();try{const r=await e.default.get(`${n}movie/${t}/videos?api_key=${u}&language=en-US`);return o.default.remove(),r.data}catch(a){o.default.remove(),console.log(a)}}
},{"axios":"dZBD","./searchMovie":"HUSp","./searchAlert":"krw9","./loading":"GTI9"}],"o8lo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pagination=void 0;var e=n(require("tui-pagination"));require("tui-pagination/dist/tui-pagination.css"),require("../sass/layout/_pagination.scss");var r=require("./fetch"),t=require("./clearRender"),i=require("./render-сard");function n(e){return e&&e.__esModule?e:{default:e}}const o=document.getElementById("pagination"),a=new e.default(o,{itemsPerPage:20,visiblePages:5});exports.pagination=a;const s=a.getCurrentPage();(0,r.getMovies)(s).then(e=>{a.reset(e.total_results),(0,i.renderCardMurkup)(e)}),a.on("beforeMove",e=>{const n=e.page;(0,r.getMovies)(n).then(e=>{(0,t.clearRender)(),(0,i.renderCardMurkup)(e),window.scrollTo({top:0,left:0,behavior:"smooth"})})});
},{"tui-pagination":"jPMh","tui-pagination/dist/tui-pagination.css":"UYQs","../sass/layout/_pagination.scss":"UYQs","./fetch":"spyz","./clearRender":"mqQf","./render-сard":"hYIH"}],"chA2":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.areCookiesEnabled=D,exports.async=ee,exports.calculateBackoffMillis=pe,exports.contains=U,exports.createMockUserToken=p,exports.createSubscribe=Y,exports.deepCopy=u,exports.deepEqual=H,exports.deepExtend=d,exports.deleteDB=Ae,exports.errorPrefix=ne,exports.extractQuerystring=X,exports.getGlobal=T,exports.getModularInstance=xe,exports.getUA=b,exports.isBrowser=g,exports.isBrowserExtension=y,exports.isElectron=m,exports.isEmpty=z,exports.isIE=v,exports.isIndexedDBAvailable=w,exports.isMobileCordova=_,exports.isNode=x,exports.isNodeSdk=A,exports.isReactNative=E,exports.isSafari=O,exports.isUWP=S,exports.jsonEval=I,exports.map=J,exports.openDB=Se,exports.ordinal=be,exports.querystring=G,exports.querystringDecode=K,exports.safeGet=F,exports.stringify=P,exports.validateCallback=ie,exports.validateContextObject=ae,exports.validateIndexedDBOpenable=C,exports.validateNamespace=se,exports.validateArgCount=exports.stringToByteArray=exports.stringLength=exports.issuedAtTime=exports.isValidTimestamp=exports.isValidFormat=exports.isAdmin=exports.decode=exports.base64urlEncodeWithoutPadding=exports.base64Encode=exports.base64Decode=exports.base64=exports.assertionError=exports.assert=exports.Sha1=exports.RANDOM_FACTOR=exports.MAX_VALUE_MILLIS=exports.FirebaseError=exports.ErrorFactory=exports.Deferred=exports.DBWrapper=exports.CONSTANTS=void 0;const t={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};exports.CONSTANTS=t;const r=function(e,t){if(!e)throw o(t)};exports.assert=r;const o=function(e){return new Error("Firebase Database ("+t.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};exports.assertionError=o;const n=function(e){const t=[];let r=0;for(let o=0;o<e.length;o++){let n=e.charCodeAt(o);n<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&o+1<e.length&&56320==(64512&e.charCodeAt(o+1))?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++o)),t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128)}return t},s=function(e){const t=[];let r=0,o=0;for(;r<e.length;){const n=e[r++];if(n<128)t[o++]=String.fromCharCode(n);else if(n>191&&n<224){const s=e[r++];t[o++]=String.fromCharCode((31&n)<<6|63&s)}else if(n>239&&n<365){const s=((7&n)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[o++]=String.fromCharCode(55296+(s>>10)),t[o++]=String.fromCharCode(56320+(1023&s))}else{const s=e[r++],i=e[r++];t[o++]=String.fromCharCode((15&n)<<12|(63&s)<<6|63&i)}}return t.join("")},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let n=0;n<e.length;n+=3){const t=e[n],s=n+1<e.length,i=s?e[n+1]:0,a=n+2<e.length,c=a?e[n+2]:0,h=t>>2,u=(3&t)<<4|i>>4;let d=(15&i)<<2|c>>6,l=63&c;a||(l=64,s||(d=64)),o.push(r[h],r[u],r[d],r[l])}return o.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(n(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):s(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let n=0;n<e.length;){const t=r[e.charAt(n++)],s=n<e.length?r[e.charAt(n)]:0,i=++n<e.length?r[e.charAt(n)]:64,a=++n<e.length?r[e.charAt(n)]:64;if(++n,null==t||null==s||null==i||null==a)throw Error();const c=t<<2|s>>4;if(o.push(c),64!==i){const e=s<<4&240|i>>2;if(o.push(e),64!==a){const e=i<<6&192|a;o.push(e)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};exports.base64=i;const a=function(e){const t=n(e);return i.encodeByteArray(t,!0)};exports.base64Encode=a;const c=function(e){return a(e).replace(/\./g,"")};exports.base64urlEncodeWithoutPadding=c;const h=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(e){return d(void 0,e)}function d(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const r in t)t.hasOwnProperty(r)&&l(r)&&(e[r]=d(e[r],t[r]));return e}function l(e){return"__proto__"!==e}exports.base64Decode=h;class f{constructor(){this.reject=(()=>{}),this.resolve=(()=>{}),this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function p(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=t||"demo-project",o=e.iat||0,n=e.sub||e.user_id;if(!n)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:n,user_id:n,firebase:{sign_in_provider:"custom",identities:{}}},e);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(s)),""].join(".")}function b(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(b())}function x(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}}function g(){return"object"==typeof self&&self.self===self}function y(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function E(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function m(){return b().indexOf("Electron/")>=0}function v(){const e=b();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function S(){return b().indexOf("MSAppHost/")>=0}function A(){return!0===t.NODE_CLIENT||!0===t.NODE_ADMIN}function O(){return!x()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w(){return"object"==typeof indexedDB}function C(){return new Promise((e,t)=>{try{let o=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=(()=>{s.result.close(),o||self.indexedDB.deleteDatabase(n),e(!0)}),s.onupgradeneeded=(()=>{o=!1}),s.onerror=(()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")})}catch(r){t(r)}})}function D(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}function T(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("Unable to locate global object.")}exports.Deferred=f;const N="FirebaseError";class B extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=N,Object.setPrototypeOf(this,B.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,j.prototype.create)}}exports.FirebaseError=B;class j{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,n=this.errors[e],s=n?M(n,r):"Error",i=`${this.serviceName}: ${s} (${o}).`;return new B(o,i,r)}}function M(e,t){return e.replace(k,(e,r)=>{const o=t[r];return null!=o?String(o):`<${r}?>`})}exports.ErrorFactory=j;const k=/\{\$([^}]+)}/g;function I(e){return JSON.parse(e)}function P(e){return JSON.stringify(e)}const V=function(e){let t={},r={},o={},n="";try{const i=e.split(".");t=I(h(i[0])||""),r=I(h(i[1])||""),n=i[2],o=r.d||{},delete r.d}catch(s){}return{header:t,claims:r,data:o,signature:n}};exports.decode=V;const L=function(e){const t=V(e).claims,r=Math.floor((new Date).getTime()/1e3);let o=0,n=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?o=t.nbf:t.hasOwnProperty("iat")&&(o=t.iat),n=t.hasOwnProperty("exp")?t.exp:o+86400),!!r&&!!o&&!!n&&r>=o&&r<=n};exports.isValidTimestamp=L;const W=function(e){const t=V(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null};exports.issuedAtTime=W;const R=function(e){const t=V(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")};exports.isValidFormat=R;const $=function(e){const t=V(e).claims;return"object"==typeof t&&!0===t.admin};function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function z(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function J(e,t,r){const o={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=t.call(r,e[n],n,e));return o}function H(e,t){if(e===t)return!0;const r=Object.keys(e),o=Object.keys(t);for(const n of r){if(!o.includes(n))return!1;const r=e[n],s=t[n];if(q(r)&&q(s)){if(!H(r,s))return!1}else if(r!==s)return!1}for(const n of o)if(!r.includes(n))return!1;return!0}function q(e){return null!==e&&"object"==typeof e}function G(e){const t=[];for(const[r,o]of Object.entries(e))Array.isArray(o)?o.forEach(e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(o));return t.length?"&"+t.join("&"):""}function K(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[r,o]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(o)}}),t}function X(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}exports.isAdmin=$;class Q{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let u=0;u<16;u++)r[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)r[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=r[u-3]^r[u-8]^r[u-14]^r[u-16];r[u]=4294967295&(e<<1|e>>>31)}let o,n,s=this.chain_[0],i=this.chain_[1],a=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(o=c^i&(a^c),n=1518500249):(o=i^a^c,n=1859775393):u<60?(o=i&a|c&(i|a),n=2400959708):(o=i^a^c,n=3395469782);const e=(s<<5|s>>>27)+o+h+n+r[u]&4294967295;h=c,c=a,a=4294967295&(i<<30|i>>>2),i=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let o=0;const n=this.buf_;let s=this.inbuf_;for(;o<t;){if(0===s)for(;o<=r;)this.compress_(e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(n[s]=e.charCodeAt(o),++o,++s===this.blockSize){this.compress_(n),s=0;break}}else for(;o<t;)if(n[s]=e[o],++o,++s===this.blockSize){this.compress_(n),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let t=24;t>=0;t-=8)e[r]=this.chain_[o]>>t&255,++r;return e}}function Y(e,t){const r=new Z(e,t);return r.subscribe.bind(r)}exports.Sha1=Q;class Z{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");void 0===(o=te(e,["next","error","complete"])?e:{next:e,error:t,complete:r}).next&&(o.next=re),void 0===o.error&&(o.error=re),void 0===o.complete&&(o.complete=re);const n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch(e){}}),this.observers.push(o),n}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ee(e,t){return(...r)=>{Promise.resolve(!0).then(()=>{e(...r)}).catch(e=>{t&&t(e)})}}function te(e,t){if("object"!=typeof e||null===e)return!1;for(const r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}function re(){}const oe=function(e,t,r,o){let n;if(o<t?n="at least "+t:o>r&&(n=0===r?"none":"no more than "+r),n){throw new Error(e+" failed: Was called with "+o+(1===o?" argument.":" arguments.")+" Expects "+n+".")}};function ne(e,t){return`${e} failed: ${t} argument `}function se(e,t,r){if((!r||t)&&"string"!=typeof t)throw new Error(ne(e,"namespace")+"must be a valid firebase namespace.")}function ie(e,t,r,o){if((!o||r)&&"function"!=typeof r)throw new Error(ne(e,t)+"must be a valid function.")}function ae(e,t,r,o){if((!o||r)&&("object"!=typeof r||null===r))throw new Error(ne(e,t)+"must be a valid context object.")}exports.validateArgCount=oe;const ce=function(e){const t=[];let o=0;for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);if(s>=55296&&s<=56319){const t=s-55296;r(++n<e.length,"Surrogate pair missing trail surrogate."),s=65536+(t<<10)+(e.charCodeAt(n)-56320)}s<128?t[o++]=s:s<2048?(t[o++]=s>>6|192,t[o++]=63&s|128):s<65536?(t[o++]=s>>12|224,t[o++]=s>>6&63|128,t[o++]=63&s|128):(t[o++]=s>>18|240,t[o++]=s>>12&63|128,t[o++]=s>>6&63|128,t[o++]=63&s|128)}return t};exports.stringToByteArray=ce;const he=function(e){let t=0;for(let r=0;r<e.length;r++){const o=e.charCodeAt(r);o<128?t++:o<2048?t+=2:o>=55296&&o<=56319?(t+=4,r++):t+=3}return t};exports.stringLength=he;const ue=1e3,de=2,le=144e5;exports.MAX_VALUE_MILLIS=le;const fe=.5;function pe(e,t=ue,r=de){const o=t*Math.pow(r,e),n=Math.round(fe*o*(Math.random()-.5)*2);return Math.min(le,o+n)}function be(e){return Number.isFinite(e)?e+_e(e):`${e}`}function _e(e){const t=(e=Math.abs(e))%100;if(t>=10&&t<=20)return"th";const r=e%10;return 1===r?"st":2===r?"nd":3===r?"rd":"th"}function xe(e){return e&&e._delegate?e._delegate:e}function ge(e,t){return new Promise((r,o)=>{e.onsuccess=(e=>{r(e.target.result)}),e.onerror=(e=>{var r;o(`${t}: ${null===(r=e.target.error)||void 0===r?void 0:r.message}`)})})}exports.RANDOM_FACTOR=fe;class ye{constructor(e){this._db=e,this.objectStoreNames=this._db.objectStoreNames}transaction(e,t){return new Ee(this._db.transaction.call(this._db,e,t))}createObjectStore(e,t){return new me(this._db.createObjectStore(e,t))}close(){this._db.close()}}exports.DBWrapper=ye;class Ee{constructor(e){this._transaction=e,this.complete=new Promise((e,t)=>{this._transaction.oncomplete=function(){e()},this._transaction.onerror=(()=>{t(this._transaction.error)}),this._transaction.onabort=(()=>{t(this._transaction.error)})})}objectStore(e){return new me(this._transaction.objectStore(e))}}class me{constructor(e){this._store=e}index(e){return new ve(this._store.index(e))}createIndex(e,t,r){return new ve(this._store.createIndex(e,t,r))}get(e){return ge(this._store.get(e),"Error reading from IndexedDB")}put(e,t){return ge(this._store.put(e,t),"Error writing to IndexedDB")}delete(e){return ge(this._store.delete(e),"Error deleting from IndexedDB")}clear(){return ge(this._store.clear(),"Error clearing IndexedDB object store")}}class ve{constructor(e){this._index=e}get(e){return ge(this._index.get(e),"Error reading from IndexedDB")}}function Se(e,t,r){return new Promise((o,n)=>{try{const i=indexedDB.open(e,t);i.onsuccess=(e=>{o(new ye(e.target.result))}),i.onerror=(e=>{var t;n(`Error opening indexedDB: ${null===(t=e.target.error)||void 0===t?void 0:t.message}`)}),i.onupgradeneeded=(e=>{r(new ye(i.result),e.oldVersion,e.newVersion,new Ee(i.transaction))})}catch(s){n(`Error opening indexedDB: ${s.message}`)}})}async function Ae(e){return new Promise((t,r)=>{try{const n=indexedDB.deleteDatabase(e);n.onsuccess=(()=>{t()}),n.onerror=(t=>{var o;r(`Error deleting indexedDB database "${e}": ${null===(o=t.target.error)||void 0===o?void 0:o.message}`)})}catch(o){r(`Error deleting indexedDB database "${e}": ${o.message}`)}})}
},{}],"vhY9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Provider=exports.ComponentContainer=exports.Component=void 0;var t=require("@firebase/util");class e{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}exports.Component=e;const n="[DEFAULT]";class i{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const e=new t.Deferred;if(this.instancesDeferred.set(n,e),this.isInitialized(n)||this.shouldAutoInitialize())try{const t=this.getOrInitializeService({instanceIdentifier:n});t&&e.resolve(t)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(r(t))try{this.getOrInitializeService({instanceIdentifier:n})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(t=n){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...t.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return null!=this.component}isInitialized(t=n){return this.instances.has(t)}getOptions(t=n){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[s,r]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&r.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const s of n)try{s(t,e)}catch(i){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:s(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(i){}return n||null}normalizeInstanceIdentifier(t=n){return this.component?this.component.multipleInstances?t:n:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function s(t){return t===n?void 0:t}function r(t){return"EAGER"===t.instantiationMode}exports.Provider=i;class o{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new i(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}exports.ComponentContainer=o;
},{"@firebase/util":"chA2"}],"JJem":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setLogLevel=i,exports.setUserLogHandler=g,exports.Logger=exports.LogLevel=void 0;const e=[];var r;exports.LogLevel=r,function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(r||(exports.LogLevel=r={}));const t={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},o=r.INFO,l={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},s=(e,r,...t)=>{if(r<e.logLevel)return;const o=(new Date).toISOString(),s=l[r];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${r})`);console[s](`[${o}]  ${e.name}:`,...t)};class n{constructor(r){this.name=r,this._logLevel=o,this._logHandler=s,this._userLogHandler=null,e.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in r))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?t[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...e),this._logHandler(this,r.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...e),this._logHandler(this,r.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,r.INFO,...e),this._logHandler(this,r.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,r.WARN,...e),this._logHandler(this,r.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,r.ERROR,...e),this._logHandler(this,r.ERROR,...e)}}function i(r){e.forEach(e=>{e.setLogLevel(r)})}function g(o,l){for(const s of e){let e=null;l&&l.level&&(e=t[l.level]),s.userLogHandler=null===o?null:(t,l,...s)=>{const n=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(r){return null}}).filter(e=>e).join(" ");l>=(null!=e?e:t.logLevel)&&o({level:r[l].toLowerCase(),message:n,args:s,type:t.name})}}}exports.Logger=n;
},{}],"h2Mb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._addComponent=L,exports._addOrOverwriteComponent=M,exports._clearComponents=R,exports._getProvider=T,exports._registerComponent=B,exports._removeServiceInstance=U,exports.deleteApp=G,exports.getApp=W,exports.getApps=Y,exports.initializeApp=K,exports.onLog=X,exports.registerVersion=Q,exports.setLogLevel=Z,Object.defineProperty(exports,"FirebaseError",{enumerable:!0,get:function(){return a.FirebaseError}}),exports._components=exports._apps=exports._DEFAULT_ENTRY_NAME=exports.SDK_VERSION=void 0;var e=require("@firebase/component"),t=require("@firebase/logger"),a=require("@firebase/util");class r{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(n(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}function n(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}const s="@firebase/app",i="0.7.20",o=new t.Logger("@firebase/app"),c="@firebase/app-compat",p="@firebase/analytics-compat",h="@firebase/analytics",l="@firebase/app-check-compat",f="@firebase/app-check",g="@firebase/auth",b="@firebase/auth-compat",d="@firebase/database",m="@firebase/database-compat",u="@firebase/functions",_="@firebase/functions-compat",w="@firebase/installations",C="@firebase/installations-compat",v="@firebase/messaging",D="@firebase/messaging-compat",E="@firebase/performance",y="@firebase/performance-compat",x="@firebase/remote-config",S="@firebase/remote-config-compat",I="@firebase/storage",P="@firebase/storage-compat",O="@firebase/firestore",$="@firebase/firestore-compat",A="firebase",N="9.6.10",j="[DEFAULT]";exports._DEFAULT_ENTRY_NAME=j;const k={[s]:"fire-core",[c]:"fire-core-compat",[h]:"fire-analytics",[p]:"fire-analytics-compat",[f]:"fire-app-check",[l]:"fire-app-check-compat",[g]:"fire-auth",[b]:"fire-auth-compat",[d]:"fire-rtdb",[m]:"fire-rtdb-compat",[u]:"fire-fn",[_]:"fire-fn-compat",[w]:"fire-iid",[C]:"fire-iid-compat",[v]:"fire-fcm",[D]:"fire-fcm-compat",[E]:"fire-perf",[y]:"fire-perf-compat",[x]:"fire-rc",[S]:"fire-rc-compat",[I]:"fire-gcs",[P]:"fire-gcs-compat",[O]:"fire-fst",[$]:"fire-fst-compat","fire-js":"fire-js",[A]:"fire-js-all"},F=new Map;exports._apps=F;const H=new Map;function L(e,t){try{e.container.addComponent(t)}catch(a){o.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,a)}}function M(e,t){e.container.addOrOverwriteComponent(t)}function B(e){const t=e.name;if(H.has(t))return o.debug(`There were multiple attempts to register component ${t}.`),!1;H.set(t,e);for(const a of F.values())L(a,e);return!0}function T(e,t){const a=e.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),e.container.getProvider(t)}function U(e,t,a=j){T(e,t).clearInstance(a)}function R(){H.clear()}exports._components=H;const V={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},q=new a.ErrorFactory("app","Firebase",V);class z{constructor(t,a,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},a),this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new e.Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw q.create("app-deleted",{appName:this._name})}}const J=N;function K(t,r={}){if("object"!=typeof r){r={name:r}}const n=Object.assign({name:j,automaticDataCollectionEnabled:!1},r),s=n.name;if("string"!=typeof s||!s)throw q.create("bad-app-name",{appName:String(s)});const i=F.get(s);if(i){if((0,a.deepEqual)(t,i.options)&&(0,a.deepEqual)(n,i.config))return i;throw q.create("duplicate-app",{appName:s})}const o=new e.ComponentContainer(s);for(const e of H.values())o.addComponent(e);const c=new z(t,n,o);return F.set(s,c),c}function W(e=j){const t=F.get(e);if(!t)throw q.create("no-app",{appName:e});return t}function Y(){return Array.from(F.values())}async function G(e){const t=e.name;F.has(t)&&(F.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function Q(t,a,r){var n;let s=null!==(n=k[t])&&void 0!==n?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),c=a.match(/\s|\//);if(i||c){const e=[`Unable to register library "${s}" with version "${a}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&c&&e.push("and"),c&&e.push(`version name "${a}" contains illegal characters (whitespace or "/")`),void o.warn(e.join(" "))}B(new e.Component(`${s}-version`,()=>({library:s,version:a}),"VERSION"))}function X(e,a){if(null!==e&&"function"!=typeof e)throw q.create("invalid-log-argument");(0,t.setUserLogHandler)(e,a)}function Z(e){(0,t.setLogLevel)(e)}exports.SDK_VERSION="9.6.10";const ee="firebase-heartbeat-database",te=1,ae="firebase-heartbeat-store";let re=null;function ne(){return re||(re=(0,a.openDB)(ee,te,(e,t)=>{switch(t){case 0:e.createObjectStore(ae)}}).catch(e=>{throw q.create("storage-open",{originalErrorMessage:e.message})})),re}async function se(e){try{return(await ne()).transaction(ae).objectStore(ae).get(oe(e))}catch(t){throw q.create("storage-get",{originalErrorMessage:t.message})}}async function ie(e,t){try{const r=(await ne()).transaction(ae,"readwrite"),n=r.objectStore(ae);return await n.put(t,oe(e)),r.complete}catch(a){throw q.create("storage-set",{originalErrorMessage:a.message})}}function oe(e){return`${e.name}!${e.options.appId}`}const ce=1024,pe=2592e6;class he{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ge(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=le();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=pe}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=le(),{heartbeatsToSend:t,unsentEntries:r}=fe(this._heartbeatsCache.heartbeats),n=(0,a.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}}function le(){return(new Date).toISOString().substring(0,10)}function fe(e,t=ce){const a=[];let r=e.slice();for(const n of e){const e=a.find(e=>e.agent===n.agent);if(e){if(e.dates.push(n.date),be(a)>t){e.dates.pop();break}}else if(a.push({agent:n.agent,dates:[n.date]}),be(a)>t){a.pop();break}r=r.slice(1)}return{heartbeatsToSend:a,unsentEntries:r}}class ge{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.isIndexedDBAvailable)()&&(0,a.validateIndexedDBOpenable)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){return await se(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return ie(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return ie(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}}}function be(e){return(0,a.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:e})).length}function de(t){B(new e.Component("platform-logger",e=>new r(e),"PRIVATE")),B(new e.Component("heartbeat",e=>new he(e),"PRIVATE")),Q(s,i,t),Q(s,i,"esm2017"),Q("fire-js","")}de("");
},{"@firebase/component":"vhY9","@firebase/logger":"JJem","@firebase/util":"chA2"}],"OJEJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/app");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r="firebase",t="9.6.10";(0,e.registerVersion)(r,t,"app");
},{"@firebase/app":"h2Mb"}],"f7gb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteInstallations=yt,exports.getId=dt,exports.getInstallations=St,exports.getToken=gt,exports.onIdChange=Ct;var t=require("@firebase/app"),e=require("@firebase/component"),n=require("@firebase/util");const a="@firebase/installations",i="0.5.7",r=1e4,o="w:0.5.7",s="FIS_v2",c="https://firebaseinstallations.googleapis.com/v1",u=36e5,f="installations",p="Installations",l={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},d=new n.ErrorFactory(f,p,l);function g(t){return t instanceof n.FirebaseError&&t.code.includes("request-failed")}function w({projectId:t}){return`${c}/projects/${t}/installations`}function m(t){return{token:t.token,requestStatus:2,expiresIn:b(t.expiresIn),creationTime:Date.now()}}async function h(t,e){const n=(await e.json()).error;return d.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function y({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function C(t,{refreshToken:e}){const n=y(t);return n.append("Authorization",v(e)),n}async function S(t){const e=await t();return e.status>=500&&e.status<600?t():e}function b(t){return Number(t.replace("s","000"))}function v(t){return`${s} ${t}`}async function I({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const a=w(t),i=y(t),r=e.getImmediate({optional:!0});if(r){const t=await r.getHeartbeatsHeader();t&&i.append("x-firebase-client",t)}const c={fid:n,authVersion:s,appId:t.appId,sdkVersion:o},u={method:"POST",headers:i,body:JSON.stringify(c)},f=await S(()=>fetch(a,u));if(f.ok){const t=await f.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:m(t.authToken)}}throw await h("Create Installation",f)}function T(t){return new Promise(e=>{setTimeout(e,t)})}function k(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const j=/^[cdef][\w-]{21}$/,P="";function q(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=$(e);return j.test(n)?n:P}catch(t){return P}}function $(t){return k(t).substr(0,22)}function E(t){return`${t.appName}!${t.appId}`}const O=new Map;function D(t,e){const n=E(t);N(n,e),_(n,e)}function x(t,e){V();const n=E(t);let a=O.get(n);a||(a=new Set,O.set(n,a)),a.add(e)}function A(t,e){const n=E(t),a=O.get(n);a&&(a.delete(e),0===a.size&&O.delete(n),M())}function N(t,e){const n=O.get(t);if(n)for(const a of n)a(e)}function _(t,e){const n=V();n&&n.postMessage({key:t,fid:e}),M()}let F=null;function V(){return!F&&"BroadcastChannel"in self&&((F=new BroadcastChannel("[Firebase] FID Change")).onmessage=(t=>{N(t.data.key,t.data.fid)})),F}function M(){0===O.size&&F&&(F.close(),F=null)}const H="firebase-installations-database",L=1,B="firebase-installations-store";let K=null;function z(){return K||(K=(0,n.openDB)(H,L,(t,e)=>{switch(e){case 0:t.createObjectStore(B)}})),K}async function J(t,e){const n=E(t),a=(await z()).transaction(B,"readwrite"),i=a.objectStore(B),r=await i.get(n);return await i.put(e,n),await a.complete,r&&r.fid===e.fid||D(t,e.fid),e}async function R(t){const e=E(t),n=(await z()).transaction(B,"readwrite");await n.objectStore(B).delete(e),await n.complete}async function U(t,e){const n=E(t),a=(await z()).transaction(B,"readwrite"),i=a.objectStore(B),r=await i.get(n),o=e(r);return void 0===o?await i.delete(n):await i.put(o,n),await a.complete,!o||r&&r.fid===o.fid||D(t,o.fid),o}async function G(t){let e;const n=await U(t.appConfig,n=>{const a=Q(n),i=W(t,a);return e=i.registrationPromise,i.installationEntry});return n.fid===P?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Q(t){return tt(t||{fid:q(),registrationStatus:0})}function W(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(d.create("app-offline"))}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:X(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Y(t)}:{installationEntry:e}}async function X(t,e){try{const a=await I(t,e);return J(t.appConfig,a)}catch(n){throw g(n)&&409===n.customData.serverCode?await R(t.appConfig):await J(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Y(t){let e=await Z(t.appConfig);for(;1===e.registrationStatus;)await T(100),e=await Z(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await G(t);return n||e}return e}function Z(t){return U(t,t=>{if(!t)throw d.create("installation-not-found");return tt(t)})}function tt(t){return et(t)?{fid:t.fid,registrationStatus:0}:t}function et(t){return 1===t.registrationStatus&&t.registrationTime+r<Date.now()}async function nt({appConfig:t,heartbeatServiceProvider:e},n){const a=at(t,n),i=C(t,n),r=e.getImmediate({optional:!0});if(r){const t=await r.getHeartbeatsHeader();t&&i.append("x-firebase-client",t)}const s={installation:{sdkVersion:o,appId:t.appId}},c={method:"POST",headers:i,body:JSON.stringify(s)},u=await S(()=>fetch(a,c));if(u.ok){return m(await u.json())}throw await h("Generate Auth Token",u)}function at(t,{fid:e}){return`${w(t)}/${e}/authTokens:generate`}async function it(t,e=!1){let n;const a=await U(t.appConfig,a=>{if(!ct(a))throw d.create("not-registered");const i=a.authToken;if(!e&&ut(i))return a;if(1===i.requestStatus)return n=rt(t,e),a;{if(!navigator.onLine)throw d.create("app-offline");const e=pt(a);return n=st(t,e),e}});return n?await n:a.authToken}async function rt(t,e){let n=await ot(t.appConfig);for(;1===n.authToken.requestStatus;)await T(100),n=await ot(t.appConfig);const a=n.authToken;return 0===a.requestStatus?it(t,e):a}function ot(t){return U(t,t=>{if(!ct(t))throw d.create("not-registered");return lt(t.authToken)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function st(t,e){try{const a=await nt(t,e),i=Object.assign(Object.assign({},e),{authToken:a});return await J(t.appConfig,i),a}catch(n){if(!g(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await J(t.appConfig,n)}else await R(t.appConfig);throw n}}function ct(t){return void 0!==t&&2===t.registrationStatus}function ut(t){return 2===t.requestStatus&&!ft(t)}function ft(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+u}function pt(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function lt(t){return 1===t.requestStatus&&t.requestTime+r<Date.now()}async function dt(t){const e=t,{installationEntry:n,registrationPromise:a}=await G(e);return a?a.catch(console.error):it(e).catch(console.error),n.fid}async function gt(t,e=!1){const n=t;return await wt(n),(await it(n,e)).token}async function wt(t){const{registrationPromise:e}=await G(t);e&&await e}async function mt(t,e){const n=ht(t,e),a={method:"DELETE",headers:C(t,e)},i=await S(()=>fetch(n,a));if(!i.ok)throw await h("Delete Installation",i)}function ht(t,{fid:e}){return`${w(t)}/${e}`}async function yt(t){const{appConfig:e}=t,n=await U(e,t=>{if(!t||0!==t.registrationStatus)return t});if(n){if(1===n.registrationStatus)throw d.create("delete-pending-registration");if(2===n.registrationStatus){if(!navigator.onLine)throw d.create("app-offline");await mt(e,n),await R(e)}}}function Ct(t,e){const{appConfig:n}=t;return x(n,e),()=>{A(n,e)}}function St(e=(0,t.getApp)()){return(0,t._getProvider)(e,"installations").getImmediate()}function bt(t){if(!t||!t.options)throw vt("App Configuration");if(!t.name)throw vt("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw vt(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function vt(t){return d.create("missing-app-config-values",{valueName:t})}const It="installations",Tt="installations-internal",kt=e=>{const n=e.getProvider("app").getImmediate();return{app:n,appConfig:bt(n),heartbeatServiceProvider:(0,t._getProvider)(n,"heartbeat"),_delete:()=>Promise.resolve()}},jt=e=>{const n=e.getProvider("app").getImmediate(),a=(0,t._getProvider)(n,It).getImmediate();return{getId:()=>dt(a),getToken:t=>gt(a,t)}};function Pt(){(0,t._registerComponent)(new e.Component(It,kt,"PUBLIC")),(0,t._registerComponent)(new e.Component(Tt,jt,"PRIVATE"))}Pt(),(0,t.registerVersion)(a,"0.5.7"),(0,t.registerVersion)(a,"0.5.7","esm2017");
},{"@firebase/app":"h2Mb","@firebase/component":"vhY9","@firebase/util":"chA2"}],"uNeE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAnalytics=X,exports.initializeAnalytics=Y,exports.isSupported=Z,exports.logEvent=ie,exports.setAnalyticsCollectionEnabled=ae,exports.setCurrentScreen=ee,exports.setUserId=te,exports.setUserProperties=ne,exports.settings=U;var e=require("@firebase/app"),t=require("@firebase/logger"),n=require("@firebase/util"),a=require("@firebase/component");require("@firebase/installations");const i="analytics",r="firebase_id",o="origin",s=6e4,c="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",l="https://www.googletagmanager.com/gtag/js",d=new t.Logger("@firebase/analytics");function p(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function u(e,t){const n=document.createElement("script");n.src=`${l}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}function f(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function m(e,t,n,a,i,r){const o=a[i];try{if(o)await t[o];else{const e=(await p(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(s){d.error(s)}e("config",i,r)}async function h(e,t,n,a,i){try{let o=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const a=await p(n);for(const n of e){const e=a.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){o=[];break}o.push(i)}}0===o.length&&(o=Object.values(t)),await Promise.all(o),e("event",a,i||{})}catch(r){d.error(r)}}function g(e,t,n,a){return async function(i,r,o){try{"event"===i?await h(e,t,n,r,o):"config"===i?await m(e,t,n,a,r,o):e("set",r)}catch(s){d.error(s)}}}function y(e,t,n,a,i){let r=function(...e){window[a].push(arguments)};return window[i]&&"function"==typeof window[i]&&(r=window[i]),window[i]=g(r,e,t,n),{gtagCore:r,wrappedGtag:window[i]}}function w(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(l))return t;return null}const I={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'},b=new n.ErrorFactory("analytics","Analytics",I),v=30,x=1e3;class M{constructor(e={},t=x){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const T=new M;function A(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function D(e){var t;const{appId:n,apiKey:a}=e,i={method:"GET",headers:A(a)},r=c.replace("{app-id}",n),o=await fetch(r,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(s){}throw b.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}async function F(e,t=T,n){const{appId:a,apiKey:i,measurementId:r}=e.options;if(!a)throw b.create("no-app-id");if(!i){if(r)return{measurementId:r,appId:a};throw b.create("no-api-key")}const o=t.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new C;return setTimeout(async()=>{c.abort()},void 0!==n?n:s),E({appId:a,apiKey:i,measurementId:r},o,c,t)}async function E(e,{throttleEndTimeMillis:t,backoffCount:a},i,r=T){const{appId:o,measurementId:s}=e;try{await $(i,t)}catch(c){if(s)return d.warn("Timed out fetching this Firebase app's measurement ID from the server."+` Falling back to the measurement ID ${s}`+` provided in the "measurementId" field in the local Firebase config. [${c.message}]`),{appId:o,measurementId:s};throw c}try{const t=await D(e);return r.deleteThrottleMetadata(o),t}catch(c){if(!k(c)){if(r.deleteThrottleMetadata(o),s)return d.warn("Failed to fetch this Firebase app's measurement ID from the server."+` Falling back to the measurement ID ${s}`+` provided in the "measurementId" field in the local Firebase config. [${c.message}]`),{appId:o,measurementId:s};throw c}const t=503===Number(c.customData.httpStatus)?(0,n.calculateBackoffMillis)(a,r.intervalMillis,v):(0,n.calculateBackoffMillis)(a,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+t,backoffCount:a+1};return r.setThrottleMetadata(o,l),d.debug(`Calling attemptFetch again in ${t} millis`),E(e,l,i,r)}}function $(e,t){return new Promise((n,a)=>{const i=Math.max(t-Date.now(),0),r=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(r),a(b.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function k(e){if(!(e instanceof n.FirebaseError&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}class C{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function P(){if(!(0,n.isIndexedDBAvailable)())return d.warn(b.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,n.validateIndexedDBOpenable)()}catch(e){return d.warn(b.create("indexeddb-unavailable",{errorInfo:e}).message),!1}return!0}async function _(e,t,n,a,i,s,c){var l;const p=F(e);p.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&d.warn(`The measurement ID in the local Firebase config (${e.options.measurementId})`+` does not match the measurement ID fetched from the server (${t.measurementId}).`+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(e=>d.error(e)),t.push(p);const f=P().then(e=>e?a.getId():void 0),[m,h]=await Promise.all([p,f]);w()||u(s,m.measurementId),i("js",new Date);const g=null!==(l=null==c?void 0:c.config)&&void 0!==l?l:{};return g[o]="firebase",g.update=!0,null!=h&&(g[r]=h),i("config",m.measurementId,g),m.measurementId}class z{constructor(e){this.app=e}_delete(){return delete j[this.app.options.appId],Promise.resolve()}}let j={},B=[];const q={};let O,S,L="dataLayer",N="gtag",K=!1;function U(e){if(K)throw b.create("already-initialized");e.dataLayerName&&(L=e.dataLayerName),e.gtagName&&(N=e.gtagName)}function G(){const e=[];if((0,n.isBrowserExtension)()&&e.push("This is a browser extension environment."),(0,n.areCookiesEnabled)()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=b.create("invalid-analytics-context",{errorInfo:t});d.warn(n.message)}}function V(e,t,n){G();const a=e.options.appId;if(!a)throw b.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw b.create("no-api-key");d.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+` measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId}`+' provided in the "measurementId" field in the local Firebase config.')}if(null!=j[a])throw b.create("already-exists",{id:a});if(!K){f(L);const{wrappedGtag:e,gtagCore:t}=y(j,B,q,L,N);S=e,O=t,K=!0}return j[a]=_(e,B,q,t,O,L,n),new z(e)}async function W(e,t,n,a,i){if(i&&i.global)e("event",n,a);else{const i=await t;e("event",n,Object.assign(Object.assign({},a),{send_to:i}))}}async function H(e,t,n,a){if(a&&a.global)return e("set",{screen_name:n}),Promise.resolve();e("config",await t,{update:!0,screen_name:n})}async function R(e,t,n,a){if(a&&a.global)return e("set",{user_id:n}),Promise.resolve();e("config",await t,{update:!0,user_id:n})}async function J(e,t,n,a){if(a&&a.global){const t={};for(const e of Object.keys(n))t[`user_properties.${e}`]=n[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:n})}async function Q(e,t){const n=await e;window[`ga-disable-${n}`]=!t}function X(t=(0,e.getApp)()){t=(0,n.getModularInstance)(t);const a=(0,e._getProvider)(t,i);return a.isInitialized()?a.getImmediate():Y(t)}function Y(t,a={}){const r=(0,e._getProvider)(t,i);if(r.isInitialized()){const e=r.getImmediate();if((0,n.deepEqual)(a,r.getOptions()))return e;throw b.create("already-initialized")}return r.initialize({options:a})}async function Z(){if((0,n.isBrowserExtension)())return!1;if(!(0,n.areCookiesEnabled)())return!1;if(!(0,n.isIndexedDBAvailable)())return!1;try{return await(0,n.validateIndexedDBOpenable)()}catch(e){return!1}}function ee(e,t,a){e=(0,n.getModularInstance)(e),H(S,j[e.app.options.appId],t,a).catch(e=>d.error(e))}function te(e,t,a){e=(0,n.getModularInstance)(e),R(S,j[e.app.options.appId],t,a).catch(e=>d.error(e))}function ne(e,t,a){e=(0,n.getModularInstance)(e),J(S,j[e.app.options.appId],t,a).catch(e=>d.error(e))}function ae(e,t){e=(0,n.getModularInstance)(e),Q(j[e.app.options.appId],t).catch(e=>d.error(e))}function ie(e,t,a,i){e=(0,n.getModularInstance)(e),W(S,j[e.app.options.appId],t,a,i).catch(e=>d.error(e))}const re="@firebase/analytics",oe="0.7.7";function se(){(0,e._registerComponent)(new a.Component(i,(e,{options:t})=>{return V(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)},"PUBLIC")),(0,e._registerComponent)(new a.Component("analytics-internal",function(e){try{const n=e.getProvider(i).getImmediate();return{logEvent:(e,t,a)=>ie(n,e,t,a)}}catch(t){throw b.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,e.registerVersion)(re,oe),(0,e.registerVersion)(re,oe,"esm2017")}se();
},{"@firebase/app":"h2Mb","@firebase/logger":"JJem","@firebase/util":"chA2","@firebase/component":"vhY9","@firebase/installations":"f7gb"}],"JWp9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/analytics");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"@firebase/analytics":"uNeE"}],"vCxL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__extends=e,exports.__rest=n,exports.__decorate=o,exports.__param=a,exports.__metadata=i,exports.__awaiter=c,exports.__generator=u,exports.__exportStar=l,exports.__values=s,exports.__read=p,exports.__spread=y,exports.__spreadArrays=h,exports.__spreadArray=d,exports.__await=_,exports.__asyncGenerator=v,exports.__asyncDelegator=b,exports.__asyncValues=w,exports.__makeTemplateObject=x,exports.__importStar=O,exports.__importDefault=g,exports.__classPrivateFieldGet=j,exports.__classPrivateFieldSet=P,exports.__createBinding=exports.__assign=void 0;var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};function e(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return exports.__assign=r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function n(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function o(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function a(t,e){return function(r,n){e(r,n,t)}}function i(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{u(n.next(t))}catch(e){a(e)}}function c(t){try{u(n.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,c)}u((n=n.apply(t,e||[])).next())})}function u(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(c){a=[6,c],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}exports.__assign=r;var f=Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]};function l(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||f(e,t,r)}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function h(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var a=arguments[e],i=0,c=a.length;i<c;i++,o++)n[o]=a[i];return n}function d(t,e,r){if(r||2===arguments.length)for(var n,o=0,a=e.length;o<a;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function v(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){a.push([t,e,r,n])>1||c(t,e)})})}function c(t,e){try{(r=o[t](e)).value instanceof _?Promise.resolve(r.value.v).then(u,f):l(a[0][2],r)}catch(n){l(a[0][3],n)}var r}function u(t){c("next",t)}function f(t){c("throw",t)}function l(t,e){t(e),a.shift(),a.length&&c(a[0][0],a[0][1])}}function b(t){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:_(t[n](e)),done:"return"===n}:o?o(e):e}:o}}function w(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof s?s(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}}function x(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}exports.__createBinding=f;var m=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&f(e,t,r);return m(e,t),e}function g(t){return t&&t.__esModule?t:{default:t}}function j(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)}function P(t,e,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(t,r):o?o.value=r:e.set(t,r),r}
},{}],"bdjI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.$=Wt,exports.D=b,exports.E=xe,exports.W=bt,exports.X=Ut,exports.Y=Ft,exports.Z=Vt,exports._=jt,exports.a0=Kt,exports.a1=Jt,exports.a2=Bt,exports.a3=$t,exports.a4=Yt,exports.a5=Xt,exports.a6=Qt,exports.a7=Zt,exports.a8=en,exports.a9=nn,exports.aA=gr,exports.aB=or,exports.aC=Le,exports.aF=De,exports.aG=Kn,exports.aa=rn,exports.ab=sn,exports.ad=ht,exports.ae=an,exports.af=cn,exports.ag=un,exports.ah=X,exports.ai=Q,exports.aj=Dt,exports.ak=In,exports.al=ae,exports.am=bn,exports.an=Ln,exports.ao=Re,exports.ap=A,exports.aq=Ne,exports.ar=Ee,exports.as=I,exports.at=Yr,exports.au=Er,exports.av=_,exports.aw=E,exports.ax=R,exports.ay=ge,exports.c=Xi,exports.d=Zi,exports.e=Qi,exports.f=ur,exports.g=pr,exports.h=lr,exports.j=fr,exports.l=Vi,exports.n=us,exports.p=_n,exports.q=yn,exports.r=qi,exports.s=Fi,exports.t=Tn,exports.u=Hi,exports.v=wn,exports.w=En,exports.x=kn,exports.y=An,exports.z=exports.o=exports.m=exports.k=exports.i=exports.b=exports.az=exports.ac=exports.aJ=exports.aI=exports.aH=exports.aE=exports.aD=exports.a=exports.V=exports.U=exports.T=exports.S=exports.R=exports.Q=exports.P=exports.O=exports.N=exports.M=exports.L=exports.K=exports.J=exports.I=exports.H=exports.G=exports.F=exports.C=exports.B=exports.A=void 0;var e=require("@firebase/util"),t=require("@firebase/app"),n=require("tslib"),i=require("@firebase/logger"),r=require("@firebase/component");const s={PHONE:"phone"};exports.F=s;const o={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};exports.o=o;const a={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"};exports.S=a;const c={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"};exports.O=c;const u={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function d(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}exports.A=u;const h=d;exports.z=h;const p=l;exports.B=p;const m=new e.ErrorFactory("auth","Firebase",l()),f={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized"};exports.C=f;const g=new i.Logger("@firebase/auth");function v(e,...n){g.logLevel<=i.LogLevel.ERROR&&g.error(`Auth (${t.SDK_VERSION}): ${e}`,...n)}function I(e,...t){throw w(e,...t)}function _(e,...t){return w(e,...t)}function y(t,n,i){const r=Object.assign(Object.assign({},p()),{[n]:i});return new e.ErrorFactory("auth","Firebase",r).create(n,{appName:t.name})}function T(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&I(e,"argument-error"),y(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.`+"Did you pass a reference from a different Auth SDK?")}function w(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return m.create(e,...t)}function E(e,t,...n){if(!e)throw w(t,...n)}function k(e){const t="INTERNAL ASSERTION FAILED: "+e;throw v(t),new Error(t)}function A(e,t){e||k(t)}const N=new Map;function R(e){A(e instanceof Function,"Expected a class definition");let t=N.get(e);return t?(A(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,N.set(e,t),t)}function b(n,i){const r=(0,t._getProvider)(n,"auth");if(r.isInitialized()){const t=r.getImmediate(),n=r.getOptions();if((0,e.deepEqual)(n,null!=i?i:{}))return t;I(t,"already-initialized")}return r.initialize({options:i})}function S(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(R);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}function O(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function P(){return"http:"===D()||"https:"===D()}function D(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function C(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(P()||(0,e.isBrowserExtension)()||"connection"in navigator))||navigator.onLine}function L(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}class M{constructor(t,n){this.shortDelay=t,this.longDelay=n,A(n>t,"Short delay should be less than long delay!"),this.isMobile=(0,e.isMobileCordova)()||(0,e.isReactNative)()}get(){return C()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function x(e,t){A(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class U{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void k("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void k("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void k("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}exports.aI=U;const F={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},V=new M(3e4,6e4);function q(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function j(t,n,i,r,s={}){return H(t,s,async()=>{let s={},o={};r&&("GET"===n?o=r:s={body:JSON.stringify(r)});const a=(0,e.querystring)(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),U.fetch()(G(t,t.config.apiHost,i,a),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},s))})}async function H(t,n,i){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},F),n);try{const n=new W(t),o=await Promise.race([i(),n.promise]);n.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw K(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const e=o.ok?a.errorMessage:a.error.message,[n,i]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw K(t,"credential-already-in-use",a);if("EMAIL_EXISTS"===n)throw K(t,"email-already-in-use",a);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw y(t,s,i);I(t,s)}}catch(s){if(s instanceof e.FirebaseError)throw s;I(t,"network-request-failed")}}async function z(e,t,n,i,r={}){const s=await j(e,t,n,i,r);return"mfaPendingCredential"in s&&I(e,"multi-factor-auth-required",{_serverResponse:s}),s}function G(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?x(e.config,r):`${e.config.apiScheme}://${r}`}class W{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(_(this.auth,"network-request-failed")),V.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function K(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=_(e,t,i);return r.customData._tokenResponse=n,r}async function J(e,t){return j(e,"POST","/v1/accounts:delete",t)}async function B(e,t){return j(e,"POST","/v1/accounts:update",t)}async function $(e,t){return j(e,"POST","/v1/accounts:lookup",t)}function Y(e){if(e)try{const n=new Date(Number(e));if(!isNaN(n.getTime()))return n.toUTCString()}catch(t){}}function X(t,n=!1){return(0,e.getModularInstance)(t).getIdToken(n)}async function Q(t,n=!1){const i=(0,e.getModularInstance)(t),r=await i.getIdToken(n),s=ee(r);E(s&&s.exp&&s.auth_time&&s.iat,i.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Y(Z(s.auth_time)),issuedAtTime:Y(Z(s.iat)),expirationTime:Y(Z(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}function Z(e){return 1e3*Number(e)}function ee(t){const[n,i,r]=t.split(".");if(void 0===n||void 0===i||void 0===r)return v("JWT malformed, contained fewer than 3 sections"),null;try{const t=(0,e.base64Decode)(i);return t?JSON.parse(t):(v("Failed to decode base64 JWT payload"),null)}catch(s){return v("Caught error parsing JWT payload as JSON",s),null}}function te(e){const t=ee(e);return E(t,"internal-error"),E(void 0!==t.exp,"internal-error"),E(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ne(t,n,i=!1){if(i)return n;try{return await n}catch(r){throw r instanceof e.FirebaseError&&ie(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ie({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class re{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class se{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Y(this.lastLoginAt),this.creationTime=Y(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function oe(e){var t;const n=e.auth,i=await e.getIdToken(),r=await ne(e,$(n,{idToken:i}));E(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ue(s.providerUserInfo):[],a=ce(e.providerData,o),c=e.isAnonymous,u=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!c&&u,l={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new se(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,l)}async function ae(t){const n=(0,e.getModularInstance)(t);await oe(n),await n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)}function ce(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function ue(e){return e.map(e=>{var{providerId:t}=e,i=(0,n.__rest)(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function de(t,n){const i=await H(t,{},async()=>{const i=(0,e.querystring)({grant_type:"refresh_token",refresh_token:n}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=G(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",U.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}class le{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){E(e.idToken,"internal-error"),E(void 0!==e.idToken,"internal-error"),E(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):te(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return E(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await de(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new le;return n&&(E("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(E("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(E("number"==typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new le,this.toJSON())}_performRefresh(){return k("not implemented")}}function he(e,t){E("string"==typeof e||void 0===e,"internal-error",{appName:t})}class pe{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=(0,n.__rest)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new re(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new se(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ne(this,this.stsTokenManager.getToken(this.auth,e));return E(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Q(this,e)}reload(){return ae(this)}_assign(e){this!==e&&(E(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new pe(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){E(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await oe(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ne(this,J(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,c,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,l=null!==(i=t.email)&&void 0!==i?i:void 0,h=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,f=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:I,emailVerified:_,isAnonymous:y,providerData:T,stsTokenManager:w}=t;E(I&&w,e,"internal-error");const k=le.fromJSON(this.name,w);E("string"==typeof I,e,"internal-error"),he(d,e.name),he(l,e.name),E("boolean"==typeof _,e,"internal-error"),E("boolean"==typeof y,e,"internal-error"),he(h,e.name),he(p,e.name),he(m,e.name),he(f,e.name),he(g,e.name),he(v,e.name);const A=new pe({uid:I,auth:e,email:l,emailVerified:_,displayName:d,isAnonymous:y,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:k,createdAt:g,lastLoginAt:v});return T&&Array.isArray(T)&&(A.providerData=T.map(e=>Object.assign({},e))),f&&(A._redirectEventId=f),A}static async _fromIdTokenResponse(e,t,n=!1){const i=new le;i.updateFromServerResponse(t);const r=new pe({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await oe(r),r}}exports.aD=pe;class me{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}me.type="NONE";const fe=me;function ge(e,t,n){return`firebase:${e}:${t}:${n}`}exports.K=fe;class ve{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=ge(this.userKey,i.apiKey,r),this.fullPersistenceKey=ge("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?pe._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ve(R(fe),e,n);const i=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let r=i[0]||R(fe);const s=ge(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const t=await u._get(s);if(t){const n=pe._fromJSON(e,t);u!==r&&(o=n),r=u;break}}catch(c){}const a=i.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(s)}catch(c){}})),new ve(r,e,n)):new ve(r,e,n)}}function Ie(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(we(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_e(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ke(t))return"Blackberry";if(Ae(t))return"Webos";if(ye(t))return"Safari";if((t.includes("chrome/")||Te(t))&&!t.includes("edge/"))return"Chrome";if(Ee(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function _e(t=(0,e.getUA)()){return/firefox\//i.test(t)}function ye(t=(0,e.getUA)()){const n=t.toLowerCase();return n.includes("safari/")&&!n.includes("chrome/")&&!n.includes("crios/")&&!n.includes("android")}function Te(t=(0,e.getUA)()){return/crios\//i.test(t)}function we(t=(0,e.getUA)()){return/iemobile/i.test(t)}function Ee(t=(0,e.getUA)()){return/android/i.test(t)}function ke(t=(0,e.getUA)()){return/blackberry/i.test(t)}function Ae(t=(0,e.getUA)()){return/webos/i.test(t)}function Ne(t=(0,e.getUA)()){return/iphone|ipad|ipod/i.test(t)}function Re(t=(0,e.getUA)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function be(t=(0,e.getUA)()){var n;return Ne(t)&&!!(null===(n=window.navigator)||void 0===n?void 0:n.standalone)}function Se(){return(0,e.isIE)()&&10===document.documentMode}function Oe(t=(0,e.getUA)()){return Ne(t)||Ee(t)||Ae(t)||ke(t)||/windows phone/i.test(t)||we(t)}function Pe(){try{return!(!window||window===window.top)}catch(e){return!1}}function De(n,i=[]){let r;switch(n){case"Browser":r=Ie((0,e.getUA)());break;case"Worker":r=`${Ie((0,e.getUA)())}-${n}`;break;default:r=n}const s=i.length?i.join(","):"FirebaseCore-web";return`${r}/JsCore/${t.SDK_VERSION}/${s}`}class Ce{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Me(this),this.idTokenSubscription=new Me(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=R(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await ve.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e)):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);i&&i!==r||null==s||!s.user||(n=s.user)}return n?n._redirectEventId?(E(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await oe(e)}catch(t){if("auth/network-request-failed"!==t.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?(0,e.getModularInstance)(t):null;return n&&E(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&E(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(R(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new e.ErrorFactory("auth","Firebase",t())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&R(e)||this._popupRedirectResolver;E(t,this,"argument-error"),this.redirectPersistenceManager=await ve.create(this,[R(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return E(s,this,"internal-error"),s.then(()=>r(this.currentUser)),"function"==typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return E(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=De(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());return n&&(t["X-Firebase-Client"]=n),t}}function Le(t){return(0,e.getModularInstance)(t)}exports.aE=Ce;class Me{constructor(t){this.auth=t,this.observer=null,this.addObserver=(0,e.createSubscribe)(e=>this.observer=e)}get next(){return E(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xe(e,t,n){const i=Le(e);E(i._canInitEmulator,i,"emulator-config-failed"),E(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=Ue(t),{host:o,port:a}=Fe(t),c=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||qe()}function Ue(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Fe(e){const t=Ue(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:Ve(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:Ve(t)}}}function Ve(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function qe(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}class je{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return k("not implemented")}_getIdTokenResponse(e){return k("not implemented")}_linkToIdToken(e,t){return k("not implemented")}_getReauthenticationResolver(e){return k("not implemented")}}async function He(e,t){return j(e,"POST","/v1/accounts:resetPassword",q(e,t))}async function ze(e,t){return j(e,"POST","/v1/accounts:update",t)}async function Ge(e,t){return j(e,"POST","/v1/accounts:update",q(e,t))}async function We(e,t){return z(e,"POST","/v1/accounts:signInWithPassword",q(e,t))}async function Ke(e,t){return j(e,"POST","/v1/accounts:sendOobCode",q(e,t))}async function Je(e,t){return Ke(e,t)}async function Be(e,t){return Ke(e,t)}async function $e(e,t){return Ke(e,t)}async function Ye(e,t){return Ke(e,t)}async function Xe(e,t){return z(e,"POST","/v1/accounts:signInWithEmailLink",q(e,t))}async function Qe(e,t){return z(e,"POST","/v1/accounts:signInWithEmailLink",q(e,t))}exports.G=je;class Ze extends je{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Ze(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ze(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return We(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Xe(e,{email:this._email,oobCode:this._password});default:I(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ze(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Qe(e,{idToken:t,email:this._email,oobCode:this._password});default:I(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function et(e,t){return z(e,"POST","/v1/accounts:signInWithIdp",q(e,t))}exports.H=Ze;const tt="http://localhost";class nt extends je{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new nt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):I("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=(0,n.__rest)(t,["providerId","signInMethod"]);if(!i||!r)return null;const o=new nt(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return et(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,et(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,et(e,t)}buildRequest(){const t={requestUri:tt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=(0,e.querystring)(n)}return t}}async function it(e,t){return j(e,"POST","/v1/accounts:sendVerificationCode",q(e,t))}async function rt(e,t){return z(e,"POST","/v1/accounts:signInWithPhoneNumber",q(e,t))}async function st(e,t){const n=await z(e,"POST","/v1/accounts:signInWithPhoneNumber",q(e,t));if(n.temporaryProof)throw K(e,"account-exists-with-different-credential",n);return n}exports.I=nt;const ot={USER_NOT_FOUND:"user-not-found"};async function at(e,t){return z(e,"POST","/v1/accounts:signInWithPhoneNumber",q(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ot)}class ct extends je{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ct({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ct({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return rt(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return st(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return at(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new ct({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}function ut(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dt(t){const n=(0,e.querystringDecode)((0,e.extractQuerystring)(t)).link,i=n?(0,e.querystringDecode)((0,e.extractQuerystring)(n)).deep_link_id:null,r=(0,e.querystringDecode)((0,e.extractQuerystring)(t)).deep_link_id;return(r?(0,e.querystringDecode)((0,e.extractQuerystring)(r)).link:null)||r||i||n||t}exports.J=ct;class lt{constructor(t){var n,i,r,s,o,a;const c=(0,e.querystringDecode)((0,e.extractQuerystring)(t)),u=null!==(n=c.apiKey)&&void 0!==n?n:null,d=null!==(i=c.oobCode)&&void 0!==i?i:null,l=ut(null!==(r=c.mode)&&void 0!==r?r:null);E(u&&d&&l,"argument-error"),this.apiKey=u,this.operation=l,this.code=d,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=dt(e);try{return new lt(t)}catch(n){return null}}}function ht(e){return lt.parseLink(e)}exports.ac=lt;class pt{constructor(){this.providerId=pt.PROVIDER_ID}static credential(e,t){return Ze._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=lt.parseLink(t);return E(n,"argument-error"),Ze._fromEmailAndCode(e,n.code,n.tenantId)}}exports.L=pt,pt.PROVIDER_ID="password",pt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",pt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class mt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ft extends mt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class gt extends ft{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return E("providerId"in t&&"signInMethod"in t,"argument-error"),nt._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return E(e.idToken||e.accessToken,"argument-error"),nt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return gt.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return gt.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:s,providerId:o}=e;if(!(n||i||t||r))return null;if(!o)return null;try{return new gt(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:r})}catch(a){return null}}}exports.T=gt;class vt extends ft{constructor(){super("facebook.com")}static credential(e){return nt._fromParams({providerId:vt.PROVIDER_ID,signInMethod:vt.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vt.credentialFromTaggedObject(e)}static credentialFromError(e){return vt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!(e&&"oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return vt.credential(e.oauthAccessToken)}catch(t){return null}}}exports.M=vt,vt.FACEBOOK_SIGN_IN_METHOD="facebook.com",vt.PROVIDER_ID="facebook.com";class It extends ft{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return nt._fromParams({providerId:It.PROVIDER_ID,signInMethod:It.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return It.credentialFromTaggedObject(e)}static credentialFromError(e){return It.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return It.credential(t,n)}catch(i){return null}}}exports.N=It,It.GOOGLE_SIGN_IN_METHOD="google.com",It.PROVIDER_ID="google.com";class _t extends ft{constructor(){super("github.com")}static credential(e){return nt._fromParams({providerId:_t.PROVIDER_ID,signInMethod:_t.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _t.credentialFromTaggedObject(e)}static credentialFromError(e){return _t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!(e&&"oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return _t.credential(e.oauthAccessToken)}catch(t){return null}}}exports.Q=_t,_t.GITHUB_SIGN_IN_METHOD="github.com",_t.PROVIDER_ID="github.com";const yt="http://localhost";class Tt extends je{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return et(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,et(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,et(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i,pendingToken:r}=t;return n&&i&&r&&n===i?new Tt(n,r):null}static _create(e,t){return new Tt(e,t)}buildRequest(){return{requestUri:yt,returnSecureToken:!0,pendingToken:this.pendingToken}}}exports.aJ=Tt;const wt="saml.";class Et extends mt{constructor(e){E(e.startsWith(wt),"argument-error"),super(e)}static credentialFromResult(e){return Et.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Et.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Tt.fromJSON(e);return E(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Tt._create(n,t)}catch(i){return null}}}exports.U=Et;class kt extends ft{constructor(){super("twitter.com")}static credential(e,t){return nt._fromParams({providerId:kt.PROVIDER_ID,signInMethod:kt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return kt.credentialFromTaggedObject(e)}static credentialFromError(e){return kt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return kt.credential(t,n)}catch(i){return null}}}async function At(e,t){return z(e,"POST","/v1/accounts:signUp",q(e,t))}exports.V=kt,kt.TWITTER_SIGN_IN_METHOD="twitter.com",kt.PROVIDER_ID="twitter.com";class Nt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const r=await pe._fromIdTokenResponse(e,n,i),s=Rt(n);return new Nt({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Rt(n);return new Nt({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Rt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function bt(e){var t;const n=Le(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Nt({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await At(n,{returnSecureToken:!0}),r=await Nt._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}class St extends e.FirebaseError{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,St.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new St(e,t,n,i)}}function Ot(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw St._fromErrorAndOperation(e,n,t,i);throw n})}function Pt(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}async function Dt(t,n){const i=(0,e.getModularInstance)(t);await Lt(!0,i,n);const{providerUserInfo:r}=await B(i.auth,{idToken:await i.getIdToken(),deleteProvider:[n]}),s=Pt(r||[]);return i.providerData=i.providerData.filter(e=>s.has(e.providerId)),s.has("phone")||(i.phoneNumber=null),await i.auth._persistUserIfCurrent(i),i}async function Ct(e,t,n=!1){const i=await ne(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Nt._forOperation(e,"link",i)}async function Lt(e,t,n){await oe(t);const i=!1===e?"provider-already-linked":"no-such-provider";E(Pt(t.providerData).has(n)===e,t.auth,i)}async function Mt(e,t,n=!1){const{auth:i}=e;try{const s=await ne(e,Ot(i,"reauthenticate",t,e),n);E(s.idToken,i,"internal-error");const o=ee(s.idToken);E(o,i,"internal-error");const{sub:a}=o;return E(e.uid===a,i,"user-mismatch"),Nt._forOperation(e,"reauthenticate",s)}catch(r){throw"auth/user-not-found"===(null==r?void 0:r.code)&&I(i,"user-mismatch"),r}}async function xt(e,t,n=!1){const i=await Ot(e,"signIn",t),r=await Nt._fromIdTokenResponse(e,"signIn",i);return n||await e._updateCurrentUser(r.user),r}async function Ut(e,t){return xt(Le(e),t)}async function Ft(t,n){const i=(0,e.getModularInstance)(t);return await Lt(!1,i,n.providerId),Ct(i,n)}async function Vt(t,n){return Mt((0,e.getModularInstance)(t),n)}async function qt(e,t){return z(e,"POST","/v1/accounts:signInWithCustomToken",q(e,t))}async function jt(e,t){const n=Le(e),i=await qt(n,{token:t,returnSecureToken:!0}),r=await Nt._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}class Ht{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?zt._fromServerResponse(e,t):I(e,"internal-error")}}class zt extends Ht{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new zt(t)}}function Gt(e,t,n){var i;E((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),E(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(E(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(E(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Wt(t,n,i){const r=(0,e.getModularInstance)(t),s={requestType:"PASSWORD_RESET",email:n};i&&Gt(r,s,i),await Be(r,s)}async function Kt(t,n,i){await He((0,e.getModularInstance)(t),{oobCode:n,newPassword:i})}async function Jt(t,n){await Ge((0,e.getModularInstance)(t),{oobCode:n})}async function Bt(t,n){const i=(0,e.getModularInstance)(t),r=await He(i,{oobCode:n}),s=r.requestType;switch(E(s,i,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":E(r.newEmail,i,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":E(r.mfaInfo,i,"internal-error");default:E(r.email,i,"internal-error")}let o=null;return r.mfaInfo&&(o=Ht._fromServerResponse(Le(i),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function $t(t,n){const{data:i}=await Bt((0,e.getModularInstance)(t),n);return i.email}async function Yt(e,t,n){const i=Le(e),r=await At(i,{returnSecureToken:!0,email:t,password:n}),s=await Nt._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(s.user),s}function Xt(t,n,i){return Ut((0,e.getModularInstance)(t),pt.credential(n,i))}async function Qt(t,n,i){const r=(0,e.getModularInstance)(t),s={requestType:"EMAIL_SIGNIN",email:n};E(i.handleCodeInApp,r,"argument-error"),i&&Gt(r,s,i),await $e(r,s)}function Zt(e,t){const n=lt.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}async function en(t,n,i){const r=(0,e.getModularInstance)(t),s=pt.credentialWithLink(n,i||O());return E(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Ut(r,s)}async function tn(e,t){return j(e,"POST","/v1/accounts:createAuthUri",q(e,t))}async function nn(t,n){const i={identifier:n,continueUri:P()?O():"http://localhost"},{signinMethods:r}=await tn((0,e.getModularInstance)(t),i);return r||[]}async function rn(t,n){const i=(0,e.getModularInstance)(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};n&&Gt(i.auth,r,n);const{email:s}=await Je(i.auth,r);s!==t.email&&await t.reload()}async function sn(t,n,i){const r=(0,e.getModularInstance)(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:n};i&&Gt(r.auth,s,i);const{email:o}=await Ye(r.auth,s);o!==t.email&&await t.reload()}async function on(e,t){return j(e,"POST","/v1/accounts:update",t)}async function an(t,{displayName:n,photoURL:i}){if(void 0===n&&void 0===i)return;const r=(0,e.getModularInstance)(t),s={idToken:await r.getIdToken(),displayName:n,photoUrl:i,returnSecureToken:!0},o=await ne(r,on(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function cn(t,n){return dn((0,e.getModularInstance)(t),n,null)}function un(t,n){return dn((0,e.getModularInstance)(t),null,n)}async function dn(e,t,n){const{auth:i}=e,r={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(r.email=t),n&&(r.password=n);const s=await ne(e,ze(i,r));await e._updateTokensIfNecessary(s,!0)}function ln(e){var t,n;if(!e)return null;const{providerId:i}=e,r=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!i&&(null==e?void 0:e.idToken)){const i=null===(n=null===(t=ee(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(i){return new hn(s,"anonymous"!==i&&"custom"!==i?i:null)}}if(!i)return null;switch(i){case"facebook.com":return new mn(s,r);case"github.com":return new fn(s,r);case"google.com":return new gn(s,r);case"twitter.com":return new vn(s,r,e.screenName||null);case"custom":case"anonymous":return new hn(s,null);default:return new hn(s,i,r)}}class hn{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class pn extends hn{constructor(e,t,n,i){super(e,t,n),this.username=i}}class mn extends hn{constructor(e,t){super(e,"facebook.com",t)}}class fn extends pn{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class gn extends hn{constructor(e,t){super(e,"google.com",t)}}class vn extends pn{constructor(e,t,n){super(e,"twitter.com",t,n)}}function In(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:ln(n)}function _n(t,n){return(0,e.getModularInstance)(t).setPersistence(n)}function yn(t,n,i,r){return(0,e.getModularInstance)(t).onIdTokenChanged(n,i,r)}function Tn(t,n,i,r){return(0,e.getModularInstance)(t).onAuthStateChanged(n,i,r)}function wn(t){(0,e.getModularInstance)(t).useDeviceLanguage()}function En(t,n){return(0,e.getModularInstance)(t).updateCurrentUser(n)}function kn(t){return(0,e.getModularInstance)(t).signOut()}async function An(t){return(0,e.getModularInstance)(t).delete()}class Nn{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new Nn("enroll",e)}static _fromMfaPendingCredential(e){return new Nn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Nn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Nn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Rn{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Le(e),i=t.customData._serverResponse,r=(i.mfaInfo||[]).map(e=>Ht._fromServerResponse(n,e));E(i.mfaPendingCredential,n,"internal-error");const s=Nn._fromMfaPendingCredential(i.mfaPendingCredential);return new Rn(s,r,async e=>{const r=await e._process(n,s);delete i.mfaInfo,delete i.mfaPendingCredential;const o=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=await Nt._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return E(t.user,n,"internal-error"),Nt._forOperation(t.user,t.operationType,o);default:I(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function bn(t,n){var i;const r=(0,e.getModularInstance)(t),s=n;return E(n.customData.operationType,r,"argument-error"),E(null===(i=s.customData._serverResponse)||void 0===i?void 0:i.mfaPendingCredential,r,"argument-error"),Rn._fromError(r,s)}function Sn(e,t){return j(e,"POST","/v2/accounts/mfaEnrollment:start",q(e,t))}function On(e,t){return j(e,"POST","/v2/accounts/mfaEnrollment:finalize",q(e,t))}function Pn(e,t){return j(e,"POST","/v2/accounts/mfaEnrollment:withdraw",q(e,t))}class Dn{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Ht._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Dn(e)}async getSession(){return Nn._fromIdtoken(await this.user.getIdToken())}async enroll(e,t){const n=e,i=await this.getSession(),r=await ne(this.user,n._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken(),i=await ne(this.user,Pn(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(i);try{await this.user.reload()}catch(r){if("auth/user-token-expired"!==r.code)throw r}}}const Cn=new WeakMap;function Ln(t){const n=(0,e.getModularInstance)(t);return Cn.has(n)||Cn.set(n,Dn._fromUser(n)),Cn.get(n)}const Mn="__sak";class xn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mn,"1"),this.storage.removeItem(Mn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}function Un(){const t=(0,e.getUA)();return ye(t)||Ne(t)}const Fn=1e3,Vn=10;class qn extends xn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=((e,t)=>this.onStorageEvent(e,t)),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Un()&&Pe(),this.fallbackToPolling=Oe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);Se()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Vn):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},Fn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}qn.type="LOCAL";const jn=qn;exports.b=jn;class Hn extends xn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Hn.type="SESSION";const zn=Hn;function Gn(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}exports.a=zn;class Wn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Wn(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async e=>e(t.origin,r)),a=await Gn(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Kn(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}Wn.receivers=[];class Jn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise((o,a)=>{const c=Kn("",20);i.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(u),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Bn(){return window}function $n(e){Bn().location.href=e}function Yn(){return void 0!==Bn().WorkerGlobalScope&&"function"==typeof Bn().importScripts}async function Xn(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}function Qn(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}function Zn(){return Yn()?self:null}const ei="firebaseLocalStorageDb",ti=1,ni="firebaseLocalStorage",ii="fbase_key";class ri{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function si(e,t){return e.transaction([ni],t?"readwrite":"readonly").objectStore(ni)}function oi(){const e=indexedDB.deleteDatabase(ei);return new ri(e).toPromise()}function ai(){const e=indexedDB.open(ei,ti);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(ni,{keyPath:ii})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(ni)?t(n):(n.close(),await oi(),t(await ai()))})})}async function ci(e,t,n){const i=si(e,!0).put({[ii]:t,value:n});return new ri(i).toPromise()}async function ui(e,t){const n=si(e,!1).get(t),i=await new ri(n).toPromise();return void 0===i?null:i.value}function di(e,t){const n=si(e,!0).delete(t);return new ri(n).toPromise()}const li=800,hi=3;class pi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ai(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(n){if(t++>hi)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wn._getInstance(Zn()),this.receiver._subscribe("keyChanged",async(e,t)=>{return{keyProcessed:(await this._poll()).includes(t.key)}}),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Xn(),!this.activeServiceWorker)return;this.sender=new Jn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&Qn()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ai();return await ci(t,Mn,"1"),await di(t,Mn),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ci(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>ui(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>di(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=si(e,!1).getAll();return new ri(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),li)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}pi.type="LOCAL";const mi=pi;function fi(e,t){return j(e,"POST","/v2/accounts/mfaSignIn:start",q(e,t))}function gi(e,t){return j(e,"POST","/v2/accounts/mfaSignIn:finalize",q(e,t))}async function vi(e){return(await j(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}function Ii(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}function _i(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=(e=>{const t=_("internal-error");t.customData=e,n(t)}),i.type="text/javascript",i.charset="UTF-8",Ii().appendChild(i)})}function yi(e){return`__${e}${Math.floor(1e6*Math.random())}`}exports.i=mi;const Ti=500,wi=6e4,Ei=1e12;class ki{constructor(e){this.auth=e,this.counter=Ei,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Ai(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Ei;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Ei;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Ei;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Ai{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=(()=>{this.execute()});const i="string"==typeof e?document.getElementById(e):e;E(i,"argument-error",{appName:t}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=Ni(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},wi)},Ti))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Ni(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<e;i++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}const Ri=yi("rcb"),bi=new M(3e4,6e4),Si="https://www.google.com/recaptcha/api.js?";class Oi{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Bn().grecaptcha}load(t,n=""){return E(Pi(n),t,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Bn().grecaptcha):new Promise((i,r)=>{const s=Bn().setTimeout(()=>{r(_(t,"network-request-failed"))},bi.get());Bn()[Ri]=(()=>{Bn().clearTimeout(s),delete Bn()[Ri];const e=Bn().grecaptcha;if(!e)return void r(_(t,"internal-error"));const o=e.render;e.render=((e,t)=>{const n=o(e,t);return this.counter++,n}),this.hostLanguage=n,i(e)}),_i(`${Si}?${(0,e.querystring)({onload:Ri,render:"explicit",hl:n})}`).catch(()=>{clearTimeout(s),r(_(t,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Bn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Pi(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}class Di{async load(e){return new ki(e)}clearedOneInstance(){}}const Ci="recaptcha",Li={theme:"light",type:"image"};class Mi{constructor(e,t=Object.assign({},Li),n){this.parameters=t,this.type=Ci,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Le(n),this.isInvisible="invisible"===this.parameters.size,E("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"==typeof e?document.getElementById(e):e;E(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Di:new Oi,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const i=e=>{e&&(this.tokenChangeListeners.delete(i),n(e))};this.tokenChangeListeners.add(i),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){E(!this.parameters.sitekey,this.auth,"argument-error"),E(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),E("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=Bn()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){E(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){E(P()&&!Yn(),this.auth,"internal-error"),await xi(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await vi(this.auth);E(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return E(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function xi(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=(()=>t()),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}exports.R=Mi;class Ui{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ct._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Fi(t,n,i){const r=Le(t),s=await ji(r,n,(0,e.getModularInstance)(i));return new Ui(s,e=>Ut(r,e))}async function Vi(t,n,i){const r=(0,e.getModularInstance)(t);await Lt(!1,r,"phone");const s=await ji(r.auth,n,(0,e.getModularInstance)(i));return new Ui(s,e=>Ft(r,e))}async function qi(t,n,i){const r=(0,e.getModularInstance)(t),s=await ji(r.auth,n,(0,e.getModularInstance)(i));return new Ui(s,e=>Vt(r,e))}async function ji(e,t,n){var i;const r=await n.verify();try{let s;if(E("string"==typeof r,e,"argument-error"),E(n.type===Ci,e,"argument-error"),"session"in(s="string"==typeof t?{phoneNumber:t}:t)){const t=s.session;if("phoneNumber"in s){return E("enroll"===t.type,e,"internal-error"),(await Sn(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo}{E("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;return E(n,e,"missing-multi-factor-info"),(await fi(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await it(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}async function Hi(t,n){await Ct((0,e.getModularInstance)(t),n)}class zi{constructor(e){this.providerId=zi.PROVIDER_ID,this.auth=Le(e)}verifyPhoneNumber(t,n){return ji(this.auth,t,(0,e.getModularInstance)(n))}static credential(e,t){return ct._fromVerification(e,t)}static credentialFromResult(e){const t=e;return zi.credentialFromTaggedObject(t)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?ct._fromTokenResponse(t,n):null}}function Gi(e,t){return t?R(t):(E(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}exports.P=zi,zi.PROVIDER_ID="phone",zi.PHONE_SIGN_IN_METHOD="phone";class Wi extends je{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return et(e,this._buildIdpRequest())}_linkToIdToken(e,t){return et(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return et(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ki(e){return xt(e.auth,new Wi(e),e.bypassAuthState)}function Ji(e){const{auth:t,user:n}=e;return E(n,t,"internal-error"),Mt(n,new Wi(e),e.bypassAuthState)}async function Bi(e){const{auth:t,user:n}=e;return E(n,t,"internal-error"),Ct(n,new Wi(e),e.bypassAuthState)}class $i{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ki;case"linkViaPopup":case"linkViaRedirect":return Bi;case"reauthViaPopup":case"reauthViaRedirect":return Ji;default:I(this.auth,"internal-error")}}resolve(e){A(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){A(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Yi=new M(2e3,1e4);async function Xi(e,t,n){const i=Le(e);T(e,t,mt);const r=Gi(i,n);return new er(i,"signInViaPopup",t,r).executeNotNull()}async function Qi(t,n,i){const r=(0,e.getModularInstance)(t);T(r.auth,n,mt);const s=Gi(r.auth,i);return new er(r.auth,"reauthViaPopup",n,s,r).executeNotNull()}async function Zi(t,n,i){const r=(0,e.getModularInstance)(t);T(r.auth,n,mt);const s=Gi(r.auth,i);return new er(r.auth,"linkViaPopup",n,s,r).executeNotNull()}class er extends $i{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,er.currentPopupAction&&er.currentPopupAction.cancel(),er.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return E(e,this.auth,"internal-error"),e}async onExecution(){A(1===this.filter.length,"Popup operations only handle one event");const e=Kn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(_(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(_(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,er.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;null!==(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)&&void 0!==n&&n.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_(this.auth,"popup-closed-by-user"))},2e3):this.pollId=window.setTimeout(e,Yi.get())};e()}}er.currentPopupAction=null;const tr="pendingRedirect",nr=new Map;class ir extends $i{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=nr.get(this.auth._key());if(!e){try{const n=await rr(this.resolver,this.auth)?await super.execute():null;e=(()=>Promise.resolve(n))}catch(t){e=(()=>Promise.reject(t))}nr.set(this.auth._key(),e)}return this.bypassAuthState||nr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function rr(e,t){const n=cr(t),i=ar(e);if(!(await i._isAvailable()))return!1;const r="true"===await i._get(n);return await i._remove(n),r}async function sr(e,t){return ar(e)._set(cr(t),"true")}function or(){nr.clear()}function ar(e){return R(e._redirectPersistence)}function cr(e){return ge(tr,e.config.apiKey,e.name)}function ur(e,t,n){return dr(e,t,n)}async function dr(e,t,n){const i=Le(e);T(e,t,mt);const r=Gi(i,n);return await sr(r,i),r._openRedirect(i,t,"signInViaRedirect")}function lr(e,t,n){return hr(e,t,n)}async function hr(t,n,i){const r=(0,e.getModularInstance)(t);T(r.auth,n,mt);const s=Gi(r.auth,i);await sr(s,r.auth);const o=await vr(r);return s._openRedirect(r.auth,n,"reauthViaRedirect",o)}function pr(e,t,n){return mr(e,t,n)}async function mr(t,n,i){const r=(0,e.getModularInstance)(t);T(r.auth,n,mt);const s=Gi(r.auth,i);await Lt(!1,r,n.providerId),await sr(s,r.auth);const o=await vr(r);return s._openRedirect(r.auth,n,"linkViaRedirect",o)}async function fr(e,t){return await Le(e)._initializationPromise,gr(e,t,!1)}async function gr(e,t,n=!1){const i=Le(e),r=Gi(i,t),s=new ir(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}async function vr(e){const t=Kn(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}const Ir=6e5;class _r{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wr(e)?t:(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0),t)}sendToConsumer(e,t){var n;if(e.error&&!Tr(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(_(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ir&&this.cachedEventUids.clear(),this.cachedEventUids.has(yr(e))}saveEventToCache(e){this.cachedEventUids.add(yr(e)),this.lastProcessedEventTime=Date.now()}}function yr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Tr({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function wr(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tr(e);default:return!1}}async function Er(e,t={}){return j(e,"GET","/v1/projects",t)}exports.az=_r;const kr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ar=/^https?/;async function Nr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Er(e);for(const i of t)try{if(Rr(i))return}catch(n){}I(e,"unauthorized-domain")}function Rr(e){const t=O(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Ar.test(n))return!1;if(kr.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const br=new M(3e4,6e4);function Sr(){const e=Bn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Or(e){return new Promise((t,n)=>{var i,r,s;function o(){Sr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Sr(),n(_(e,"network-request-failed"))},timeout:br.get()})}if(null===(r=null===(i=Bn().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(null===(s=Bn().gapi)||void 0===s||!s.load){const t=yi("iframefcb");return Bn()[t]=(()=>{gapi.load?o():n(_(e,"network-request-failed"))}),_i(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw Pr=null,e})}let Pr=null;function Dr(e){return Pr=Pr||Or(e)}const Cr=new M(5e3,15e3),Lr="__/auth/iframe",Mr="emulator/auth/iframe",xr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ur=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fr(n){const i=n.config;E(i.authDomain,n,"auth-domain-config-required");const r=i.emulator?x(i,Mr):`https://${n.config.authDomain}/${Lr}`,s={apiKey:i.apiKey,appName:n.name,v:t.SDK_VERSION},o=Ur.get(n.config.apiHost);o&&(s.eid=o);const a=n._getFrameworks();return a.length&&(s.fw=a.join(",")),`${r}?${(0,e.querystring)(s).slice(1)}`}async function Vr(e){const t=await Dr(e),n=Bn().gapi;return E(n,e,"internal-error"),t.open({where:document.body,url:Fr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xr,dontclear:!0},t=>new Promise(async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=_(e,"network-request-failed"),s=Bn().setTimeout(()=>{i(r)},Cr.get());function o(){Bn().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{i(r)})}))}const qr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jr=500,Hr=600,zr="_blank",Gr="http://localhost";class Wr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Kr(t,n,i,r=jr,s=Hr){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},qr),{width:r.toString(),height:s.toString(),top:o,left:a}),d=(0,e.getUA)().toLowerCase();i&&(c=Te(d)?zr:i),_e(d)&&(n=n||Gr,u.scrollbars="yes");const l=Object.entries(u).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(be(d)&&"_self"!==c)return Jr(n||"",c),new Wr(null);const h=window.open(n||"",c,l);E(h,t,"popup-blocked");try{h.focus()}catch(p){}return new Wr(h)}function Jr(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}exports.aH=Wr;const Br="__/auth/handler",$r="emulator/auth/handler";function Yr(n,i,r,s,o,a){E(n.config.authDomain,n,"auth-domain-config-required"),E(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:r,redirectUrl:s,v:t.SDK_VERSION,eventId:o};if(i instanceof mt){i.setDefaultLanguage(n.languageCode),c.providerId=i.providerId||"",(0,e.isEmpty)(i.getCustomParameters())||(c.customParameters=JSON.stringify(i.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(i instanceof ft){const e=i.getScopes().filter(e=>""!==e);e.length>0&&(c.scopes=e.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const e of Object.keys(u))void 0===u[e]&&delete u[e];return`${Xr(n)}?${(0,e.querystring)(u).slice(1)}`}function Xr({config:e}){return e.emulator?x(e,$r):`https://${e.authDomain}/${Br}`}const Qr="webStorageSupport";class Zr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zn,this._completeRedirectFn=gr}async _openPopup(e,t,n,i){var r;return A(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),Kr(e,Yr(e,t,n,O(),i),Kn())}async _openRedirect(e,t,n,i){return await this._originValidation(e),$n(Yr(e,t,n,O(),i)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(A(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Vr(e),n=new _r(e);return t.register("authEvent",t=>{return E(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qr,{type:Qr},n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[Qr];void 0!==r&&t(!!r),I(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Nr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Oe()||ye()||Ne()}}const es=Zr;exports.k=es;class ts{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return k("unexpected MultiFactorSessionType")}}}class ns extends ts{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ns(e)}_finalizeEnroll(e,t,n){return On(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return gi(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class is{constructor(){}static assertion(e){return ns._fromCredential(e)}}exports.m=is,is.FACTOR_ID="phone";var rs="@firebase/auth",ss="0.19.11";class os{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){E(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function as(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function cs(e){(0,t._registerComponent)(new r.Component("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),{apiKey:s,authDomain:o}=i.options;return((t,i)=>{E(s&&!s.includes(":"),"invalid-api-key",{appName:t.name}),E(!(null==o?void 0:o.includes(":")),"argument-error",{appName:t.name});const r={apiKey:s,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:De(e)},a=new Ce(t,i,r);return S(a,n),a})(i,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,t._registerComponent)(new r.Component("auth-internal",e=>{return(e=>new os(e))(Le(e.getProvider("auth").getImmediate()))},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,t.registerVersion)(rs,ss,as(e)),(0,t.registerVersion)(rs,ss,"esm2017")}function us(e=(0,t.getApp)()){const n=(0,t._getProvider)(e,"auth");return n.isInitialized()?n.getImmediate():b(e,{popupRedirectResolver:es,persistence:[mi,jn,zn]})}cs("Browser");
},{"@firebase/util":"chA2","@firebase/app":"h2Mb","tslib":"vCxL","@firebase/logger":"JJem","@firebase/component":"vhY9"}],"QWyA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ActionCodeOperation",{enumerable:!0,get:function(){return e.A}}),Object.defineProperty(exports,"ActionCodeURL",{enumerable:!0,get:function(){return e.ac}}),Object.defineProperty(exports,"AuthCredential",{enumerable:!0,get:function(){return e.G}}),Object.defineProperty(exports,"AuthErrorCodes",{enumerable:!0,get:function(){return e.C}}),Object.defineProperty(exports,"EmailAuthCredential",{enumerable:!0,get:function(){return e.H}}),Object.defineProperty(exports,"EmailAuthProvider",{enumerable:!0,get:function(){return e.L}}),Object.defineProperty(exports,"FacebookAuthProvider",{enumerable:!0,get:function(){return e.M}}),Object.defineProperty(exports,"FactorId",{enumerable:!0,get:function(){return e.F}}),Object.defineProperty(exports,"GithubAuthProvider",{enumerable:!0,get:function(){return e.Q}}),Object.defineProperty(exports,"GoogleAuthProvider",{enumerable:!0,get:function(){return e.N}}),Object.defineProperty(exports,"OAuthCredential",{enumerable:!0,get:function(){return e.I}}),Object.defineProperty(exports,"OAuthProvider",{enumerable:!0,get:function(){return e.T}}),Object.defineProperty(exports,"OperationType",{enumerable:!0,get:function(){return e.O}}),Object.defineProperty(exports,"PhoneAuthCredential",{enumerable:!0,get:function(){return e.J}}),Object.defineProperty(exports,"PhoneAuthProvider",{enumerable:!0,get:function(){return e.P}}),Object.defineProperty(exports,"PhoneMultiFactorGenerator",{enumerable:!0,get:function(){return e.m}}),Object.defineProperty(exports,"ProviderId",{enumerable:!0,get:function(){return e.o}}),Object.defineProperty(exports,"RecaptchaVerifier",{enumerable:!0,get:function(){return e.R}}),Object.defineProperty(exports,"SAMLAuthProvider",{enumerable:!0,get:function(){return e.U}}),Object.defineProperty(exports,"SignInMethod",{enumerable:!0,get:function(){return e.S}}),Object.defineProperty(exports,"TwitterAuthProvider",{enumerable:!0,get:function(){return e.V}}),Object.defineProperty(exports,"applyActionCode",{enumerable:!0,get:function(){return e.a1}}),Object.defineProperty(exports,"browserLocalPersistence",{enumerable:!0,get:function(){return e.b}}),Object.defineProperty(exports,"browserPopupRedirectResolver",{enumerable:!0,get:function(){return e.k}}),Object.defineProperty(exports,"browserSessionPersistence",{enumerable:!0,get:function(){return e.a}}),Object.defineProperty(exports,"checkActionCode",{enumerable:!0,get:function(){return e.a2}}),Object.defineProperty(exports,"confirmPasswordReset",{enumerable:!0,get:function(){return e.a0}}),Object.defineProperty(exports,"connectAuthEmulator",{enumerable:!0,get:function(){return e.E}}),Object.defineProperty(exports,"createUserWithEmailAndPassword",{enumerable:!0,get:function(){return e.a4}}),Object.defineProperty(exports,"debugErrorMap",{enumerable:!0,get:function(){return e.z}}),Object.defineProperty(exports,"deleteUser",{enumerable:!0,get:function(){return e.y}}),Object.defineProperty(exports,"fetchSignInMethodsForEmail",{enumerable:!0,get:function(){return e.a9}}),Object.defineProperty(exports,"getAdditionalUserInfo",{enumerable:!0,get:function(){return e.ak}}),Object.defineProperty(exports,"getAuth",{enumerable:!0,get:function(){return e.n}}),Object.defineProperty(exports,"getIdToken",{enumerable:!0,get:function(){return e.ah}}),Object.defineProperty(exports,"getIdTokenResult",{enumerable:!0,get:function(){return e.ai}}),Object.defineProperty(exports,"getMultiFactorResolver",{enumerable:!0,get:function(){return e.am}}),Object.defineProperty(exports,"getRedirectResult",{enumerable:!0,get:function(){return e.j}}),Object.defineProperty(exports,"inMemoryPersistence",{enumerable:!0,get:function(){return e.K}}),Object.defineProperty(exports,"indexedDBLocalPersistence",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(exports,"initializeAuth",{enumerable:!0,get:function(){return e.D}}),Object.defineProperty(exports,"isSignInWithEmailLink",{enumerable:!0,get:function(){return e.a7}}),Object.defineProperty(exports,"linkWithCredential",{enumerable:!0,get:function(){return e.Y}}),Object.defineProperty(exports,"linkWithPhoneNumber",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(exports,"linkWithPopup",{enumerable:!0,get:function(){return e.d}}),Object.defineProperty(exports,"linkWithRedirect",{enumerable:!0,get:function(){return e.g}}),Object.defineProperty(exports,"multiFactor",{enumerable:!0,get:function(){return e.an}}),Object.defineProperty(exports,"onAuthStateChanged",{enumerable:!0,get:function(){return e.t}}),Object.defineProperty(exports,"onIdTokenChanged",{enumerable:!0,get:function(){return e.q}}),Object.defineProperty(exports,"parseActionCodeURL",{enumerable:!0,get:function(){return e.ad}}),Object.defineProperty(exports,"prodErrorMap",{enumerable:!0,get:function(){return e.B}}),Object.defineProperty(exports,"reauthenticateWithCredential",{enumerable:!0,get:function(){return e.Z}}),Object.defineProperty(exports,"reauthenticateWithPhoneNumber",{enumerable:!0,get:function(){return e.r}}),Object.defineProperty(exports,"reauthenticateWithPopup",{enumerable:!0,get:function(){return e.e}}),Object.defineProperty(exports,"reauthenticateWithRedirect",{enumerable:!0,get:function(){return e.h}}),Object.defineProperty(exports,"reload",{enumerable:!0,get:function(){return e.al}}),Object.defineProperty(exports,"sendEmailVerification",{enumerable:!0,get:function(){return e.aa}}),Object.defineProperty(exports,"sendPasswordResetEmail",{enumerable:!0,get:function(){return e.$}}),Object.defineProperty(exports,"sendSignInLinkToEmail",{enumerable:!0,get:function(){return e.a6}}),Object.defineProperty(exports,"setPersistence",{enumerable:!0,get:function(){return e.p}}),Object.defineProperty(exports,"signInAnonymously",{enumerable:!0,get:function(){return e.W}}),Object.defineProperty(exports,"signInWithCredential",{enumerable:!0,get:function(){return e.X}}),Object.defineProperty(exports,"signInWithCustomToken",{enumerable:!0,get:function(){return e._}}),Object.defineProperty(exports,"signInWithEmailAndPassword",{enumerable:!0,get:function(){return e.a5}}),Object.defineProperty(exports,"signInWithEmailLink",{enumerable:!0,get:function(){return e.a8}}),Object.defineProperty(exports,"signInWithPhoneNumber",{enumerable:!0,get:function(){return e.s}}),Object.defineProperty(exports,"signInWithPopup",{enumerable:!0,get:function(){return e.c}}),Object.defineProperty(exports,"signInWithRedirect",{enumerable:!0,get:function(){return e.f}}),Object.defineProperty(exports,"signOut",{enumerable:!0,get:function(){return e.x}}),Object.defineProperty(exports,"unlink",{enumerable:!0,get:function(){return e.aj}}),Object.defineProperty(exports,"updateCurrentUser",{enumerable:!0,get:function(){return e.w}}),Object.defineProperty(exports,"updateEmail",{enumerable:!0,get:function(){return e.af}}),Object.defineProperty(exports,"updatePassword",{enumerable:!0,get:function(){return e.ag}}),Object.defineProperty(exports,"updatePhoneNumber",{enumerable:!0,get:function(){return e.u}}),Object.defineProperty(exports,"updateProfile",{enumerable:!0,get:function(){return e.ae}}),Object.defineProperty(exports,"useDeviceLanguage",{enumerable:!0,get:function(){return e.v}}),Object.defineProperty(exports,"verifyBeforeUpdateEmail",{enumerable:!0,get:function(){return e.ab}}),Object.defineProperty(exports,"verifyPasswordResetCode",{enumerable:!0,get:function(){return e.a3}});var e=require("./index-6de4cbb9.js");require("@firebase/util"),require("@firebase/app"),require("tslib"),require("@firebase/logger"),require("@firebase/component");
},{"./index-6de4cbb9.js":"bdjI","@firebase/util":"chA2","@firebase/app":"h2Mb","tslib":"vCxL","@firebase/logger":"JJem","@firebase/component":"vhY9"}],"zKjx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/auth");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"@firebase/auth":"QWyA"}],"qQDx":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStatEventTarget=exports.default=exports.createWebChannelTransport=exports.XhrIo=exports.WebChannel=exports.Stat=exports.FetchXmlHttpFactory=exports.EventType=exports.Event=exports.ErrorCode=void 0;var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},i={};exports.default=i;var n,s=s||{},r=e||self;function o(){}function h(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function a(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function l(t){return Object.prototype.hasOwnProperty.call(t,u)&&t[u]||(t[u]=++c)}var u="closure_uid_"+(1e9*Math.random()>>>0),c=0;function f(t,e,i){return t.call.apply(t.bind,arguments)}function g(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function p(t,e,i){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:g).apply(null,arguments)}function d(t,e){var i=Array.prototype.slice.call(arguments,1);return function(){var e=i.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function v(t,e){function i(){}i.prototype=e.prototype,t.Z=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.Vb=function(t,i,n){for(var s=Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];return e.prototype[i].apply(t,s)}}function y(){this.s=this.s,this.o=this.o}var m=0,b={};y.prototype.s=!1,y.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0!=m)){var t=l(this);delete b[t]}},y.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const w=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let i=0;i<t.length;i++)if(i in t&&t[i]===e)return i;return-1},T=Array.prototype.forEach?function(t,e,i){Array.prototype.forEach.call(t,e,i)}:function(t,e,i){const n=t.length,s="string"==typeof t?t.split(""):t;for(let r=0;r<n;r++)r in s&&e.call(i,s[r],r,t)};function E(t){t:{var e=Bi;const i=t.length,n="string"==typeof t?t.split(""):t;for(let s=0;s<i;s++)if(s in n&&e.call(void 0,n[s],s,t)){e=s;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}function S(t){return Array.prototype.concat.apply([],arguments)}function x(t){const e=t.length;if(0<e){const i=Array(e);for(let n=0;n<e;n++)i[n]=t[n];return i}return[]}function j(t){return/^[\s\xa0]*$/.test(t)}var C,I=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function A(t,e){return-1!=t.indexOf(e)}function R(t,e){return t<e?-1:t>e?1:0}t:{var O=r.navigator;if(O){var P=O.userAgent;if(P){C=P;break t}}C=""}function D(t,e,i){for(const n in t)e.call(i,t[n],n,t)}function M(t){const e={};for(const i in t)e[i]=t[i];return e}var L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(t,e){let i,n;for(let s=1;s<arguments.length;s++){for(i in n=arguments[s])t[i]=n[i];for(let e=0;e<L.length;e++)i=L[e],Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}}function H(t){return H[" "](t),t}function k(t){var e=q;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}H[" "]=o;var _,B=A(C,"Opera"),F=A(C,"Trident")||A(C,"MSIE"),N=A(C,"Edge"),U=N||F,K=A(C,"Gecko")&&!(A(C.toLowerCase(),"webkit")&&!A(C,"Edge"))&&!(A(C,"Trident")||A(C,"MSIE"))&&!A(C,"Edge"),Y=A(C.toLowerCase(),"webkit")&&!A(C,"Edge");function G(){var t=r.document;return t?t.documentMode:void 0}t:{var J="",W=function(){var t=C;return K?/rv:([^\);]+)(\)|;)/.exec(t):N?/Edge\/([\d\.]+)/.exec(t):F?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Y?/WebKit\/(\S+)/.exec(t):B?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(W&&(J=W?W[1]:""),F){var V=G();if(null!=V&&V>parseFloat(J)){_=String(V);break t}}_=J}var $,q={};function z(){return k(function(){let t=0;const e=I(String(_)).split("."),i=I("9").split("."),n=Math.max(e.length,i.length);for(let o=0;0==t&&o<n;o++){var s=e[o]||"",r=i[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==s[0].length&&0==r[0].length)break;t=R(0==s[1].length?0:parseInt(s[1],10),0==r[1].length?0:parseInt(r[1],10))||R(0==s[2].length,0==r[2].length)||R(s[2],r[2]),s=s[3],r=r[3]}while(0==t)}return 0<=t})}if(r.document&&F){var Z=G();$=Z||(parseInt(_,10)||void 0)}else $=void 0;var Q=$,tt=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{r.addEventListener("test",o,e),r.removeEventListener("test",o,e)}catch(i){}return t}();function et(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function it(t,e){if(et.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var i=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(K){t:{try{H(e.nodeName);var s=!0;break t}catch(r){}s=!1}s||(e=null)}}else"mouseover"==i?e=t.fromElement:"mouseout"==i&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:nt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&it.Z.h.call(this)}}et.prototype.h=function(){this.defaultPrevented=!0},v(it,et);var nt={2:"touch",3:"pen",4:"mouse"};it.prototype.h=function(){it.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),rt=0;function ot(t,e,i,n,s){this.listener=t,this.proxy=null,this.src=e,this.type=i,this.capture=!!n,this.ia=s,this.key=++rt,this.ca=this.fa=!1}function ht(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function at(t){this.src=t,this.g={},this.h=0}function lt(t,e){var i=e.type;if(i in t.g){var n,s=t.g[i],r=w(s,e);(n=0<=r)&&Array.prototype.splice.call(s,r,1),n&&(ht(e),0==t.g[i].length&&(delete t.g[i],t.h--))}}function ut(t,e,i,n){for(var s=0;s<t.length;++s){var r=t[s];if(!r.ca&&r.listener==e&&r.capture==!!i&&r.ia==n)return s}return-1}at.prototype.add=function(t,e,i,n,s){var r=t.toString();(t=this.g[r])||(t=this.g[r]=[],this.h++);var o=ut(t,e,n,s);return-1<o?(e=t[o],i||(e.fa=!1)):((e=new ot(e,this.src,r,!!n,s)).fa=i,t.push(e)),e};var ct="closure_lm_"+(1e6*Math.random()|0),ft={};function gt(t,e,i,n,s){if(n&&n.once)return vt(t,e,i,n,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)gt(t,e[r],i,n,s);return null}return i=St(i),t&&t[st]?t.N(e,i,a(n)?!!n.capture:!!n,s):pt(t,e,i,!1,n,s)}function pt(t,e,i,n,s,r){if(!e)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,h=Tt(t);if(h||(t[ct]=h=new at(t)),(i=h.add(e,i,n,o,r)).proxy)return i;if(n=dt(),i.proxy=n,n.src=t,n.listener=i,t.addEventListener)tt||(s=o),void 0===s&&(s=!1),t.addEventListener(e.toString(),n,s);else if(t.attachEvent)t.attachEvent(bt(e.toString()),n);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(n)}return i}function dt(){var t=wt;return function e(i){return t.call(e.src,e.listener,i)}}function vt(t,e,i,n,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)vt(t,e[r],i,n,s);return null}return i=St(i),t&&t[st]?t.O(e,i,a(n)?!!n.capture:!!n,s):pt(t,e,i,!0,n,s)}function yt(t,e,i,n,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)yt(t,e[r],i,n,s);else n=a(n)?!!n.capture:!!n,i=St(i),t&&t[st]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(i=ut(r=t.g[e],i,n,s))&&(ht(r[i]),Array.prototype.splice.call(r,i,1),0==r.length&&(delete t.g[e],t.h--)))):t&&(t=Tt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ut(e,i,n,s)),(i=-1<t?e[t]:null)&&mt(i))}function mt(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[st])lt(e.i,t);else{var i=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(i,n,t.capture):e.detachEvent?e.detachEvent(bt(i),n):e.addListener&&e.removeListener&&e.removeListener(n),(i=Tt(e))?(lt(i,t),0==i.h&&(i.src=null,e[ct]=null)):ht(t)}}}function bt(t){return t in ft?ft[t]:ft[t]="on"+t}function wt(t,e){if(t.ca)t=!0;else{e=new it(e,this);var i=t.listener,n=t.ia||t.src;t.fa&&mt(t),t=i.call(n,e)}return t}function Tt(t){return(t=t[ct])instanceof at?t:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function St(t){return"function"==typeof t?t:(t[Et]||(t[Et]=function(e){return t.handleEvent(e)}),t[Et])}function xt(){y.call(this),this.i=new at(this),this.P=this,this.I=null}function jt(t,e){var i,n=t.I;if(n)for(i=[];n;n=n.I)i.push(n);if(t=t.P,n=e.type||e,"string"==typeof e)e=new et(e,t);else if(e instanceof et)e.target=e.target||t;else{var s=e;X(e=new et(n,t),s)}if(s=!0,i)for(var r=i.length-1;0<=r;r--){var o=e.g=i[r];s=Ct(o,n,!0,e)&&s}if(s=Ct(o=e.g=t,n,!0,e)&&s,s=Ct(o,n,!1,e)&&s,i)for(r=0;r<i.length;r++)s=Ct(o=e.g=i[r],n,!1,e)&&s}function Ct(t,e,i,n){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.ca&&o.capture==i){var h=o.listener,a=o.ia||o.src;o.fa&&lt(t.i,o),s=!1!==h.call(a,n)&&s}}return s&&!n.defaultPrevented}v(xt,y),xt.prototype[st]=!0,xt.prototype.removeEventListener=function(t,e,i,n){yt(this,t,e,i,n)},xt.prototype.M=function(){if(xt.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var i=e.g[t],n=0;n<i.length;n++)ht(i[n]);delete e.g[t],e.h--}}this.I=null},xt.prototype.N=function(t,e,i,n){return this.i.add(String(t),e,!1,i,n)},xt.prototype.O=function(t,e,i,n){return this.i.add(String(t),e,!0,i,n)};var It=r.JSON.stringify;function At(){var t=kt;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Rt{constructor(){this.h=this.g=null}add(t,e){const i=Pt.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}}var Ot,Pt=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Dt,t=>t.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Mt(t){r.setTimeout(()=>{throw t},0)}function Lt(t,e){Ot||Xt(),Ht||(Ot(),Ht=!0),kt.add(t,e)}function Xt(){var t=r.Promise.resolve(void 0);Ot=function(){t.then(_t)}}var Ht=!1,kt=new Rt;function _t(){for(var t;t=At();){try{t.h.call(t.g)}catch(i){Mt(i)}var e=Pt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ht=!1}function Bt(t,e){xt.call(this),this.h=t||1,this.g=e||r,this.j=p(this.kb,this),this.l=Date.now()}function Ft(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Nt(t,e,i){if("function"==typeof t)i&&(t=p(t,i));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=p(t.handleEvent,t)}return 2147483647<Number(e)?-1:r.setTimeout(t,e||0)}function Ut(t){t.g=Nt(()=>{t.g=null,t.i&&(t.i=!1,Ut(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}v(Bt,xt),(n=Bt.prototype).da=!1,n.S=null,n.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),jt(this,"tick"),this.da&&(Ft(this),this.start()))}},n.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},n.M=function(){Bt.Z.M.call(this),Ft(this),delete this.g};class Kt extends y{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Ut(this)}M(){super.M(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yt(t){y.call(this),this.h=t,this.g={}}v(Yt,y);var Gt=[];function Jt(t,e,i,n){Array.isArray(i)||(i&&(Gt[0]=i.toString()),i=Gt);for(var s=0;s<i.length;s++){var r=gt(e,i[s],n||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function Wt(t){D(t.g,function(t,e){this.g.hasOwnProperty(e)&&mt(t)},t),t.g={}}function Vt(){this.g=!0}function $t(t,e,i,n,s,r){t.info(function(){if(t.g)if(r)for(var o="",h=r.split("&"),a=0;a<h.length;a++){var l=h[a].split("=");if(1<l.length){var u=l[0];l=l[1];var c=u.split("_");o=2<=c.length&&"type"==c[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+n+") [attempt "+s+"]: "+e+"\n"+i+"\n"+o})}function qt(t,e,i,n,s,r,o){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+s+"]: "+e+"\n"+i+"\n"+r+" "+o})}function zt(t,e,i,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Qt(t,i)+(n?" "+n:"")})}function Zt(t,e){t.info(function(){return"TIMEOUT: "+e})}function Qt(t,e){if(!t.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i)for(t=0;t<i.length;t++)if(Array.isArray(i[t])){var n=i[t];if(!(2>n.length)){var s=n[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<s.length;o++)s[o]=""}}}return It(i)}catch(h){return e}}Yt.prototype.M=function(){Yt.Z.M.call(this),Wt(this)},Yt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vt.prototype.Aa=function(){this.g=!1},Vt.prototype.info=function(){};var te={},ee=null;function ie(){return ee=ee||new xt}function ne(t){et.call(this,te.Ma,t)}function se(t){const e=ie();jt(e,new ne(e,t))}function re(t,e){et.call(this,te.STAT_EVENT,t),this.stat=e}function oe(t){const e=ie();jt(e,new re(e,t))}function he(t,e){et.call(this,te.Na,t),this.size=e}function ae(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return r.setTimeout(function(){t()},e)}te.Ma="serverreachability",v(ne,et),te.STAT_EVENT="statevent",v(re,et),te.Na="timingevent",v(he,et);var le={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ue={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ce(){}function fe(t){return t.h||(t.h=t.i())}function ge(){}ce.prototype.h=null;var pe,de={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ve(){et.call(this,"d")}function ye(){et.call(this,"c")}function me(){}function be(t,e,i,n){this.l=t,this.j=e,this.m=i,this.X=n||1,this.V=new Yt(this),this.P=Te,t=U?125:void 0,this.W=new Bt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new we}function we(){this.i=null,this.g="",this.h=!1}v(ve,et),v(ye,et),v(me,ce),me.prototype.g=function(){return new XMLHttpRequest},me.prototype.i=function(){return{}},pe=new me;var Te=45e3,Ee={},Se={};function xe(t,e,i){t.K=1,t.v=$e(Ke(e)),t.s=i,t.U=!0,je(t,null)}function je(t,e){t.F=Date.now(),Re(t),t.A=Ke(t.v);var i=t.A,n=t.X;Array.isArray(n)||(n=[String(n)]),ui(i.h,"t",n),t.C=0,i=t.l.H,t.h=new we,t.g=yn(t.l,i?e:null,!t.s),0<t.O&&(t.L=new Kt(p(t.Ia,t,t.g),t.O)),Jt(t.V,t.g,"readystatechange",t.gb),e=t.H?M(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),se(1),$t(t.j,t.u,t.A,t.m,t.X,t.s)}function Ce(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Ie(t,e,i){let n,s=!0;for(;!t.I&&t.C<i.length;){if((n=Ae(t,i))==Se){4==e&&(t.o=4,oe(14),s=!1),zt(t.j,t.m,null,"[Incomplete Response]");break}if(n==Ee){t.o=4,oe(15),zt(t.j,t.m,i,"[Invalid Chunk]"),s=!1;break}zt(t.j,t.m,n,null),Le(t,n)}Ce(t)&&n!=Se&&n!=Ee&&(t.h.g="",t.C=0),4!=e||0!=i.length||t.h.h||(t.o=1,oe(16),s=!1),t.i=t.i&&s,s?0<i.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+i.length),ln(e),e.L=!0,oe(11))):(zt(t.j,t.m,i,"[Invalid Chunked Response]"),Me(t),De(t))}function Ae(t,e){var i=t.C,n=e.indexOf("\n",i);return-1==n?Se:(i=Number(e.substring(i,n)),isNaN(i)?Ee:(n+=1)+i>e.length?Se:(e=e.substr(n,i),t.C=n+i,e))}function Re(t){t.Y=Date.now()+t.P,Oe(t,t.P)}function Oe(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ae(p(t.eb,t),e)}function Pe(t){t.B&&(r.clearTimeout(t.B),t.B=null)}function De(t){0==t.l.G||t.I||fn(t.l,t)}function Me(t){Pe(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Ft(t.W),Wt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Le(t,e){try{var i=t.l;if(0!=i.G&&(i.g==t||mi(i.i,t)))if(i.I=t.N,!t.J&&mi(i.i,t)&&3==i.G){try{var n=i.Ca.g.parse(e)}catch(l){n=null}if(Array.isArray(n)&&3==n.length){var s=n;if(0==s[0]){t:if(!i.u){if(i.g){if(!(i.g.F+3e3<t.F))break t;cn(i),Zi(i)}an(i),oe(18)}}else i.ta=s[1],0<i.ta-i.U&&37500>s[2]&&i.N&&0==i.A&&!i.v&&(i.v=ae(p(i.ab,i),6e3));if(1>=yi(i.i)&&i.ka){try{i.ka()}catch(l){}i.ka=void 0}}else pn(i,11)}else if((t.J||i.g==t)&&cn(i),!j(e))for(s=i.Ca.g.parse(e),e=0;e<s.length;e++){let l=s[e];if(i.U=l[0],l=l[1],2==i.G)if("c"==l[0]){i.J=l[1],i.la=l[2];const e=l[3];null!=e&&(i.ma=e,i.h.info("VER="+i.ma));const s=l[4];null!=s&&(i.za=s,i.h.info("SVER="+i.za));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(n=1.5*u,i.K=n,i.h.info("backChannelRequestTimeoutMs_="+n)),n=i;const c=t.g;if(c){const t=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var r=n.i;!r.g&&(A(t,"spdy")||A(t,"quic")||A(t,"h2"))&&(r.j=r.l,r.g=new Set,r.h&&(bi(r,r.h),r.h=null))}if(n.D){const t=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(n.sa=t,Ve(n.F,n.D,t))}}i.G=3,i.j&&i.j.xa(),i.$&&(i.O=Date.now()-t.F,i.h.info("Handshake RTT: "+i.O+"ms"));var o=t;if((n=i).oa=vn(n,n.H?n.la:null,n.W),o.J){wi(n.i,o);var h=o,a=n.K;a&&h.setTimeout(a),h.B&&(Pe(h),Re(h)),n.g=o}else hn(n);0<i.l.length&&en(i)}else"stop"!=l[0]&&"close"!=l[0]||pn(i,7);else 3==i.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?pn(i,7):zi(i):"noop"!=l[0]&&i.j&&i.j.wa(l),i.A=0)}se(4)}catch(l){}}function Xe(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],i=t.length,n=0;n<i;n++)e.push(t[n]);return e}for(n in e=[],i=0,t)e[i++]=t[n];return e}function He(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)T(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var i=t.T();else if(t.R&&"function"==typeof t.R)i=void 0;else if(h(t)||"string"==typeof t){i=[];for(var n=t.length,s=0;s<n;s++)i.push(s)}else for(s in i=[],n=0,t)i[n++]=s;s=(n=Xe(t)).length;for(var r=0;r<s;r++)e.call(void 0,n[r],i&&i[r],t)}}function ke(t,e){this.h={},this.g=[],this.i=0;var i=arguments.length;if(1<i){if(i%2)throw Error("Uneven number of arguments");for(var n=0;n<i;n+=2)this.set(arguments[n],arguments[n+1])}else if(t)if(t instanceof ke)for(i=t.T(),n=0;n<i.length;n++)this.set(i[n],t.get(i[n]));else for(n in t)this.set(n,t[n])}function _e(t){if(t.i!=t.g.length){for(var e=0,i=0;e<t.g.length;){var n=t.g[e];Be(t.h,n)&&(t.g[i++]=n),e++}t.g.length=i}if(t.i!=t.g.length){var s={};for(i=e=0;e<t.g.length;)Be(s,n=t.g[e])||(t.g[i++]=n,s[n]=1),e++;t.g.length=i}}function Be(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(n=be.prototype).setTimeout=function(t){this.P=t},n.gb=function(t){t=t.target;const e=this.L;e&&3==Gi(t)?e.l():this.Ia(t)},n.Ia=function(t){try{if(t==this.g)t:{const c=Gi(this.g);var e=this.g.Da();const f=this.g.ba();if(!(3>c)&&(3!=c||U||this.g&&(this.h.h||this.g.ga()||Ji(this.g)))){this.I||4!=c||7==e||se(8==e||0>=f?3:2),Pe(this);var i=this.g.ba();this.N=i;e:if(Ce(this)){var n=Ji(this.g);t="";var s=n.length,o=4==Gi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Me(this),De(this);var h="";break e}this.h.i=new r.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:o&&e==s-1});n.splice(0,s),this.h.g+=t,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==i,qt(this.j,this.u,this.A,this.m,this.X,c,i),this.i){if(this.$&&!this.J){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(a)){var u=a;break e}}u=null}if(!(i=u)){this.i=!1,this.o=3,oe(12),Me(this),De(this);break t}zt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Le(this,i)}this.U?(Ie(this,c,h),U&&this.i&&3==c&&(Jt(this.V,this.W,"tick",this.fb),this.W.start())):(zt(this.j,this.m,h,null),Le(this,h)),4==c&&Me(this),this.i&&!this.I&&(4==c?fn(this.l,this):(this.i=!1,Re(this)))}else 400==i&&0<h.indexOf("Unknown SID")?(this.o=3,oe(12)):(this.o=0,oe(13)),Me(this),De(this)}}}catch(c){}},n.fb=function(){if(this.g){var t=Gi(this.g),e=this.g.ga();this.C<e.length&&(Pe(this),Ie(this,t,e),this.i&&4!=t&&Re(this))}},n.cancel=function(){this.I=!0,Me(this)},n.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Zt(this.j,this.A),2!=this.K&&(se(3),oe(17)),Me(this),this.o=2,De(this)):Oe(this,this.Y-t)},(n=ke.prototype).R=function(){_e(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},n.T=function(){return _e(this),this.g.concat()},n.get=function(t,e){return Be(this.h,t)?this.h[t]:e},n.set=function(t,e){Be(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},n.forEach=function(t,e){for(var i=this.T(),n=0;n<i.length;n++){var s=i[n],r=this.get(s);t.call(e,r,s,this)}};var Fe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ne(t,e){if(t){t=t.split("&");for(var i=0;i<t.length;i++){var n=t[i].indexOf("="),s=null;if(0<=n){var r=t[i].substring(0,n);s=t[i].substring(n+1)}else r=t[i];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Ue(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ue){this.g=void 0!==e?e:t.g,Ye(this,t.j),this.s=t.s,Ge(this,t.i),Je(this,t.m),this.l=t.l,e=t.h;var i=new oi;i.i=e.i,e.g&&(i.g=new ke(e.g),i.h=e.h),We(this,i),this.o=t.o}else t&&(i=String(t).match(Fe))?(this.g=!!e,Ye(this,i[1]||"",!0),this.s=Ze(i[2]||""),Ge(this,i[3]||"",!0),Je(this,i[4]),this.l=Ze(i[5]||"",!0),We(this,i[6]||"",!0),this.o=Ze(i[7]||"")):(this.g=!!e,this.h=new oi(null,this.g))}function Ke(t){return new Ue(t)}function Ye(t,e,i){t.j=i?Ze(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ge(t,e,i){t.i=i?Ze(e,!0):e}function Je(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function We(t,e,i){e instanceof oi?(t.h=e,fi(t.h,t.g)):(i||(e=Qe(e,si)),t.h=new oi(e,t.g))}function Ve(t,e,i){t.h.set(e,i)}function $e(t){return Ve(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function qe(t){return t instanceof Ue?Ke(t):new Ue(t,void 0)}function ze(t,e,i,n){var s=new Ue(null,void 0);return t&&Ye(s,t),e&&Ge(s,e),i&&Je(s,i),n&&(s.l=n),s}function Ze(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qe(t,e,i){return"string"==typeof t?(t=encodeURI(t).replace(e,ti),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ti(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ue.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Qe(e,ei,!0),":");var i=this.i;return(i||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Qe(e,ei,!0),"@"),t.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.m)&&t.push(":",String(i))),(i=this.l)&&(this.i&&"/"!=i.charAt(0)&&t.push("/"),t.push(Qe(i,"/"==i.charAt(0)?ni:ii,!0))),(i=this.h.toString())&&t.push("?",i),(i=this.o)&&t.push("#",Qe(i,ri)),t.join("")};var ei=/[#\/\?@]/g,ii=/[#\?:]/g,ni=/[#\?]/g,si=/[#\?@]/g,ri=/#/g;function oi(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function hi(t){t.g||(t.g=new ke,t.h=0,t.i&&Ne(t.i,function(e,i){t.add(decodeURIComponent(e.replace(/\+/g," ")),i)}))}function ai(t,e){hi(t),e=ci(t,e),Be(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Be((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&_e(t)))}function li(t,e){return hi(t),e=ci(t,e),Be(t.g.h,e)}function ui(t,e,i){ai(t,e),0<i.length&&(t.i=null,t.g.set(ci(t,e),x(i)),t.h+=i.length)}function ci(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function fi(t,e){e&&!t.j&&(hi(t),t.i=null,t.g.forEach(function(t,e){var i=e.toLowerCase();e!=i&&(ai(this,e),ui(this,i,t))},t)),t.j=e}(n=oi.prototype).add=function(t,e){hi(this),this.i=null,t=ci(this,t);var i=this.g.get(t);return i||this.g.set(t,i=[]),i.push(e),this.h+=1,this},n.forEach=function(t,e){hi(this),this.g.forEach(function(i,n){T(i,function(i){t.call(e,i,n,this)},this)},this)},n.T=function(){hi(this);for(var t=this.g.R(),e=this.g.T(),i=[],n=0;n<e.length;n++)for(var s=t[n],r=0;r<s.length;r++)i.push(e[n]);return i},n.R=function(t){hi(this);var e=[];if("string"==typeof t)li(this,t)&&(e=S(e,this.g.get(ci(this,t))));else{t=this.g.R();for(var i=0;i<t.length;i++)e=S(e,t[i])}return e},n.set=function(t,e){return hi(this),this.i=null,li(this,t=ci(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},n.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),i=0;i<e.length;i++){var n=e[i],s=encodeURIComponent(String(n));n=this.R(n);for(var r=0;r<n.length;r++){var o=s;""!==n[r]&&(o+="="+encodeURIComponent(String(n[r]))),t.push(o)}}return this.i=t.join("&")};var gi=class{constructor(t,e){this.h=t,this.g=e}};function pi(t){this.l=t||di,r.PerformanceNavigationTiming?t=0<(t=r.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(r.g&&r.g.Ea&&r.g.Ea()&&r.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var di=10;function vi(t){return!!t.h||!!t.g&&t.g.size>=t.j}function yi(t){return t.h?1:t.g?t.g.size:0}function mi(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function bi(t,e){t.g?t.g.add(e):t.h=e}function wi(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Ti(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const i of t.g.values())e=e.concat(i.D);return e}return x(t.i)}function Ei(){}function Si(){this.g=new Ei}function xi(t,e,i){const n=i||"";try{He(t,function(t,i){let s=t;a(t)&&(s=It(t)),e.push(n+i+"="+encodeURIComponent(s))})}catch(s){throw e.push(n+"type="+encodeURIComponent("_badmap")),s}}function ji(t,e){const i=new Vt;if(r.Image){const n=new Image;n.onload=d(Ci,i,n,"TestLoadImage: loaded",!0,e),n.onerror=d(Ci,i,n,"TestLoadImage: error",!1,e),n.onabort=d(Ci,i,n,"TestLoadImage: abort",!1,e),n.ontimeout=d(Ci,i,n,"TestLoadImage: timeout",!1,e),r.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function Ci(t,e,i,n,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(n)}catch(r){}}function Ii(t){this.l=t.$b||null,this.j=t.ib||!1}function Ai(t,e){xt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Ri,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pi.prototype.cancel=function(){if(this.i=Ti(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},Ei.prototype.stringify=function(t){return r.JSON.stringify(t,void 0)},Ei.prototype.parse=function(t){return r.JSON.parse(t,void 0)},v(Ii,ce),Ii.prototype.g=function(){return new Ai(this.l,this.j)},Ii.prototype.i=function(t){return function(){return t}}({}),v(Ai,xt);var Ri=0;function Oi(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Pi(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Di(t)}function Di(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(n=Ai.prototype).open=function(t,e){if(this.readyState!=Ri)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Di(this)},n.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||r).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},n.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pi(this)),this.readyState=Ri},n.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Di(this)),this.g&&(this.readyState=3,Di(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==r.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Oi(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},n.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Pi(this):Di(this),3==this.readyState&&Oi(this)}},n.Ua=function(t){this.g&&(this.response=this.responseText=t,Pi(this))},n.Ta=function(t){this.g&&(this.response=t,Pi(this))},n.ha=function(){this.g&&Pi(this)},n.setRequestHeader=function(t,e){this.v.append(t,e)},n.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var i=e.next();!i.done;)i=i.value,t.push(i[0]+": "+i[1]),i=e.next();return t.join("\r\n")},Object.defineProperty(Ai.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Mi=r.JSON.parse;function Li(t){xt.call(this),this.headers=new ke,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Xi,this.K=this.L=!1}v(Li,xt);var Xi="",Hi=/^https?$/i,ki=["POST","PUT"];function _i(t){return F&&z()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function Bi(t){return"content-type"==t.toLowerCase()}function Fi(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ni(t),Ki(t)}function Ni(t){t.D||(t.D=!0,jt(t,"complete"),jt(t,"error"))}function Ui(t){if(t.h&&void 0!==s&&(!t.C[1]||4!=Gi(t)||2!=t.ba()))if(t.v&&4==Gi(t))Nt(t.Fa,0,t);else if(jt(t,"readystatechange"),4==Gi(t)){t.h=!1;try{const s=t.ba();t:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var i;if(!(i=e)){var n;if(n=0===s){var o=String(t.H).match(Fe)[1]||null;if(!o&&r.self&&r.self.location){var h=r.self.location.protocol;o=h.substr(0,h.length-1)}n=!Hi.test(o?o.toLowerCase():"")}i=n}if(i)jt(t,"complete"),jt(t,"success");else{t.m=6;try{var a=2<Gi(t)?t.g.statusText:""}catch(l){a=""}t.j=a+" ["+t.ba()+"]",Ni(t)}}finally{Ki(t)}}}function Ki(t,e){if(t.g){Yi(t);const n=t.g,s=t.C[0]?o:null;t.g=null,t.C=null,e||jt(t,"ready");try{n.onreadystatechange=s}catch(i){}}}function Yi(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(r.clearTimeout(t.A),t.A=null)}function Gi(t){return t.g?t.g.readyState:0}function Ji(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Xi:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Wi(t){let e="";return D(t,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function Vi(t,e,i){t:{for(n in i){var n=!1;break t}n=!0}n||(i=Wi(i),"string"==typeof t?null!=i&&encodeURIComponent(String(i)):Ve(t,e,i))}function $i(t,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[t]||e}function qi(t){this.za=0,this.l=[],this.h=new Vt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=$i("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=$i("baseRetryDelayMs",5e3,t),this.$a=$i("retryDelaySeedMs",1e4,t),this.Ya=$i("forwardChannelMaxRetries",2,t),this.ra=$i("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new pi(t&&t.concurrentRequestLimit),this.Ca=new Si,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function zi(t){if(Qi(t),3==t.G){var e=t.V++,i=Ke(t.F);Ve(i,"SID",t.J),Ve(i,"RID",e),Ve(i,"TYPE","terminate"),rn(t,i),(e=new be(t,t.h,e,void 0)).K=2,e.v=$e(Ke(i)),i=!1,r.navigator&&r.navigator.sendBeacon&&(i=r.navigator.sendBeacon(e.v.toString(),"")),!i&&r.Image&&((new Image).src=e.v,i=!0),i||(e.g=yn(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Re(e)}dn(t)}function Zi(t){t.g&&(ln(t),t.g.cancel(),t.g=null)}function Qi(t){Zi(t),t.u&&(r.clearTimeout(t.u),t.u=null),cn(t),t.i.cancel(),t.m&&("number"==typeof t.m&&r.clearTimeout(t.m),t.m=null)}function tn(t,e){t.l.push(new gi(t.Za++,e)),3==t.G&&en(t)}function en(t){vi(t.i)||t.m||(t.m=!0,Lt(t.Ha,t),t.C=0)}function nn(t,e){return!(yi(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=e.D.concat(t.l),!0):!(1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya))&&(t.m=ae(p(t.Ha,t,e),gn(t,t.C)),t.C++,!0))}function sn(t,e){var i;i=e?e.m:t.V++;const n=Ke(t.F);Ve(n,"SID",t.J),Ve(n,"RID",i),Ve(n,"AID",t.U),rn(t,n),t.o&&t.s&&Vi(n,t.o,t.s),i=new be(t,t.h,i,t.C+1),null===t.o&&(i.H=t.s),e&&(t.l=e.D.concat(t.l)),e=on(t,i,1e3),i.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),bi(t.i,i),xe(i,n,e)}function rn(t,e){t.j&&He({},function(t,i){Ve(e,i,t)})}function on(t,e,i){i=Math.min(t.l.length,i);var n=t.j?p(t.j.Oa,t.j,t):null;t:{var s=t.l;let e=-1;for(;;){const t=["count="+i];-1==e?0<i?(e=s[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let h=0;h<i;h++){let i=s[h].h;const a=s[h].g;if(0>(i-=e))e=Math.max(0,s[h].h-100),o=!1;else try{xi(a,t,"req"+i+"_")}catch(r){n&&n(a)}}if(o){n=t.join("&");break t}}}return t=t.l.splice(0,i),e.D=t,n}function hn(t){t.g||t.u||(t.Y=1,Lt(t.Ga,t),t.A=0)}function an(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=ae(p(t.Ga,t),gn(t,t.A)),t.A++,!0)}function ln(t){null!=t.B&&(r.clearTimeout(t.B),t.B=null)}function un(t){t.g=new be(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Ke(t.oa);Ve(e,"RID","rpc"),Ve(e,"SID",t.J),Ve(e,"CI",t.N?"0":"1"),Ve(e,"AID",t.U),rn(t,e),Ve(e,"TYPE","xmlhttp"),t.o&&t.s&&Vi(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var i=t.g;t=t.la,i.K=1,i.v=$e(Ke(e)),i.s=null,i.U=!0,je(i,t)}function cn(t){null!=t.v&&(r.clearTimeout(t.v),t.v=null)}function fn(t,e){var i=null;if(t.g==e){cn(t),ln(t),t.g=null;var n=2}else{if(!mi(t.i,e))return;i=e.D,wi(t.i,e),n=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==n){i=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;jt(n=ie(),new he(n,i,e,s)),en(t)}else hn(t);else if(3==(s=e.o)||0==s&&0<t.I||!(1==n&&nn(t,e)||2==n&&an(t)))switch(i&&0<i.length&&(e=t.i,e.i=e.i.concat(i)),s){case 1:pn(t,5);break;case 4:pn(t,10);break;case 3:pn(t,6);break;default:pn(t,2)}}function gn(t,e){let i=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(i*=2),i*e}function pn(t,e){if(t.h.info("Error code "+e),2==e){var i=null;t.j&&(i=null);var n=p(t.jb,t);i||(i=new Ue("//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||Ye(i,"https"),$e(i)),ji(i.toString(),n)}else oe(2);t.G=0,t.j&&t.j.va(e),dn(t),Qi(t)}function dn(t){t.G=0,t.I=-1,t.j&&(0==Ti(t.i).length&&0==t.l.length||(t.i.i.length=0,x(t.l),t.l.length=0),t.j.ua())}function vn(t,e,i){let n=qe(i);if(""!=n.i)e&&Ge(n,e+"."+n.i),Je(n,n.m);else{const t=r.location;n=ze(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,i)}return t.aa&&D(t.aa,function(t,e){Ve(n,e,t)}),e=t.D,i=t.sa,e&&i&&Ve(n,e,i),Ve(n,"VER",t.ma),rn(t,n),n}function yn(t,e,i){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=i&&t.Ba&&!t.qa?new Li(new Ii({ib:!0})):new Li(t.qa)).L=t.H,e}function mn(){}function bn(){if(F&&!(10<=Number(Q)))throw Error("Environmental error: no available transport.")}function wn(t,e){xt.call(this),this.g=new qi(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!j(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!j(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Sn(this)}function Tn(t){ve.call(this);var e=t.__sm__;if(e){t:{for(const i in e){t=i;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function En(){ye.call(this),this.status=1}function Sn(t){this.g=t}(n=Li.prototype).ea=function(t,e,i,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():pe.g(),this.C=this.u?fe(this.u):fe(pe),this.g.onreadystatechange=p(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Fi(this,o)}t=i||"";const s=new ke(this.headers);n&&He(n,function(t,e){s.set(e,t)}),n=E(s.T()),i=r.FormData&&t instanceof r.FormData,!(0<=w(ki,e))||n||i||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yi(this),0<this.B&&((this.K=_i(this.g))?(this.g.timeout=this.B,this.g.ontimeout=p(this.pa,this)):this.A=Nt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Fi(this,o)}},n.pa=function(){void 0!==s&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jt(this,"timeout"),this.abort(8))},n.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,jt(this,"complete"),jt(this,"abort"),Ki(this))},n.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ki(this,!0)),Li.Z.M.call(this)},n.Fa=function(){this.s||(this.F||this.v||this.l?Ui(this):this.cb())},n.cb=function(){Ui(this)},n.ba=function(){try{return 2<Gi(this)?this.g.status:-1}catch(t){return-1}},n.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},n.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Mi(e)}},n.Da=function(){return this.m},n.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(n=qi.prototype).ma=8,n.G=1,n.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},n.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const s=new be(this,this.h,t,void 0);let r=this.s;if(this.P&&(r?X(r=M(r),this.P):r=this.P),null===this.o&&(s.H=r),this.ja)t:{for(var e=0,i=0;i<this.l.length;i++){var n=this.l[i];if(void 0===(n="__data__"in n.g&&"string"==typeof(n=n.g.__data__)?n.length:void 0))break;if(4096<(e+=n)){e=i;break t}if(4096===e||i===this.l.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=on(this,s,e),Ve(i=Ke(this.F),"RID",t),Ve(i,"CVER",22),this.D&&Ve(i,"X-HTTP-Session-Id",this.D),rn(this,i),this.o&&r&&Vi(i,this.o,r),bi(this.i,s),this.Ra&&Ve(i,"TYPE","init"),this.ja?(Ve(i,"$req",e),Ve(i,"SID","null"),s.$=!0,xe(s,i,null)):xe(s,i,e),this.G=2}}else 3==this.G&&(t?sn(this,t):0==this.l.length||vi(this.i)||sn(this))},n.Ga=function(){if(this.u=null,un(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ae(p(this.bb,this),t)}},n.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,oe(10),Zi(this),un(this))},n.ab=function(){null!=this.v&&(this.v=null,Zi(this),an(this),oe(19))},n.jb=function(t){t?(this.h.info("Successfully pinged google.com"),oe(2)):(this.h.info("Failed to ping google.com"),oe(1))},(n=mn.prototype).xa=function(){},n.wa=function(){},n.va=function(){},n.ua=function(){},n.Oa=function(){},bn.prototype.g=function(t,e){return new wn(t,e)},v(wn,xt),wn.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,i=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Lt(p(t.hb,t,e))),oe(0),t.W=e,t.aa=i||{},t.N=t.X,t.F=vn(t,null,t.W),en(t)},wn.prototype.close=function(){zi(this.g)},wn.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,tn(this.g,e)}else this.v?((e={}).__data__=It(t),tn(this.g,e)):tn(this.g,t)},wn.prototype.M=function(){this.g.j=null,delete this.j,zi(this.g),delete this.g,wn.Z.M.call(this)},v(Tn,ve),v(En,ye),v(Sn,mn),Sn.prototype.xa=function(){jt(this.g,"a")},Sn.prototype.wa=function(t){jt(this.g,new Tn(t))},Sn.prototype.va=function(t){jt(this.g,new En(t))},Sn.prototype.ua=function(){jt(this.g,"b")},bn.prototype.createWebChannel=bn.prototype.g,wn.prototype.send=wn.prototype.u,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,le.NO_ERROR=0,le.TIMEOUT=8,le.HTTP_ERROR=6,ue.COMPLETE="complete",ge.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",xt.prototype.listen=xt.prototype.N,Li.prototype.listenOnce=Li.prototype.O,Li.prototype.getLastError=Li.prototype.La,Li.prototype.getLastErrorCode=Li.prototype.Da,Li.prototype.getStatus=Li.prototype.ba,Li.prototype.getResponseJson=Li.prototype.Qa,Li.prototype.getResponseText=Li.prototype.ga,Li.prototype.send=Li.prototype.ea;var xn=i.createWebChannelTransport=function(){return new bn};exports.createWebChannelTransport=xn;var jn=i.getStatEventTarget=function(){return ie()};exports.getStatEventTarget=jn;var Cn=i.ErrorCode=le;exports.ErrorCode=Cn;var In=i.EventType=ue;exports.EventType=In;var An=i.Event=te;exports.Event=An;var Rn=i.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20};exports.Stat=Rn;var On=i.FetchXmlHttpFactory=Ii;exports.FetchXmlHttpFactory=On;var Pn=i.WebChannel=ge;exports.WebChannel=Pn;var Dn=i.XhrIo=Li;exports.XhrIo=Dn;
},{}],"lBbe":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports._cast=Pu,exports._debugAssert=w,exports._isBase64Available=W,exports._logWarn=m,exports._setIndexConfiguration=Yl,exports._validateIsNotUsedTogether=Vu,exports.addDoc=Pl,exports.arrayRemove=Ql,exports.arrayUnion=jl,exports.clearIndexedDbPersistence=uc,exports.collection=zu,exports.collectionGroup=ju,exports.connectFirestoreEmulator=Bu,exports.deleteDoc=Fl,exports.deleteField=$l,exports.disableNetwork=hc,exports.doc=Qu,exports.documentId=yc,exports.enableIndexedDbPersistence=ic,exports.enableMultiTabIndexedDbPersistence=oc,exports.enableNetwork=lc,exports.endAt=yl,exports.endBefore=gl,exports.ensureFirestoreConfigured=sc,exports.executeWrite=Ul,exports.getDoc=Dl,exports.getDocFromCache=Al,exports.getDocFromServer=Cl,exports.getDocs=kl,exports.getDocsFromCache=Ml,exports.getDocsFromServer=Vl,exports.getFirestore=nc,exports.increment=Wl,exports.initializeFirestore=tc,exports.limit=ll,exports.limitToLast=hl,exports.loadBundle=fc,exports.namedQuery=mc,exports.onSnapshot=Ol,exports.onSnapshotsInSync=ql,exports.orderBy=ul,exports.query=rl,exports.queryEqual=Hu,exports.refEqual=Wu,exports.runTransaction=Kl,exports.serverTimestamp=zl,exports.setDoc=Rl,exports.setLogLevel=h,exports.snapshotEqual=tl,exports.startAfter=ml,exports.startAt=fl,exports.terminate=dc,exports.updateDoc=Ll,exports.waitForPendingWrites=cc,exports.where=ol,exports.writeBatch=Hl,exports._FieldPath=exports._EmptyAuthCredentialsProvider=exports._EmptyAppCheckTokenProvider=exports._DocumentKey=exports._DatabaseId=exports.WriteBatch=exports.Transaction=exports.Timestamp=exports.SnapshotMetadata=exports.QuerySnapshot=exports.QueryDocumentSnapshot=exports.QueryConstraint=exports.Query=exports.LoadBundleTask=exports.GeoPoint=exports.FirestoreError=exports.Firestore=exports.FieldValue=exports.FieldPath=exports.DocumentSnapshot=exports.DocumentReference=exports.CollectionReference=exports.CACHE_SIZE_UNLIMITED=exports.Bytes=exports.AbstractUserDataWriter=void 0;var t=require("@firebase/app"),n=require("@firebase/component"),s=require("@firebase/logger"),r=require("@firebase/util"),i=require("@firebase/webchannel-wrapper");const o="@firebase/firestore";class a{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}a.UNAUTHENTICATED=new a(null),a.GOOGLE_CREDENTIALS=new a("google-credentials-uid"),a.FIRST_PARTY=new a("first-party-uid"),a.MOCK_USER=new a("mock-user");let u="9.6.10";const c=new s.Logger("@firebase/firestore");function l(){return c.logLevel}function h(e){c.setLogLevel(e)}function d(e,...t){if(c.logLevel<=s.LogLevel.DEBUG){const n=t.map(p);c.debug(`Firestore (${u}): ${e}`,...n)}}function f(e,...t){if(c.logLevel<=s.LogLevel.ERROR){const n=t.map(p);c.error(`Firestore (${u}): ${e}`,...n)}}function m(e,...t){if(c.logLevel<=s.LogLevel.WARN){const n=t.map(p);c.warn(`Firestore (${u}): ${e}`,...n)}}function p(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function g(e="Unexpected state"){const t=`FIRESTORE (${u}) INTERNAL ASSERTION FAILED: `+e;throw f(t),new Error(t)}function y(e,t){e||g()}function w(e,t){e||g()}function v(e,t){return e}const I={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class b extends r.FirebaseError{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=(()=>`${this.name}: [code=${this.code}]: ${this.message}`)}}exports.FirestoreError=b;class E{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class T{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class S{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(a.UNAUTHENTICATED))}shutdown(){}}exports._EmptyAuthCredentialsProvider=S;class x{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _{constructor(e){this.t=e,this.currentUser=a.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const s=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new E;this.o=(()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new E,e.enqueueRetryable(()=>s(this.currentUser))});const i=()=>{const t=r;e.enqueueRetryable(async()=>{await t.promise,await s(this.currentUser)})},o=e=>{d("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(d("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new E)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(d("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(y("string"==typeof t.accessToken),new T(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return y(null===e||"string"==typeof e),new a(e)}}class D{constructor(e,t,n){this.type="FirstParty",this.user=a.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class N{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new D(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(a.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=e=>{null!=e.error&&d("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.p;return this.p=e.token,d("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=(t=>{e.enqueueRetryable(()=>n(t))});const s=e=>{d("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit(e=>s(e)),setTimeout(()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?s(e):d("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(y("string"==typeof e.token),this.p=e.token,new A(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class k{getToken(){return Promise.resolve(new A(""))}invalidateToken(){}start(e,t){}shutdown(){}}exports._EmptyAppCheckTokenProvider=k;class M{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=(e=>this.I(e)),this.T=(e=>t.writeSequenceNumber(e)))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function V(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}M.A=-1;class R{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=V(40);for(let r=0;r<s.length;++r)n.length<20&&s[r]<t&&(n+=e.charAt(s[r]%e.length))}return n}}function L(e,t){return e<t?-1:e>t?1:0}function F(e,t,n){return e.length===t.length&&e.every((e,s)=>n(e,t[s]))}function P(e){return e+"\0"}class O{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new b(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new b(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new b(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new b(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return O.fromMillis(Date.now())}static fromDate(e){return O.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new O(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?L(this.nanoseconds,e.nanoseconds):L(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}exports.Timestamp=O;class q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new q(e)}static min(){return new q(new O(0,0))}static max(){return new q(new O(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function U(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function B(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function G(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class K{constructor(e,t,n){void 0===t?t=0:t>e.length&&g(),void 0===n?n=e.length-t:n>e.length-t&&g(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===K.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof K?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const n=e.get(s),r=t.get(s);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $ extends K{construct(e,t,n){return new $(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new b(I.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new $(t)}static emptyPath(){return new $([])}}const z=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class j extends K{construct(e,t,n){return new j(e,t,n)}static isValidIdentifier(e){return z.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),j.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new j(["__name__"])}static fromServerFormat(e){const t=[];let n="",s=0;const r=()=>{if(0===n.length)throw new b(I.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;s<e.length;){const t=e[s];if("\\"===t){if(s+1===e.length)throw new b(I.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[s+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new b(I.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,s+=2}else"`"===t?(i=!i,s++):"."!==t||i?(n+=t,s++):(r(),s++)}if(r(),i)throw new b(I.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new j(t)}static emptyPath(){return new j([])}}exports._FieldPath=j;class Q{constructor(e){this.fields=e,e.sort(j.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return F(this.fields,e.fields,(e,t)=>e.isEqual(t))}}function W(){return"undefined"!=typeof atob}class H{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new H(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new H(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return L(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}H.EMPTY_BYTE_STRING=new H("");const Y=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function J(e){if(y(!!e),"string"==typeof e){let t=0;const n=Y.exec(e);if(y(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:X(e.seconds),nanos:X(e.nanos)}}function X(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Z(e){return"string"==typeof e?H.fromBase64String(e):H.fromUint8Array(e)}function ee(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function te(e){const t=e.mapValue.fields.__previous_value__;return ee(t)?te(t):t}function ne(e){const t=J(e.mapValue.fields.__local_write_time__.timestampValue);return new O(t.seconds,t.nanos)}class se{constructor(e,t,n,s,r,i,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class re{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new re("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof re&&e.projectId===this.projectId&&e.database===this.database}}function ie(e){return null==e}function oe(e){return 0===e&&1/e==-1/0}function ae(e){return"number"==typeof e&&Number.isInteger(e)&&!oe(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}exports._DatabaseId=re;class ue{constructor(e){this.path=e}static fromPath(e){return new ue($.fromString(e))}static fromName(e){return new ue($.fromString(e).popFirst(5))}static empty(){return new ue($.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return $.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new $(e.slice()))}}exports._DocumentKey=ue;const ce={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},le={nullValue:"NULL_VALUE"};function he(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ee(e)?4:xe(e)?9:10:g()}function de(e,t){if(e===t)return!0;const n=he(e);if(n!==he(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ne(e).isEqual(ne(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=J(e.timestampValue),s=J(t.timestampValue);return n.seconds===s.seconds&&n.nanos===s.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Z(e.bytesValue).isEqual(Z(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return X(e.geoPointValue.latitude)===X(t.geoPointValue.latitude)&&X(e.geoPointValue.longitude)===X(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return X(e.integerValue)===X(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=X(e.doubleValue),s=X(t.doubleValue);return n===s?oe(n)===oe(s):isNaN(n)&&isNaN(s)}return!1}(e,t);case 9:return F(e.arrayValue.values||[],t.arrayValue.values||[],de);case 10:return function(e,t){const n=e.mapValue.fields||{},s=t.mapValue.fields||{};if(U(n)!==U(s))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===s[r]||!de(n[r],s[r])))return!1;return!0}(e,t);default:return g()}}function fe(e,t){return void 0!==(e.values||[]).find(e=>de(e,t))}function me(e,t){if(e===t)return 0;const n=he(e),s=he(t);if(n!==s)return L(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return L(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=X(e.integerValue||e.doubleValue),s=X(t.integerValue||t.doubleValue);return n<s?-1:n>s?1:n===s?0:isNaN(n)?isNaN(s)?0:-1:1}(e,t);case 3:return pe(e.timestampValue,t.timestampValue);case 4:return pe(ne(e),ne(t));case 5:return L(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Z(e),s=Z(t);return n.compareTo(s)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),s=t.split("/");for(let r=0;r<n.length&&r<s.length;r++){const e=L(n[r],s[r]);if(0!==e)return e}return L(n.length,s.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=L(X(e.latitude),X(t.latitude));return 0!==n?n:L(X(e.longitude),X(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],s=t.values||[];for(let r=0;r<n.length&&r<s.length;++r){const e=me(n[r],s[r]);if(e)return e}return L(n.length,s.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},s=Object.keys(n),r=t.fields||{},i=Object.keys(r);s.sort(),i.sort();for(let o=0;o<s.length&&o<i.length;++o){const e=L(s[o],i[o]);if(0!==e)return e;const t=me(n[s[o]],r[i[o]]);if(0!==t)return t}return L(s.length,i.length)}(e.mapValue,t.mapValue);default:throw g()}}function pe(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return L(e,t);const n=J(e),s=J(t),r=L(n.seconds,s.seconds);return 0!==r?r:L(n.nanos,s.nanos)}function ge(e){return ye(e)}function ye(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=J(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Z(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ue.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const s of e.values||[])n?n=!1:t+=",",t+=ye(s);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",s=!0;for(const r of t)s?s=!1:n+=",",n+=`${r}:${ye(e.fields[r])}`;return n+"}"}(e.mapValue):g();var t,n}function we(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ve(e){return!!e&&"integerValue"in e}function Ie(e){return!!e&&"arrayValue"in e}function be(e){return!!e&&"nullValue"in e}function Ee(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Te(e){return!!e&&"mapValue"in e}function Se(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return B(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Se(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Se(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xe(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function _e(e,t){return void 0===e?t:void 0===t||me(e,t)>0?e:t}function De(e,t){return void 0===e?t:void 0===t||me(e,t)<0?e:t}class Ne{constructor(e){this.value=e}static empty(){return new Ne({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(!Te(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Se(t)}setAll(e){let t=j.emptyPath(),n={},s=[];e.forEach((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,s),n={},s=[],t=r.popLast()}e?n[r.lastSegment()]=Se(e):s.push(r.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,n,s)}delete(e){const t=this.field(e.popLast());Te(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return de(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Te(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){B(t,(t,n)=>e[t]=n);for(const s of n)delete e[s]}clone(){return new Ne(Se(this.value))}}function Ae(e){const t=[];return B(e.fields,(e,n)=>{const s=new j([e]);if(Te(n)){const e=Ae(n.mapValue).fields;if(0===e.length)t.push(s);else for(const n of e)t.push(s.child(n))}else t.push(s)}),new Q(t)}class Ce{constructor(e,t,n,s,r,i){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.data=r,this.documentState=i}static newInvalidDocument(e){return new Ce(e,0,q.min(),q.min(),Ne.empty(),0)}static newFoundDocument(e,t,n){return new Ce(e,1,t,q.min(),n,0)}static newNoDocument(e,t){return new Ce(e,2,t,q.min(),Ne.empty(),0)}static newUnknownDocument(e,t){return new Ce(e,3,t,q.min(),Ne.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ne.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ne.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ce&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ce(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ke{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}function Me(e){return e.fields.find(e=>2===e.kind)}function Ve(e){return e.fields.filter(e=>2!==e.kind)}ke.UNKNOWN_ID=-1;class Re{constructor(e,t){this.fieldPath=e,this.kind=t}}class Le{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Le(0,Oe.min())}}function Fe(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,r=q.fromTimestamp(1e9===s?new O(n+1,0):new O(n,s));return new Oe(r,ue.empty(),t)}function Pe(e){return new Oe(e.readTime,e.key,-1)}class Oe{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Oe(q.min(),ue.empty(),-1)}static max(){return new Oe(q.max(),ue.empty(),-1)}}function qe(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ue.comparator(e.documentKey,t.documentKey))?n:L(e.largestBatchId,t.largestBatchId)}class Ue{constructor(e,t=null,n=[],s=[],r=null,i=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=r,this.startAt=i,this.endAt=o,this.P=null}}function Be(e,t=null,n=[],s=[],r=null,i=null,o=null){return new Ue(e,t,n,s,r,i,o)}function Ge(e){const t=v(e);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>{return(t=e).field.canonicalString()+t.op.toString()+ge(t.value);var t}).join(","),e+="|ob:",e+=t.orderBy.map(e=>(function(e){return e.field.canonicalString()+e.dir})(e)).join(","),ie(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>ge(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>ge(e)).join(",")),t.P=e}return t.P}function Ke(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${ge(t.value)}`;var t}).join(", ")}]`),ie(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>(function(e){return`${e.field.canonicalString()} (${e.dir})`})(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>ge(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>ge(e)).join(",")),`Target(${t})`}function $e(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!rt(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(n=e.filters[r],s=t.filters[r],n.op!==s.op||!n.field.isEqual(s.field)||!de(n.value,s.value))return!1;var n,s;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ot(e.startAt,t.startAt)&&ot(e.endAt,t.endAt)}function ze(e){return ue.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function je(e,t){return e.filters.filter(e=>e instanceof Qe&&e.field.isEqual(t))}class Qe extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,n):new We(e,t,n):"array-contains"===t?new Xe(e,n):"in"===t?new Ze(e,n):"not-in"===t?new et(e,n):"array-contains-any"===t?new tt(e,n):new Qe(e,t,n)}static V(e,t,n){return"in"===t?new He(e,n):new Ye(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(me(t,this.value)):null!==t&&he(this.value)===he(t)&&this.v(me(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return g()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class We extends Qe{constructor(e,t,n){super(e,t,n),this.key=ue.fromName(n.referenceValue)}matches(e){const t=ue.comparator(e.key,this.key);return this.v(t)}}class He extends Qe{constructor(e,t){super(e,"in",t),this.keys=Je("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ye extends Qe{constructor(e,t){super(e,"not-in",t),this.keys=Je("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Je(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ue.fromName(e.referenceValue))}class Xe extends Qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ie(t)&&fe(t.arrayValue,this.value)}}class Ze extends Qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fe(this.value.arrayValue,t)}}class et extends Qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(fe(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fe(this.value.arrayValue,t)}}class tt extends Qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ie(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>fe(this.value.arrayValue,e))}}class nt{constructor(e,t){this.position=e,this.inclusive=t}}class st{constructor(e,t="asc"){this.field=e,this.dir=t}}function rt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function it(e,t,n){let s=0;for(let r=0;r<e.position.length;r++){const i=t[r],o=e.position[r];if(s=i.field.isKeyField()?ue.comparator(ue.fromName(o.referenceValue),n.key):me(o,n.data.field(i.field)),"desc"===i.dir&&(s*=-1),0!==s)break}return s}function ot(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!de(e.position[n],t.position[n]))return!1;return!0}class at{constructor(e,t=null,n=[],s=[],r=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=r,this.limitType=i,this.startAt=o,this.endAt=a,this.D=null,this.C=null,this.startAt,this.endAt}}function ut(e,t,n,s,r,i,o,a){return new at(e,t,n,s,r,i,o,a)}function ct(e){return new at(e)}function lt(e){return!ie(e.limit)&&"F"===e.limitType}function ht(e){return!ie(e.limit)&&"L"===e.limitType}function dt(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ft(e){for(const t of e.filters)if(t.S())return t.field;return null}function mt(e){return null!==e.collectionGroup}function pt(e){const t=v(e);if(null===t.D){t.D=[];const e=ft(t),n=dt(t);if(null!==e&&null===n)e.isKeyField()||t.D.push(new st(e)),t.D.push(new st(j.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.D.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new st(j.keyField(),e))}}}return t.D}function gt(e){const t=v(e);if(!t.C)if("F"===t.limitType)t.C=Be(t.path,t.collectionGroup,pt(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const r of pt(t)){const t="desc"===r.dir?"asc":"desc";e.push(new st(r.field,t))}const n=t.endAt?new nt(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new nt(t.startAt.position,!t.startAt.inclusive):null;t.C=Be(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}return t.C}function yt(e,t,n){return new at(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function wt(e,t){return $e(gt(e),gt(t))&&e.limitType===t.limitType}function vt(e){return`${Ge(gt(e))}|lt:${e.limitType}`}function It(e){return`Query(target=${Ke(gt(e))}; limitType=${e.limitType})`}function bt(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ue.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const s=it(e,t,n);return e.inclusive?s<=0:s<0}(e.startAt,pt(e),t))&&!(e.endAt&&!function(e,t,n){const s=it(e,t,n);return e.inclusive?s>=0:s>0}(e.endAt,pt(e),t))}(e,t)}function Et(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Tt(e){return(t,n)=>{let s=!1;for(const r of pt(e)){const e=St(r,t,n);if(0!==e)return e;s=s||r.field.isKeyField()}return 0}}function St(e,t,n){const s=e.field.isKeyField()?ue.comparator(t.key,n.key):function(e,t,n){const s=t.data.field(e),r=n.data.field(e);return null!==s&&null!==r?me(s,r):g()}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return g()}}function xt(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oe(t)?"-0":t}}function _t(e){return{integerValue:""+e}}function Dt(e,t){return ae(t)?_t(t):xt(e,t)}class Nt{constructor(){this._=void 0}}function At(e,t,n){return e instanceof Mt?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Vt?Rt(e,t):e instanceof Lt?Ft(e,t):function(e,t){const n=kt(e,t),s=Ot(n)+Ot(e.k);return ve(n)&&ve(e.k)?_t(s):xt(e.M,s)}(e,t)}function Ct(e,t,n){return e instanceof Vt?Rt(e,t):e instanceof Lt?Ft(e,t):n}function kt(e,t){return e instanceof Pt?ve(n=t)||n&&"doubleValue"in n?t:{integerValue:0}:null;var n}class Mt extends Nt{}class Vt extends Nt{constructor(e){super(),this.elements=e}}function Rt(e,t){const n=qt(t);for(const s of e.elements)n.some(e=>de(e,s))||n.push(s);return{arrayValue:{values:n}}}class Lt extends Nt{constructor(e){super(),this.elements=e}}function Ft(e,t){let n=qt(t);for(const s of e.elements)n=n.filter(e=>!de(e,s));return{arrayValue:{values:n}}}class Pt extends Nt{constructor(e,t){super(),this.M=e,this.k=t}}function Ot(e){return X(e.integerValue||e.doubleValue)}function qt(e){return Ie(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ut{constructor(e,t){this.field=e,this.transform=t}}function Bt(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Vt&&t instanceof Vt||e instanceof Lt&&t instanceof Lt?F(e.elements,t.elements,de):e instanceof Pt&&t instanceof Pt?de(e.k,t.k):e instanceof Mt&&t instanceof Mt}(e.transform,t.transform)}class Gt{constructor(e,t){this.version=e,this.transformResults=t}}class Kt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kt}static exists(e){return new Kt(void 0,e)}static updateTime(e){return new Kt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $t(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class zt{}function jt(e,t,n){e instanceof Jt?function(e,t,n){const s=e.value.clone(),r=en(e.fieldTransforms,t,n.transformResults);s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):e instanceof Xt?function(e,t,n){if(!$t(e.precondition,t))return void t.convertToUnknownDocument(n.version);const s=en(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Zt(e)),r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Qt(e,t,n){e instanceof Jt?function(e,t,n){if(!$t(e.precondition,t))return;const s=e.value.clone(),r=tn(e.fieldTransforms,n,t);s.setAll(r),t.convertToFoundDocument(Yt(t),s).setHasLocalMutations()}(e,t,n):e instanceof Xt?function(e,t,n){if(!$t(e.precondition,t))return;const s=tn(e.fieldTransforms,n,t),r=t.data;r.setAll(Zt(e)),r.setAll(s),t.convertToFoundDocument(Yt(t),r).setHasLocalMutations()}(e,t,n):function(e,t){$t(e.precondition,t)&&t.convertToNoDocument(q.min())}(e,t)}function Wt(e,t){let n=null;for(const s of e.fieldTransforms){const e=t.data.field(s.field),r=kt(s.transform,e||null);null!=r&&(null==n&&(n=Ne.empty()),n.set(s.field,r))}return n||null}function Ht(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&F(e,t,(e,t)=>Bt(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Yt(e){return e.isFoundDocument()?e.version:q.min()}class Jt extends zt{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}}class Xt extends zt{constructor(e,t,n,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=r,this.type=1}}function Zt(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function en(e,t,n){const s=new Map;y(e.length===n.length);for(let r=0;r<n.length;r++){const i=e[r],o=i.transform,a=t.data.field(i.field);s.set(i.field,Ct(o,a,n[r]))}return s}function tn(e,t,n){const s=new Map;for(const r of e){const e=r.transform,i=n.data.field(r.field);s.set(r.field,At(e,i,t))}return s}class nn extends zt{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class sn extends zt{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class rn{constructor(e){this.count=e}}var on,an;function un(e){switch(e){default:return g();case I.CANCELLED:case I.UNKNOWN:case I.DEADLINE_EXCEEDED:case I.RESOURCE_EXHAUSTED:case I.INTERNAL:case I.UNAVAILABLE:case I.UNAUTHENTICATED:return!1;case I.INVALID_ARGUMENT:case I.NOT_FOUND:case I.ALREADY_EXISTS:case I.PERMISSION_DENIED:case I.FAILED_PRECONDITION:case I.ABORTED:case I.OUT_OF_RANGE:case I.UNIMPLEMENTED:case I.DATA_LOSS:return!0}}function cn(e){if(void 0===e)return f("GRPC error has no .code"),I.UNKNOWN;switch(e){case on.OK:return I.OK;case on.CANCELLED:return I.CANCELLED;case on.UNKNOWN:return I.UNKNOWN;case on.DEADLINE_EXCEEDED:return I.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return I.RESOURCE_EXHAUSTED;case on.INTERNAL:return I.INTERNAL;case on.UNAVAILABLE:return I.UNAVAILABLE;case on.UNAUTHENTICATED:return I.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return I.INVALID_ARGUMENT;case on.NOT_FOUND:return I.NOT_FOUND;case on.ALREADY_EXISTS:return I.ALREADY_EXISTS;case on.PERMISSION_DENIED:return I.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return I.FAILED_PRECONDITION;case on.ABORTED:return I.ABORTED;case on.OUT_OF_RANGE:return I.OUT_OF_RANGE;case on.UNIMPLEMENTED:return I.UNIMPLEMENTED;case on.DATA_LOSS:return I.DATA_LOSS;default:return g()}}(an=on||(on={}))[an.OK=0]="OK",an[an.CANCELLED=1]="CANCELLED",an[an.UNKNOWN=2]="UNKNOWN",an[an.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",an[an.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",an[an.NOT_FOUND=5]="NOT_FOUND",an[an.ALREADY_EXISTS=6]="ALREADY_EXISTS",an[an.PERMISSION_DENIED=7]="PERMISSION_DENIED",an[an.UNAUTHENTICATED=16]="UNAUTHENTICATED",an[an.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",an[an.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",an[an.ABORTED=10]="ABORTED",an[an.OUT_OF_RANGE=11]="OUT_OF_RANGE",an[an.UNIMPLEMENTED=12]="UNIMPLEMENTED",an[an.INTERNAL=13]="INTERNAL",an[an.UNAVAILABLE=14]="UNAVAILABLE",an[an.DATA_LOSS=15]="DATA_LOSS";class ln{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[s,r]of n)if(this.equalsFn(s,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0===s)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return 1===n.length?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){B(this.inner,(t,n)=>{for(const[s,r]of n)e(s,r)})}isEmpty(){return G(this.inner)}size(){return this.innerSize}}class hn{constructor(e,t){this.comparator=e,this.root=t||fn.EMPTY}insert(e,t){return new hn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(0===s)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dn(this.root,e,this.comparator,!1)}getReverseIterator(){return new dn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dn(this.root,e,this.comparator,!0)}}class dn{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fn{constructor(e,t,n,s,r){this.key=e,this.value=t,this.color=null!=n?n:fn.RED,this.left=null!=s?s:fn.EMPTY,this.right=null!=r?r:fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,r){return new fn(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const r=n(e,s.key);return(s=r<0?s.copy(null,null,null,s.left.insert(e,t,n),null):0===r?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n))).fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return fn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw g();if(this.right.isRed())throw g();const e=this.left.check();if(e!==this.right.check())throw g();return e+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1,fn.EMPTY=new class{constructor(){this.size=0}get key(){throw g()}get value(){throw g()}get color(){throw g()}get left(){throw g()}get right(){throw g()}copy(e,t,n,s,r){return this}insert(e,t,n){return new fn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new hn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pn(this.data.getIterator())}getIteratorFrom(e){return new pn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof mn))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(0!==this.comparator(e,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class pn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gn(e){return e.hasNext()?e.getNext():void 0}const yn=new hn(ue.comparator);function wn(){return yn}const vn=new hn(ue.comparator);function In(){return vn}function bn(){return new ln(e=>e.toString(),(e,t)=>e.isEqual(t))}const En=new hn(ue.comparator),Tn=new mn(ue.comparator);function Sn(...e){let t=Tn;for(const n of e)t=t.add(n);return t}const xn=new mn(L);function _n(){return xn}class Dn{constructor(e,t,n,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,Nn.createSynthesizedTargetChangeForCurrentChange(e,t)),new Dn(q.min(),n,_n(),wn(),Sn())}}class Nn{constructor(e,t,n,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Nn(H.EMPTY_BYTE_STRING,t,Sn(),Sn(),Sn())}}class An{constructor(e,t,n,s){this.O=e,this.removedTargetIds=t,this.key=n,this.F=s}}class Cn{constructor(e,t){this.targetId=e,this.$=t}}class kn{constructor(e,t,n=H.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class Mn{constructor(){this.B=0,this.L=Ln(),this.U=H.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=Sn(),t=Sn(),n=Sn();return this.L.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:g()}}),new Nn(this.U,this.q,e,t,n)}J(){this.G=!1,this.L=Ln()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class Vn{constructor(e){this.nt=e,this.st=new Map,this.it=wn(),this.rt=Rn(),this.ot=new mn(L)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const n=this.lt(t);switch(e.state){case 0:this.ft(t)&&n.W(e.resumeToken);break;case 1:n.tt(),n.K||n.J(),n.W(e.resumeToken);break;case 2:n.tt(),n.K||this.removeTarget(t);break;case 3:this.ft(t)&&(n.et(),n.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),n.W(e.resumeToken));break;default:g()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((e,n)=>{this.ft(n)&&t(n)})}_t(e){const t=e.targetId,n=e.$.count,s=this.wt(t);if(s){const e=s.target;if(ze(e))if(0===n){const n=new ue(e.path);this.ct(t,n,Ce.newNoDocument(n,q.min()))}else y(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((n,s)=>{const r=this.wt(s);if(r){if(n.current&&ze(r.target)){const t=new ue(r.target.path);null!==this.it.get(t)||this.It(s,t)||this.ct(s,t,Ce.newNoDocument(t,e))}n.j&&(t.set(s,n.H()),n.J())}});let n=Sn();this.rt.forEach((e,t)=>{let s=!0;t.forEachWhile(e=>{const t=this.wt(e);return!t||2===t.purpose||(s=!1,!1)}),s&&(n=n.add(e))}),this.it.forEach((t,n)=>n.setReadTime(e));const s=new Dn(e,t,this.ot,this.it,n);return this.it=wn(),this.rt=Rn(),this.ot=new mn(L),s}at(e,t){if(!this.ft(e))return;const n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,n){if(!this.ft(e))return;const s=this.lt(e);this.It(e,t)?s.Y(t,1):s.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Mn,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new mn(L),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||d("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new Mn),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Rn(){return new hn(ue.comparator)}function Ln(){return new hn(ue.comparator)}const Fn={asc:"ASCENDING",desc:"DESCENDING"},Pn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class On{constructor(e,t){this.databaseId=e,this.N=t}}function qn(e,t){return e.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Un(e,t){return e.N?t.toBase64():t.toUint8Array()}function Bn(e,t){return qn(e,t.toTimestamp())}function Gn(e){return y(!!e),q.fromTimestamp(function(e){const t=J(e);return new O(t.seconds,t.nanos)}(e))}function Kn(e,t){return function(e){return new $(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function $n(e){const t=$.fromString(e);return y(gs(t)),t}function zn(e,t){return Kn(e.databaseId,t.path)}function jn(e,t){const n=$n(t);if(n.get(1)!==e.databaseId.projectId)throw new b(I.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new b(I.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ue(Yn(n))}function Qn(e,t){return Kn(e.databaseId,t)}function Wn(e){const t=$n(e);return 4===t.length?$.emptyPath():Yn(t)}function Hn(e){return new $(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Yn(e){return y(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Jn(e,t,n){return{name:zn(e,t),fields:n.value.mapValue.fields}}function Xn(e,t,n){const s=jn(e,t.name),r=Gn(t.updateTime),i=new Ne({mapValue:{fields:t.fields}}),o=Ce.newFoundDocument(s,r,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Zn(e,t){return"found"in t?function(e,t){y(!!t.found),t.found.name,t.found.updateTime;const n=jn(e,t.found.name),s=Gn(t.found.updateTime),r=new Ne({mapValue:{fields:t.found.fields}});return Ce.newFoundDocument(n,s,r)}(e,t):"missing"in t?function(e,t){y(!!t.missing),y(!!t.readTime);const n=jn(e,t.missing),s=Gn(t.readTime);return Ce.newNoDocument(n,s)}(e,t):g()}function es(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:g()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=function(e,t){return e.N?(y(void 0===t||"string"==typeof t),H.fromBase64String(t||"")):(y(void 0===t||t instanceof Uint8Array),H.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?I.UNKNOWN:cn(e.code);return new b(t,e.message||"")}(o);n=new kn(s,r,i,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=jn(e,s.document.name),i=Gn(s.document.updateTime),o=new Ne({mapValue:{fields:s.document.fields}}),a=Ce.newFoundDocument(r,i,o),u=s.targetIds||[],c=s.removedTargetIds||[];n=new An(u,c,a.key,a)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=jn(e,s.document),i=s.readTime?Gn(s.readTime):q.min(),o=Ce.newNoDocument(r,i),a=s.removedTargetIds||[];n=new An([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=jn(e,s.document),i=s.removedTargetIds||[];n=new An([],i,r,null)}else{if(!("filter"in t))return g();{t.filter;const e=t.filter;e.targetId;const s=e.count||0,r=new rn(s),i=e.targetId;n=new Cn(i,r)}}return n}function ts(e,t){let n;if(t instanceof Jt)n={update:Jn(e,t.key,t.value)};else if(t instanceof nn)n={delete:zn(e,t.key)};else if(t instanceof Xt)n={update:Jn(e,t.key,t.data),updateMask:ps(t.fieldMask)};else{if(!(t instanceof sn))return g();n={verify:zn(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>(function(e,t){const n=t.transform;if(n instanceof Mt)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Vt)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Lt)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Pt)return{fieldPath:t.field.canonicalString(),increment:n.k};throw g()})(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Bn(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:g()}(e,t.precondition)),n}function ns(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Kt.updateTime(Gn(e.updateTime)):void 0!==e.exists?Kt.exists(e.exists):Kt.none()}(t.currentDocument):Kt.none(),s=t.updateTransforms?t.updateTransforms.map(t=>(function(e,t){let n=null;if("setToServerValue"in t)y("REQUEST_TIME"===t.setToServerValue),n=new Mt;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Vt(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Lt(e)}else"increment"in t?n=new Pt(e,t.increment):g();const s=j.fromServerFormat(t.fieldPath);return new Ut(s,n)})(e,t)):[];if(t.update){t.update.name;const r=jn(e,t.update.name),i=new Ne({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Q(t.map(e=>j.fromServerFormat(e)))}(t.updateMask);return new Xt(r,i,e,n,s)}return new Jt(r,i,n,s)}if(t.delete){const s=jn(e,t.delete);return new nn(s,n)}if(t.verify){const s=jn(e,t.verify);return new sn(s,n)}return g()}function ss(e,t){return e&&e.length>0?(y(void 0!==t),e.map(e=>(function(e,t){let n=e.updateTime?Gn(e.updateTime):Gn(t);return n.isEqual(q.min())&&(n=Gn(t)),new Gt(n,e.transformResults||[])})(e,t))):[]}function rs(e,t){return{documents:[Qn(e,t.path)]}}function is(e,t){const n={structuredQuery:{}},s=t.path;null!==t.collectionGroup?(n.parent=Qn(e,s),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Qn(e,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const r=function(e){if(0===e.length)return;const t=e.map(e=>(function(e){if("=="===e.op){if(Ee(e.value))return{unaryFilter:{field:hs(e.field),op:"IS_NAN"}};if(be(e.value))return{unaryFilter:{field:hs(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ee(e.value))return{unaryFilter:{field:hs(e.field),op:"IS_NOT_NAN"}};if(be(e.value))return{unaryFilter:{field:hs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hs(e.field),op:ls(e.op),value:e.value}}})(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);r&&(n.structuredQuery.where=r);const i=function(e){if(0!==e.length)return e.map(e=>(function(e){return{field:hs(e.field),direction:cs(e.dir)}})(e))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(e,t){return e.N||ie(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function os(e){let t=Wn(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){y(1===s);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=us(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>(function(e){return new st(ds(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))})(e)));let a=null;n.limit&&(a=function(e){let t;return ie(t="object"==typeof e?e.value:e)?null:t}(n.limit));let u=null;n.startAt&&(u=function(e){const t=!!e.before,n=e.values||[];return new nt(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new nt(n,t)}(n.endAt)),ut(t,r,o,i,a,"F",u,c)}function as(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return g()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}function us(e){return e?void 0!==e.unaryFilter?[ms(e)]:void 0!==e.fieldFilter?[fs(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>us(e)).reduce((e,t)=>e.concat(t)):g():[]}function cs(e){return Fn[e]}function ls(e){return Pn[e]}function hs(e){return{fieldPath:e.canonicalString()}}function ds(e){return j.fromServerFormat(e.fieldPath)}function fs(e){return Qe.create(ds(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return g()}}(e.fieldFilter.op),e.fieldFilter.value)}function ms(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ds(e.unaryFilter.field);return Qe.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ds(e.unaryFilter.field);return Qe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ds(e.unaryFilter.field);return Qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=ds(e.unaryFilter.field);return Qe.create(r,"!=",{nullValue:"NULL_VALUE"});default:return g()}}function ps(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function gs(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function ys(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=vs(t)),t=ws(e.get(n),t);return vs(t)}function ws(e,t){let n=t;const s=e.length;for(let r=0;r<s;r++){const t=e.charAt(r);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function vs(e){return e+""}function Is(e){const t=e.length;if(y(t>=2),2===t)return y(""===e.charAt(0)&&""===e.charAt(1)),$.emptyPath();const n=t-2,s=[];let r="";for(let i=0;i<t;){const t=e.indexOf("",i);switch((t<0||t>n)&&g(),e.charAt(t+1)){case"":const n=e.substring(i,t);let o;0===r.length?o=n:(o=r+=n,r=""),s.push(o);break;case"":r+=e.substring(i,t),r+="\0";break;case"":r+=e.substring(i,t+1);break;default:g()}i=t+2}return new $(s)}const bs=["userId","batchId"];function Es(e,t){return[e,ys(t)]}function Ts(e,t,n){return[e,ys(t),n]}const Ss={},xs=["prefixPath","collectionGroup","readTime","documentId"],_s=["prefixPath","collectionGroup","documentId"],Ds=["collectionGroup","readTime","prefixPath","documentId"],Ns=["canonicalId","targetId"],As=["targetId","path"],Cs=["path","targetId"],ks=["collectionId","parent"],Ms=["indexId","uid"],Vs=["uid","sequenceNumber"],Rs=["indexId","uid","arrayValue","directionalValue","documentKey"],Ls=["indexId","uid","documentKey"],Fs=["userId","collectionPath","documentId"],Ps=["userId","collectionPath","largestBatchId"],Os=["userId","collectionGroup","largestBatchId"],qs=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Us=[...qs,"documentOverlays"],Bs=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Gs=[...Bs,"indexConfiguration","indexState","indexEntries"],Ks="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $s{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class zs{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&g(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new zs((n,s)=>{this.nextCallback=(t=>{this.wrapSuccess(e,t).next(n,s)}),this.catchCallback=(e=>{this.wrapFailure(t,e).next(n,s)})})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof zs?t:zs.resolve(t)}catch(e){return zs.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):zs.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):zs.reject(t)}static resolve(e){return new zs((t,n)=>{t(e)})}static reject(e){return new zs((t,n)=>{n(e)})}static waitFor(e){return new zs((t,n)=>{let s=0,r=0,i=!1;e.forEach(e=>{++s,e.next(()=>{++r,i&&r===s&&t()},e=>n(e))}),i=!0,r===s&&t()})}static or(e){let t=zs.resolve(!1);for(const n of e)t=t.next(e=>e?zs.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,s)=>{n.push(t.call(this,e,s))}),this.waitFor(n)}}class js{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new E,this.transaction.oncomplete=(()=>{this.At.resolve()}),this.transaction.onabort=(()=>{t.error?this.At.reject(new Hs(e,t.error)):this.At.resolve()}),this.transaction.onerror=(t=>{const n=er(t.target.error);this.At.reject(new Hs(e,n))})}static open(e,t,n,s){try{return new js(t,e.transaction(s,n))}catch(e){throw new Hs(t,e)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(d("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Js(t)}}class Qs{constructor(e,t,n){this.name=e,this.version=t,this.Pt=n,12.2===Qs.Vt((0,r.getUA)())&&f("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return d("SimpleDb","Removing database:",e),Xs(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,r.isIndexedDBAvailable)())return!1;if(Qs.St())return!0;const e=(0,r.getUA)(),t=Qs.Vt(e),n=0<t&&t<10,s=Qs.Dt(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static St(){var t;return void 0!==e&&"YES"===(null===(t=e.env)||void 0===t?void 0:t.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async Nt(e){return this.db||(d("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=(e=>{const n=e.target.result;t(n)}),s.onblocked=(()=>{n(new Hs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))}),s.onerror=(t=>{const s=t.target.error;"VersionError"===s.name?n(new b(I.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===s.name?n(new b(I.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new Hs(e,s))}),s.onupgradeneeded=(e=>{d("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.Pt.kt(t,s.transaction,e.oldVersion,this.version).next(()=>{d("SimpleDb","Database upgrade to version "+this.version+" complete")})})})),this.Mt&&(this.db.onversionchange=(e=>this.Mt(e))),this.db}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=(t=>e(t)))}async runTransaction(e,t,n,s){const r="readonly"===t;for(;;){0;try{this.db=await this.Nt(e);const t=js.open(this.db,e,r?"readonly":"readwrite",n),i=s(t).next(e=>(t.bt(),e)).catch(e=>(t.abort(e),zs.reject(e))).toPromise();return i.catch(()=>{}),await t.Rt,i}catch(e){const t="FirebaseError"!==e.name&&i<3;if(d("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Ws{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Xs(this.Ft.delete())}}class Hs extends b{constructor(e,t){super(I.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ys(e){return"IndexedDbTransactionError"===e.name}class Js{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(d("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Xs(n)}add(e){return d("SimpleDb","ADD",this.store.name,e,e),Xs(this.store.add(e))}get(e){return Xs(this.store.get(e)).next(t=>(void 0===t&&(t=null),d("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return d("SimpleDb","DELETE",this.store.name,e),Xs(this.store.delete(e))}count(){return d("SimpleDb","COUNT",this.store.name),Xs(this.store.count())}qt(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.Gt(e,(e,n)=>{t.push(n)}).next(()=>t)}{const e=this.store.getAll(n.range);return new zs((t,n)=>{e.onerror=(e=>{n(e.target.error)}),e.onsuccess=(e=>{t(e.target.result)})})}}Kt(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new zs((e,t)=>{n.onerror=(e=>{t(e.target.error)}),n.onsuccess=(t=>{e(t.target.result)})})}Qt(e,t){d("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.jt=!1;const s=this.cursor(n);return this.Gt(s,(e,t,n)=>n.delete())}Wt(e,t){let n;t?n=e:(n={},t=e);const s=this.cursor(n);return this.Gt(s,t)}zt(e){const t=this.cursor({});return new zs((n,s)=>{t.onerror=(e=>{const t=er(e.target.error);s(t)}),t.onsuccess=(t=>{const s=t.target.result;s?e(s.primaryKey,s.value).next(e=>{e?s.continue():n()}):n()})})}Gt(e,t){const n=[];return new zs((s,r)=>{e.onerror=(e=>{r(e.target.error)}),e.onsuccess=(e=>{const r=e.target.result;if(!r)return void s();const i=new Ws(r),o=t(r.primaryKey,r.value,i);if(o instanceof zs){const e=o.catch(e=>(i.done(),zs.reject(e)));n.push(e)}i.isDone?s():null===i.Lt?r.continue():r.continue(i.Lt)})}).next(()=>zs.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Xs(e){return new zs((t,n)=>{e.onsuccess=(e=>{const n=e.target.result;t(n)}),e.onerror=(e=>{const t=er(e.target.error);n(t)})})}let Zs=!1;function er(e){const t=Qs.Vt((0,r.getUA)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new b("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zs||(Zs=!0,setTimeout(()=>{throw e},0)),e}}return e}class tr extends $s{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function nr(e,t){const n=v(e);return Qs.xt(n.Ht,t)}class sr{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const t=this.mutations[s];t.key.isEqual(e.key)&&jt(t,e,n[s])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Qt(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Qt(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),s=n;this.applyToLocalView(s),n.isValidDocument()||s.convertToNoDocument(q.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Sn())}isEqual(e){return this.batchId===e.batchId&&F(this.mutations,e.mutations,(e,t)=>Ht(e,t))&&F(this.baseMutations,e.baseMutations,(e,t)=>Ht(e,t))}}class rr{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){y(e.mutations.length===n.length);let s=En;const r=e.mutations;for(let i=0;i<r.length;i++)s=s.insert(r[i].key,n[i].version);return new rr(e,t,n,s)}}class ir{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class or{constructor(e,t,n,s,r=q.min(),i=q.min(),o=H.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o}withSequenceNumber(e){return new or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ar{constructor(e){this.Jt=e}}function ur(e,t){let n;if(t.document)n=Xn(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=ue.fromSegments(t.noDocument.path),s=dr(t.noDocument.readTime);n=Ce.newNoDocument(e,s),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return g();{const e=ue.fromSegments(t.unknownDocument.path),s=dr(t.unknownDocument.version);n=Ce.newUnknownDocument(e,s)}}return t.readTime&&n.setReadTime(function(e){const t=new O(e[0],e[1]);return q.fromTimestamp(t)}(t.readTime)),n}function cr(e,t){const n=t.key,s={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:lr(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())s.document=function(e,t){return{name:zn(e,t.key),fields:t.data.value.mapValue.fields,updateTime:qn(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())s.noDocument={path:n.path.toArray(),readTime:hr(t.version)};else{if(!t.isUnknownDocument())return g();s.unknownDocument={path:n.path.toArray(),version:hr(t.version)}}return s}function lr(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function hr(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function dr(e){const t=new O(e.seconds,e.nanoseconds);return q.fromTimestamp(t)}function fr(e,t){const n=(t.baseMutations||[]).map(t=>ns(e.Jt,t));for(let i=0;i<t.mutations.length-1;++i){const e=t.mutations[i];if(i+1<t.mutations.length&&void 0!==t.mutations[i+1].transform){const n=t.mutations[i+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}const s=t.mutations.map(t=>ns(e.Jt,t)),r=O.fromMillis(t.localWriteTimeMs);return new sr(t.batchId,r,n,s)}function mr(e){const t=dr(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?dr(e.lastLimboFreeSnapshotVersion):q.min();let s;var r;return void 0!==e.query.documents?(y(1===(r=e.query).documents.length),s=gt(ct(Wn(r.documents[0])))):s=function(e){return gt(os(e))}(e.query),new or(s,e.targetId,0,e.lastListenSequenceNumber,t,n,H.fromBase64String(e.resumeToken))}function pr(e,t){const n=hr(t.snapshotVersion),s=hr(t.lastLimboFreeSnapshotVersion);let r;r=ze(t.target)?rs(e.Jt,t.target):is(e.Jt,t.target);const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ge(t.target),readTime:n,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:r}}function gr(e){const t=os({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?yt(t,t.limit,"L"):t}function yr(e,t){return new ir(t.largestBatchId,ns(e.Jt,t.overlayMutation))}function wr(e,t){const n=t.path.lastSegment();return[e,ys(t.path.popLast()),n]}class vr{getBundleMetadata(e,t){return Ir(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:dr(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return Ir(e).put({bundleId:(n=t).id,createTime:hr(Gn(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return br(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:gr(t.bundledQuery),readTime:dr(t.readTime)};var t})}saveNamedQuery(e,t){return br(e).put(function(e){return{name:e.name,readTime:hr(Gn(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Ir(e){return nr(e,"bundles")}function br(e){return nr(e,"namedQueries")}class Er{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){const n=t.uid||"";return new Er(e,n)}getOverlay(e,t){return Tr(e).get(wr(this.userId,t)).next(e=>e?yr(this.M,e):null)}saveOverlays(e,t,n){const s=[];return n.forEach((n,r)=>{const i=new ir(t,r);s.push(this.Xt(e,i))}),zs.waitFor(s)}removeOverlaysForBatchId(e,t,n){const s=new Set;t.forEach(e=>s.add(ys(e.getCollectionPath())));const r=[];return s.forEach(t=>{const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);r.push(Tr(e).Qt("collectionPathOverlayIndex",s))}),zs.waitFor(r)}getOverlaysForCollection(e,t,n){const s=bn(),r=ys(t),i=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Tr(e).qt("collectionPathOverlayIndex",i).next(e=>{for(const t of e){const e=yr(this.M,t);s.set(e.getKey(),e)}return s})}getOverlaysForCollectionGroup(e,t,n,s){const r=bn();let i;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Tr(e).Wt({index:"collectionGroupOverlayIndex",range:o},(e,t,n)=>{const o=yr(this.M,t);r.size()<s||o.largestBatchId===i?(r.set(o.getKey(),o),i=o.largestBatchId):n.done()}).next(()=>r)}Xt(e,t){return Tr(e).put(function(e,t,n){const[s,r,i]=wr(t,n.mutation.key);return{userId:t,collectionPath:r,documentId:i,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ts(e.Jt,n.mutation)}}(this.M,this.userId,t))}}function Tr(e){return nr(e,"documentOverlays")}class Sr{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(X(e.integerValue));else if("doubleValue"in e){const n=X(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),oe(n)?t.se(0):t.se(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ne(t,20),"string"==typeof n?t.ie(n):(t.ie(`${n.seconds||""}`),t.se(n.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Z(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ne(t,45),t.se(n.latitude||0),t.se(n.longitude||0)}else"mapValue"in e?xe(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):g()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const n=e.fields||{};this.ne(t,55);for(const s of Object.keys(n))this.re(s,t),this.te(n[s],t)}he(e,t){const n=e.values||[];this.ne(t,50);for(const s of n)this.te(s,t)}ae(e,t){this.ne(t,37),ue.fromName(e).path.forEach(e=>{this.ne(t,60),this.le(e,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function xr(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function _r(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const s=xr(255&e[n]);if(t+=s,8!==s)break}return t}(e);return Math.ceil(t/8)}Sr.fe=new Sr;class Dr{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this._e(n.value),n=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.ge(n.value),n=t.next();this.ye()}pe(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this._e(e);else if(e<2048)this._e(960|e>>>6),this._e(128|63&e);else if(t<"\ud800"||"\udbff"<t)this._e(480|e>>>12),this._e(128|63&e>>>6),this._e(128|63&e);else{const e=t.codePointAt(0);this._e(240|e>>>18),this._e(128|63&e>>>12),this._e(128|63&e>>>6),this._e(128|63&e)}}this.we()}Ie(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.ge(e);else if(e<2048)this.ge(960|e>>>6),this.ge(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.ge(480|e>>>12),this.ge(128|63&e>>>6),this.ge(128|63&e);else{const e=t.codePointAt(0);this.ge(240|e>>>18),this.ge(128|63&e>>>12),this.ge(128|63&e>>>6),this.ge(128|63&e)}}this.ye()}Te(e){const t=this.Ee(e),n=_r(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Re(e){const t=this.Ee(e),n=_r(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let s=1;s<t.length;++s)t[s]^=n?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class Nr{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Ar{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Cr{constructor(){this.De=new Dr,this.Ce=new Nr(this.De),this.xe=new Ar(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class kr{constructor(e,t,n,s){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=s}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new kr(this.indexId,this.documentKey,this.arrayValue,n)}}function Mr(e,t){let n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Vr(e.arrayValue,t.arrayValue))?n:0!==(n=Vr(e.directionalValue,t.directionalValue))?n:ue.comparator(e.documentKey,t.documentKey)}function Vr(e,t){for(let n=0;n<e.length&&n<t.length;++n){const s=e[n]-t[n];if(0!==s)return s}return e.length-t.length}class Rr{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const e=t;e.S()?this.Fe=e:this.Oe.push(e)}}$e(e){const t=Me(e);if(void 0!==t&&!this.Be(t))return!1;const n=Ve(e);let s=0,r=0;for(;s<n.length&&this.Be(n[s]);++s);if(s===n.length)return!0;if(void 0!==this.Fe){const e=n[s];if(!this.Le(this.Fe,e)||!this.Ue(this.Me[r++],e))return!1;++s}for(;s<n.length;++s){const e=n[s];if(r>=this.Me.length||!this.Ue(this.Me[r++],e))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Lr{constructor(){this.qe=new Fr}addToCollectionParentIndex(e,t){return this.qe.add(t),zs.resolve()}getCollectionParents(e,t){return zs.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return zs.resolve()}deleteFieldIndex(e,t){return zs.resolve()}getDocumentsMatchingTarget(e,t){return zs.resolve(null)}getFieldIndex(e,t){return zs.resolve(null)}getFieldIndexes(e,t){return zs.resolve([])}getNextCollectionGroupToUpdate(e){return zs.resolve(null)}updateCollectionGroup(e,t,n){return zs.resolve()}updateIndexEntries(e,t){return zs.resolve()}}class Fr{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new mn($.comparator),r=!s.has(n);return this.index[t]=s.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new mn($.comparator)).toArray()}}const Pr=new Uint8Array(0);class Or{constructor(e){this.user=e,this.Ge=new Fr,this.Ke=new ln(e=>Ge(e),(e,t)=>$e(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const n=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const r={collectionId:n,parent:ys(s)};return qr(e).put(r)}return zs.resolve()}getCollectionParents(e,t){const n=[],s=IDBKeyRange.bound([t,""],[P(t),""],!1,!0);return qr(e).qt(s).next(e=>{for(const s of e){if(s.collectionId!==t)break;n.push(Is(s.parent))}return n})}addFieldIndex(e,t){const n=Br(e),s=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);return delete s.indexId,n.add(s).next()}deleteFieldIndex(e,t){const n=Br(e),s=Gr(e),r=Ur(e);return n.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const n=Ur(e);let s=!0;const r=new Map;return zs.forEach(this.Qe(t),t=>this.getFieldIndex(e,t).next(e=>{s&&(s=!!e),r.set(t,e)})).next(()=>{if(s){let e=Sn();return zs.forEach(r,(s,r)=>{var i;d("IndexedDbIndexManager",`Using index ${i=s,`id=${i.indexId}|cg=${i.collectionGroup}|f=${i.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`} to execute ${Ge(t)}`);const o=function(e,t){const n=Me(s);if(void 0===n)return null;for(const s of je(e,n.fieldPath))switch(s.op){case"array-contains-any":return s.value.arrayValue.values||[];case"array-contains":return[s.value]}return null}(r),a=function(e,t){const n=new Map;for(const s of Ve(t))for(const t of je(e,s.fieldPath))switch(t.op){case"==":case"in":n.set(s.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(s.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(r,s),u=function(e,t){const n=[];let s=!0;for(const i of Ve(t)){let t,o=!0;for(const n of je(e,i.fieldPath)){let e,s=!0;switch(n.op){case"<":case"<=":e="nullValue"in(r=n.value)?le:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?we(re.empty(),ue.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:g();break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,s=!1;break;case"!=":case"not-in":e=le}_e(t,e)===e&&(t=e,o=s)}if(null!==e.startAt)for(let n=0;n<e.orderBy.length;++n)if(e.orderBy[n].field.isEqual(i.fieldPath)){const s=e.startAt.position[n];_e(t,s)===s&&(t=s,o=e.startAt.inclusive);break}if(void 0===t)return null;n.push(t),s&&(s=o)}var r;return new nt(n,s)}(r,s),c=function(e,t){const n=[];let s=!0;for(const i of Ve(t)){let t,o=!0;for(const n of je(e,i.fieldPath)){let e,s=!0;switch(n.op){case">=":case">":e="nullValue"in(r=n.value)?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?we(re.empty(),ue.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?ce:g(),s=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,s=!1;break;case"!=":case"not-in":e=ce}De(t,e)===e&&(t=e,o=s)}if(null!==e.endAt)for(let n=0;n<e.orderBy.length;++n)if(e.orderBy[n].field.isEqual(i.fieldPath)){const s=e.endAt.position[n];De(t,s)===s&&(t=s,o=e.endAt.inclusive);break}if(void 0===t)return null;n.push(t),s&&(s=o)}var r;return new nt(n,s)}(r,s),l=this.je(s,r,u),h=this.je(s,r,c),f=this.We(s,r,a),m=this.ze(s.indexId,o,l,!!u&&u.inclusive,h,!!c&&c.inclusive,f);return zs.forEach(m,s=>n.Kt(s,t.limit).next(t=>{t.forEach(t=>{e=e.add(new ue(Is(t.documentKey)))})}))}).next(()=>e)}return zs.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,n,s,r,i,o){const a=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=r?r.length:1),u=a/(null!=t?t.length:1),c=[];for(let l=0;l<a;++l){const a=t?this.He(t[l/u]):Pr,h=n?this.Je(e,a,n[l%u],s):this.Ye(e),d=r?this.Xe(e,a,r[l%u],i):this.Ye(e+1);c.push(...this.createRange(h,d,o.map(t=>this.Je(e,a,t,!0))))}return c}Je(e,t,n,s){const r=new kr(e,ue.empty(),t,n);return s?r:r.ke()}Xe(e,t,n,s){const r=new kr(e,ue.empty(),t,n);return s?r.ke():r}Ye(e){return new kr(e,ue.empty(),Pr,Pr)}getFieldIndex(e,t){const n=new Rr(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(e=>{const t=e.filter(e=>n.$e(e));return t.sort((e,t)=>t.fields.length-e.fields.length),t.length>0?t[0]:null})}Ze(e,t){const n=new Cr;for(const s of Ve(e)){const e=t.data.field(s.fieldPath);if(null==e)return null;const r=n.Ne(s.kind);Sr.fe.Zt(e,r)}return n.Se()}He(e){const t=new Cr;return Sr.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,n){if(null===n)return[];let s=[];s.push(new Cr);let r=0;for(const i of Ve(e)){const e=n[r++];for(const n of s)if(this.tn(t,i.fieldPath)&&Ie(e))s=this.en(s,i,e);else{const t=n.Ne(i.kind);Sr.fe.Zt(e,t)}}return this.nn(s)}je(e,t,n){return null==n?null:this.We(e,t,n.position)}nn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Se();return t}en(e,t,n){const s=[...e],r=[];for(const i of n.arrayValue.values||[])for(const e of s){const n=new Cr;n.seed(e.Se()),Sr.fe.Zt(i,n.Ne(t.kind)),r.push(n)}return r}tn(e,t){return!!e.filters.find(e=>e instanceof Qe&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=Br(e),s=Gr(e);return(t?n.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.qt()).next(e=>{const t=[];return zs.forEach(e,e=>s.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new Le(t.sequenceNumber,new Oe(dr(t.readTime),new ue(Is(t.documentKey)),t.largestBatchId)):Le.empty(),s=e.fields.map(([e,t])=>new Re(j.fromServerFormat(e),t));return new ke(e.indexId,e.collectionGroup,s,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:L(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const s=Br(e),r=Gr(e);return this.sn(e).next(e=>s.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>zs.forEach(t,t=>r.put(function(e,t,n,s){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:hr(s.readTime),documentKey:ys(s.documentKey.path),largestBatchId:s.largestBatchId}}(t.indexId,this.user,e,n)))))}updateIndexEntries(e,t){const n=new Map;return zs.forEach(t,(t,s)=>{const r=n.get(t.collectionGroup);return(r?zs.resolve(r):this.getFieldIndexes(e,t.collectionGroup)).next(r=>(n.set(t.collectionGroup,r),zs.forEach(r,n=>this.rn(e,t,n).next(t=>{const r=this.on(s,n);return t.isEqual(r)?zs.resolve():this.un(e,s,t,r)}))))})}an(e,t,n){return Ur(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,documentKey:ys(t.key.path)})}cn(e,t,n){return Ur(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,ys(t.key.path)])}rn(e,t,n){const s=Ur(e);let r=new mn(Mr);return s.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,ys(t.path)])},(e,s)=>{r=r.add(new kr(n.indexId,t,s.arrayValue,s.directionalValue))}).next(()=>r)}on(e,t){let n=new mn(Mr);const s=this.Ze(t,e);if(null==s)return n;const r=Me(t);if(null!=r){const i=e.data.field(r.fieldPath);if(Ie(i))for(const r of i.arrayValue.values||[])n=n.add(new kr(t.indexId,e.key,this.He(r),s))}else n=n.add(new kr(t.indexId,e.key,Pr,s));return n}un(e,t,n,s){d("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const r=[];return function(e,t,n,s,r){const i=e.getIterator(),o=t.getIterator();let a=gn(i),u=gn(o);for(;a||u;){let e=!1,t=!1;if(a&&u){const s=n(a,u);s<0?t=!0:s>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(s(u),u=gn(o)):t?(r(a),a=gn(i)):(a=gn(i),u=gn(o))}}(n,s,Mr,n=>{r.push(this.an(e,t,n))},n=>{r.push(this.cn(e,t,n))}),zs.waitFor(r)}sn(e){let t=1;return Gr(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,s)=>{s.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>Mr(e,t)).filter((e,t,n)=>!t||0!==Mr(e,n[t-1]));const s=[];s.push(e);for(const i of n){const n=Mr(i,e),r=Mr(i,t);if(0===n)s[0]=e.ke();else if(n>0&&r<0)s.push(i),s.push(i.ke());else if(r>0)break}s.push(t);const r=[];for(let i=0;i<s.length;i+=2)r.push(IDBKeyRange.bound([s[i].indexId,this.uid,s[i].arrayValue,s[i].directionalValue,""],[s[i+1].indexId,this.uid,s[i+1].arrayValue,s[i+1].directionalValue,""]));return r}}function qr(e){return nr(e,"collectionParents")}function Ur(e){return nr(e,"indexEntries")}function Br(e){return nr(e,"indexConfiguration")}function Gr(e){return nr(e,"indexState")}const Kr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $r{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new $r(e,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function zr(e,t,n){const s=e.store("mutations"),r=e.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=s.Wt({range:o},(e,t,n)=>(a++,n.delete()));i.push(u.next(()=>{y(1===a)}));const c=[];for(const l of n.mutations){const e=Ts(t,l.key.path,n.batchId);i.push(r.delete(e)),c.push(l.key)}return zs.waitFor(i).next(()=>c)}function jr(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw g();t=e.noDocument}return JSON.stringify(t).length}$r.DEFAULT_COLLECTION_PERCENTILE=10,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$r.DEFAULT=new $r(41943040,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$r.DISABLED=new $r(-1,0,0);class Qr{constructor(e,t,n,s){this.userId=e,this.M=t,this.indexManager=n,this.referenceDelegate=s,this.hn={}}static Yt(e,t,n,s){y(""!==e.uid);const r=e.isAuthenticated()?e.uid:"";return new Qr(r,t,n,s)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hr(e).Wt({index:"userMutationsIndex",range:n},(e,n,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,n,s){const r=Yr(e),i=Hr(e);return i.add({}).next(o=>{y("number"==typeof o);const a=new sr(o,t,n,s),u=function(e,t,n){const s=n.baseMutations.map(t=>ts(e.Jt,t)),r=n.mutations.map(t=>ts(e.Jt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:s,mutations:r}}(this.M,this.userId,a),c=[];let l=new mn((e,t)=>L(e.canonicalString(),t.canonicalString()));for(const e of s){const t=Ts(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),c.push(i.put(u)),c.push(r.put(t,Ss))}return l.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.hn[o]=a.keys()}),zs.waitFor(c).next(()=>a)})}lookupMutationBatch(e,t){return Hr(e).get(t).next(e=>e?(y(e.userId===this.userId),fr(this.M,e)):null)}ln(e,t){return this.hn[t]?zs.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.hn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=IDBKeyRange.lowerBound([this.userId,n]);let r=null;return Hr(e).Wt({index:"userMutationsIndex",range:s},(e,t,s)=>{t.userId===this.userId&&(y(t.batchId>=n),r=fr(this.M,t)),s.done()}).next(()=>r)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Hr(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(e,t,s)=>{n=t.batchId,s.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hr(e).qt("userMutationsIndex",t).next(e=>e.map(e=>fr(this.M,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Es(this.userId,t.path),s=IDBKeyRange.lowerBound(n),r=[];return Yr(e).Wt({range:s},(n,s,i)=>{const[o,a,u]=n,c=Is(a);if(o===this.userId&&t.path.isEqual(c))return Hr(e).get(u).next(e=>{if(!e)throw g();y(e.userId===this.userId),r.push(fr(this.M,e))});i.done()}).next(()=>r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mn(L);const s=[];return t.forEach(t=>{const r=Es(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=Yr(e).Wt({range:i},(e,s,r)=>{const[i,o,a]=e,u=Is(o);i===this.userId&&t.path.isEqual(u)?n=n.add(a):r.done()});s.push(o)}),zs.waitFor(s).next(()=>this.fn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1,r=Es(this.userId,n),i=IDBKeyRange.lowerBound(r);let o=new mn(L);return Yr(e).Wt({range:i},(e,t,r)=>{const[i,a,u]=e,c=Is(a);i===this.userId&&n.isPrefixOf(c)?c.length===s&&(o=o.add(u)):r.done()}).next(()=>this.fn(e,o))}fn(e,t){const n=[],s=[];return t.forEach(t=>{s.push(Hr(e).get(t).next(e=>{if(null===e)throw g();y(e.userId===this.userId),n.push(fr(this.M,e))}))}),zs.waitFor(s).next(()=>n)}removeMutationBatch(e,t){return zr(e.Ht,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),zs.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return zs.resolve();const n=IDBKeyRange.lowerBound([this.userId]),s=[];return Yr(e).Wt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Is(e[1]);s.push(t)}else n.done()}).next(()=>{y(0===s.length)})})}containsKey(e,t){return Wr(e,this.userId,t)}_n(e){return Jr(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Wr(e,t,n){const s=Es(t,n.path),r=s[1],i=IDBKeyRange.lowerBound(s);let o=!1;return Yr(e).Wt({range:i,jt:!0},(e,n,s)=>{const[i,a,u]=e;i===t&&a===r&&(o=!0),s.done()}).next(()=>o)}function Hr(e){return nr(e,"mutations")}function Yr(e){return nr(e,"documentMutations")}function Jr(e){return nr(e,"mutationQueues")}class Xr{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new Xr(0)}static gn(){return new Xr(-1)}}class Zr{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const n=new Xr(t.highestTargetId);return t.highestTargetId=n.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(e=>q.fromTimestamp(new O(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.yn(e).next(s=>(s.highestListenSequenceNumber=t,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.pn(e,s)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(n=>(n.targetCount+=1,this.Tn(t,n),this.pn(e,n))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ei(e).delete(t.targetId)).next(()=>this.yn(e)).next(t=>(y(t.targetCount>0),t.targetCount-=1,this.pn(e,t)))}removeTargets(e,t,n){let s=0;const r=[];return ei(e).Wt((i,o)=>{const a=mr(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(s++,r.push(this.removeTargetData(e,a)))}).next(()=>zs.waitFor(r)).next(()=>s)}forEachTarget(e,t){return ei(e).Wt((e,n)=>{const s=mr(n);t(s)})}yn(e){return ti(e).get("targetGlobalKey").next(e=>(y(null!==e),e))}pn(e,t){return ti(e).put("targetGlobalKey",t)}In(e,t){return ei(e).put(pr(this.M,t))}Tn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.yn(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Ge(t),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let r=null;return ei(e).Wt({range:s,index:"queryTargetsIndex"},(e,n,s)=>{const i=mr(n);$e(t,i.target)&&(r=i,s.done())}).next(()=>r)}addMatchingKeys(e,t,n){const s=[],r=ni(e);return t.forEach(t=>{const i=ys(t.path);s.push(r.put({targetId:n,path:i})),s.push(this.referenceDelegate.addReference(e,n,t))}),zs.waitFor(s)}removeMatchingKeys(e,t,n){const s=ni(e);return zs.forEach(t,t=>{const r=ys(t.path);return zs.waitFor([s.delete([n,r]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=ni(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),s=ni(e);let r=Sn();return s.Wt({range:n,jt:!0},(e,t,n)=>{const s=Is(e[1]),i=new ue(s);r=r.add(i)}).next(()=>r)}containsKey(e,t){const n=ys(t.path),s=IDBKeyRange.bound([n],[P(n)],!1,!0);let r=0;return ni(e).Wt({index:"documentTargetsIndex",jt:!0,range:s},([e,t],n,s)=>{0!==e&&(r++,s.done())}).next(()=>r>0)}Et(e,t){return ei(e).get(t).next(e=>e?mr(e):null)}}function ei(e){return nr(e,"targets")}function ti(e){return nr(e,"targetGlobal")}function ni(e){return nr(e,"targetDocuments")}async function si(e){if(e.code!==I.FAILED_PRECONDITION||e.message!==Ks)throw e;d("LocalStore","Unexpectedly lost primary lease")}function ri([e,t],[n,s]){const r=L(e,n);return 0===r?L(t,s):r}class ii{constructor(e){this.En=e,this.buffer=new mn(ri),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ri(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oi{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){const t=this.Pn?3e5:6e4;d("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vn=null,this.Pn=!0;try{await e.collectGarbage(this.garbageCollector)}catch(e){Ys(e)?d("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await si(e)}await this.vn(e)})}}class ai{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return zs.resolve(M.A);const n=new ii(t);return this.Sn.forEachTarget(e,e=>n.bn(e.sequenceNumber)).next(()=>this.Sn.Cn(e,e=>n.bn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Sn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(d("LruGarbageCollector","Garbage collection skipped; disabled"),zs.resolve(Kr)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(d("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kr):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let n,r,i,o,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(d("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(s=>(n=s,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),l()<=s.LogLevel.DEBUG&&d("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${r} in `+(a-o)+"ms\n"+`\tRemoved ${i} targets in `+(u-a)+"ms\n"+`\tRemoved ${e} documents in `+(c-u)+"ms\n"+`Total Duration: ${c-h}ms`),zs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class ui{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new ai(e,t)}(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Nn(e){let t=0;return this.Cn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(e,n)=>t(n))}addReference(e,t,n){return ci(e,n)}removeReference(e,t,n){return ci(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return ci(e,t)}Mn(e,t){return function(e,t){let n=!1;return Jr(e).zt(s=>Wr(e,s,t).next(e=>(e&&(n=!0),zs.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let r=0;return this.kn(e,(i,o)=>{if(o<=t){const t=this.Mn(e,i).next(t=>{if(!t)return r++,n.getEntry(e,i).next(()=>(n.removeEntry(i,q.min()),ni(e).delete([0,ys(i.path)])))});s.push(t)}}).next(()=>zs.waitFor(s)).next(()=>n.apply(e)).next(()=>r)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return ci(e,t)}kn(e,t){const n=ni(e);let s,r=M.A;return n.Wt({index:"documentTargetsIndex"},([e,n],{path:i,sequenceNumber:o})=>{0===e?(r!==M.A&&t(new ue(Is(s)),r),r=o,s=i):r=M.A}).next(()=>{r!==M.A&&t(new ue(Is(s)),r)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ci(e,t){return ni(e).put(function(e,t){return{targetId:0,path:ys(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class li{constructor(){this.changes=new ln(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ce.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?zs.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hi{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return mi(e).put(n)}removeEntry(e,t,n){return mi(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],lr(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.On(e,n)))}getEntry(e,t){let n=Ce.newInvalidDocument(t);return mi(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(pi(t))},(e,s)=>{n=this.Fn(t,s)}).next(()=>n)}$n(e,t){let n={size:0,document:Ce.newInvalidDocument(t)};return mi(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(pi(t))},(e,s)=>{n={document:this.Fn(t,s),size:jr(s)}}).next(()=>n)}getEntries(e,t){let n=wn();return this.Bn(e,t,(e,t)=>{const s=this.Fn(e,t);n=n.insert(e,s)}).next(()=>n)}Ln(e,t){let n=wn(),s=new hn(ue.comparator);return this.Bn(e,t,(e,t)=>{const r=this.Fn(e,t);n=n.insert(e,r),s=s.insert(e,jr(t))}).next(()=>({documents:n,Un:s}))}Bn(e,t,n){if(t.isEmpty())return zs.resolve();let s=new mn(yi);t.forEach(e=>s=s.add(e));const r=IDBKeyRange.bound(pi(s.first()),pi(s.last())),i=s.getIterator();let o=i.getNext();return mi(e).Wt({index:"documentKeyIndex",range:r},(e,t,s)=>{const r=ue.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&yi(o,r)<0;)n(o,null),o=i.getNext();o&&o.isEqual(r)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?s.Ut(pi(o)):s.done()}).next(()=>{for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})}getAllFromCollection(e,t,n){const s=[t.popLast().toArray(),t.lastSegment(),lr(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],r=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mi(e).qt(IDBKeyRange.bound(s,r,!0)).next(e=>{let t=wn();for(const n of e){const e=this.Fn(ue.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);t=t.insert(e.key,e)}return t})}getAllFromCollectionGroup(e,t,n,s){let r=wn();const i=gi(t,n),o=gi(t,Oe.max());return mi(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,o,!0)},(e,t,n)=>{const i=this.Fn(ue.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(r=r.insert(i.key,i)).size===s&&n.done()}).next(()=>r)}newChangeBuffer(e){return new di(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return fi(e).get("remoteDocumentGlobalKey").next(e=>(y(!!e),e))}On(e,t){return fi(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const e=ur(this.M,t);if(!e.isNoDocument()||!e.version.isEqual(q.min()))return e}return Ce.newInvalidDocument(e)}}class di extends li{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new ln(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,s=new mn((e,t)=>L(e.canonicalString(),t.canonicalString()));return this.changes.forEach((r,i)=>{const o=this.Gn.get(r);if(t.push(this.qn.removeEntry(e,r,o.readTime)),i.isValidDocument()){const a=cr(this.qn.M,i);s=s.add(r.path.popLast());const u=jr(a);n+=u-o.size,t.push(this.qn.addEntry(e,r,a))}else if(n-=o.size,this.trackRemovals){const n=cr(this.qn.M,i.convertToNoDocument(q.min()));t.push(this.qn.addEntry(e,r,n))}}),s.forEach(n=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.qn.updateMetadata(e,n)),zs.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(e=>(this.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:e,Un:t})=>(t.forEach((t,n)=>{this.Gn.set(t,{size:n,readTime:e.get(t).readTime})}),e))}}function fi(e){return nr(e,"remoteDocumentGlobal")}function mi(e){return nr(e,"remoteDocumentsV14")}function pi(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function gi(e,t){const n=t.documentKey.path.toArray();return[e,lr(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function yi(e,t){const n=e.path.length-t.path.length;return 0!==n?n:ue.comparator(e,t)}class wi{constructor(e){this.M=e}kt(e,t,n,s){const r=new js("createOrUpgrade",t);n<1&&s>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bs,{unique:!0}),e.createObjectStore("documentMutations")}(e),vi(e),function(e){e.createObjectStore("remoteDocuments")}(e));let i=zs.resolve();return n<3&&s>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),vi(e)),i=i.next(()=>(function(e){const t=r.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:q.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)})())),n<4&&s>=4&&(0!==n&&(i=i.next(()=>(function(e,t){return t.store("mutations").qt().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bs,{unique:!0});const s=t.store("mutations"),r=n.map(e=>s.put(e));return zs.waitFor(r)})})(e,r))),i=i.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&s>=5&&(i=i.next(()=>this.Kn(r))),n<6&&s>=6&&(i=i.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(r)))),n<7&&s>=7&&(i=i.next(()=>this.jn(r))),n<8&&s>=8&&(i=i.next(()=>this.Wn(e,r))),n<9&&s>=9&&(i=i.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&s>=10&&(i=i.next(()=>this.zn(r))),n<11&&s>=11&&(i=i.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(i=i.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Fs});t.createIndex("collectionPathOverlayIndex",Ps,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Os,{unique:!1})}(e)})),n<13&&s>=13&&(i=i.next(()=>(function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:xs});t.createIndex("documentKeyIndex",_s),t.createIndex("collectionGroupIndex",Ds)})(e)).next(()=>this.Hn(e,r)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(i=i.next(()=>{!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Ms}).createIndex("sequenceNumberIndex",Vs,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Rs}).createIndex("documentKeyIndex",Ls,{unique:!1})}(e)})),i}Qn(e){let t=0;return e.store("remoteDocuments").Wt((e,n)=>{t+=jr(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Kn(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.qt().next(t=>zs.forEach(t,t=>{const s=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.qt("userMutationsIndex",s).next(n=>zs.forEach(n,n=>{y(n.userId===t.userId);const s=fr(this.M,n);return zr(e,t.userId,s).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const s=[];return n.Wt((n,r)=>{const i=new $(n),o=function(e){return[0,ys(i)]}();s.push(t.get(o).next(n=>n?zs.resolve():(n=>t.put({targetId:0,path:ys(n),sequenceNumber:e.highestListenSequenceNumber}))(i)))}).next(()=>zs.waitFor(s))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:ks});const n=t.store("collectionParents"),s=new Fr,r=e=>{if(s.add(e)){const t=e.lastSegment(),s=e.popLast();return n.put({collectionId:t,parent:ys(s)})}};return t.store("remoteDocuments").Wt({jt:!0},(e,t)=>{const n=new $(e);return r(n.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([e,t,n],s)=>{const i=Is(t);return r(i.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((e,n)=>{const s=mr(n),r=pr(this.M,s);return t.put(r)})}Hn(e,t){const n=t.store("remoteDocuments"),s=[];return n.Wt((e,n)=>{const r=t.store("remoteDocumentsV14"),i=(o=n,o.document?new ue($.fromString(o.document.name).popFirst(5)):o.noDocument?ue.fromSegments(o.noDocument.path):o.unknownDocument?ue.fromSegments(o.unknownDocument.path):g()).path.toArray();var o;const a={prefixPath:i.slice(0,i.length-2),collectionGroup:i[i.length-2],documentId:i[i.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};s.push(r.put(a))}).next(()=>zs.waitFor(s))}}function vi(e){e.createObjectStore("targetDocuments",{keyPath:As}).createIndex("documentTargetsIndex",Cs,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ns,{unique:!0}),e.createObjectStore("targetGlobal")}const Ii="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class bi{constructor(e,t,n,s,r,i,o,a,u,c,l=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Jn=r,this.window=i,this.document=o,this.Yn=u,this.Xn=c,this.Zn=l,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=(e=>Promise.resolve()),!bi.vt())throw new b(I.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ui(this,s),this.cs=t+"main",this.M=new ar(a),this.hs=new Qs(this.cs,this.Zn,new wi(this.M)),this.ls=new Zr(this.referenceDelegate,this.M),this.fs=function(e){return new hi(e)}(this.M),this.ds=new vr,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===c&&f("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new b(I.FAILED_PRECONDITION,Ii);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new M(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){return this.us=(async t=>{if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget(async()=>{this.started&&await this.ws()}))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ti(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(e=>{e||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Ys(e))return d("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return d("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Ei(e).get("owner").next(e=>zs.resolve(this.bs(e)))}Ps(e){return Ti(e).delete(this.clientId)}async Vs(){if(this.isPrimary&&!this.vs(this.os,18e5)){this.os=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=nr(e,"clientMetadata");return t.qt().next(e=>{const n=this.Ss(e,18e5),s=e.filter(e=>-1===n.indexOf(e));return zs.forEach(s,e=>t.delete(e.clientId)).next(()=>s)})}).catch(()=>[]);if(this._s)for(const t of e)this._s.removeItem(this.Ds(t.clientId))}}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?zs.resolve(!0):Ei(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new b(I.FAILED_PRECONDITION,Ii);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ti(e).qt().next(e=>void 0===this.Ss(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,s=this.networkEnabled===e.networkEnabled;if(t||n&&s)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&d("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.es=!1,this.xs(),this.rs&&(this.rs.cancel(),this.rs=null),this.Ns(),this.ks(),await this.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new tr(e,M.A);return this.As(t).next(()=>this.Ps(t))}),this.hs.close(),this.Ms()}Ss(e,t){return e.filter(e=>this.vs(e.updateTimeMs,t)&&!this.Cs(e.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Ti(e).qt().next(e=>this.Ss(e,18e5).map(e=>e.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Qr.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new Or(e)}getDocumentOverlayCache(e){return Er.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,n){d("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",r=14===(i=this.Zn)?Gs:13===i?Bs:12===i?Us:11===i?qs:void g();var i;let o;return this.hs.runTransaction(e,s,r,s=>(o=new tr(s,this.ts?this.ts.next():M.A),"readwrite-primary"===t?this.Ts(o).next(e=>!!e||this.Es(o)).next(t=>{if(!t)throw f(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new b(I.FAILED_PRECONDITION,Ks);return n(o)}).next(e=>this.Rs(o).next(()=>e)):this.Fs(o).next(()=>n(o)))).then(e=>(o.raiseOnCommittedEvent(),e))}Fs(e){return Ei(e).get("owner").next(e=>{if(null!==e&&this.vs(e.leaseTimestampMs,5e3)&&!this.Cs(e.ownerId)&&!this.bs(e)&&!(this.Xn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new b(I.FAILED_PRECONDITION,Ii)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ei(e).put("owner",t)}static vt(){return Qs.vt()}As(e){const t=Ei(e);return t.get("owner").next(e=>this.bs(e)?(d("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):zs.resolve())}vs(e,t){const n=Date.now();return!(e<n-t||e>n&&(f(`Detected an update time that is in the future: ${e} > ${n}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=(()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))}),this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=(()=>{this.xs(),(0,r.isSafari)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())}),this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const n=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return d("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return f("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){f("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ei(e){return nr(e,"owner")}function Ti(e){return nr(e,"clientMetadata")}function Si(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class xi{constructor(e,t,n){this.fs=e,this.$s=t,this.indexManager=n}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Ls(e,t,n))}Ls(e,t,n){return this.fs.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}Us(e,t){e.forEach((e,n)=>{for(const s of t)s.applyToLocalView(n)})}qs(e,t){return this.fs.getEntries(e,t).next(t=>this.Gs(e,t).next(()=>t))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.Us(t,e))}Ks(e,t,n){return function(e){return ue.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):mt(t)?this.js(e,t,n):this.Ws(e,t,n)}Qs(e,t){return this.Bs(e,new ue(t)).next(e=>{let t=In();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}js(e,t,n){const s=t.collectionGroup;let r=In();return this.indexManager.getCollectionParents(e,s).next(i=>zs.forEach(i,i=>{const o=function(e,t){return new at(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(s));return this.Ws(e,o,n).next(e=>{e.forEach((e,t)=>{r=r.insert(e,t)})})}).next(()=>r))}Ws(e,t,n){let s;return this.fs.getAllFromCollection(e,t.path,n).next(n=>(s=n,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(e=>{for(const t of e)for(const e of t.mutations){const n=e.key;let r=s.get(n);null==r&&(r=Ce.newInvalidDocument(n),s=s.insert(n,r)),Qt(e,r,t.localWriteTime),r.isFoundDocument()||(s=s.remove(n))}}).next(()=>(s.forEach((e,n)=>{bt(t,n)||(s=s.remove(e))}),s))}}class _i{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.zs=n,this.Hs=s}static Js(e,t){let n=Sn(),s=Sn();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new _i(e,t.fromCache,n,s)}}class Di{Ys(e){this.Xs=e}Ks(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(q.min())?this.Zs(e,t):this.Xs.qs(e,r).next(i=>{const o=this.ti(t,i);return(lt(t)||ht(t))&&this.ei(t.limitType,o,r,n)?this.Zs(e,t):(l()<=s.LogLevel.DEBUG&&d("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),It(t)),this.Xs.Ks(e,t,Fe(n,-1)).next(e=>(o.forEach(t=>{e=e.insert(t.key,t)}),e)))})}ti(e,t){let n=new mn(Tt(e));return t.forEach((t,s)=>{bt(e,s)&&(n=n.add(s))}),n}ei(e,t,n,s){if(n.size!==t.size)return!0;const r="F"===e?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Zs(e,t){return l()<=s.LogLevel.DEBUG&&d("QueryEngine","Using full collection scan to execute query:",It(t)),this.Xs.Ks(e,t,Oe.min())}}class Ni{constructor(e,t,n,s){this.persistence=e,this.ni=t,this.M=s,this.si=new hn(L),this.ii=new ln(e=>Ge(e),$e),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(n)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new xi(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function Ai(e,t,n,s){return new Ni(e,t,n,s)}async function Ci(e,t){const n=v(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let s;return n.$s.getAllMutationBatches(e).next(r=>(s=r,n.ui(t),n.$s.getAllMutationBatches(e))).next(t=>{const r=[],i=[];let o=Sn();for(const e of s){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.ai.qs(e,o).next(e=>({ci:e,removedBatchIds:r,addedBatchIds:i}))})})}function ki(e,t){const n=v(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const s=t.batch.keys(),r=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,s){const r=n.batch,i=r.keys();let o=zs.resolve();return i.forEach(e=>{o=o.next(()=>s.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);y(null!==i),t.version.compareTo(i)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),s.addEntry(t)))})}),o.next(()=>e.$s.removeMutationBatch(t,r))}(n,e,t,r).next(()=>r.apply(e)).next(()=>n.$s.performConsistencyCheck(e)).next(()=>n.ai.qs(e,s))})}function Mi(e){const t=v(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.ls.getLastRemoteSnapshotVersion(e))}function Vi(e,t){const n=v(e),s=t.snapshotVersion;let r=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.oi.newChangeBuffer({trackRemovals:!0});r=n.si;const o=[];t.targetChanges.forEach((i,a)=>{const u=r.get(a);if(!u)return;o.push(n.ls.removeMatchingKeys(e,i.removedDocuments,a).next(()=>n.ls.addMatchingKeys(e,i.addedDocuments,a)));let c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?c=c.withResumeToken(H.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,s)),r=r.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,i)&&o.push(n.ls.updateTargetData(e,c))});let a=wn();if(t.documentUpdates.forEach(s=>{t.resolvedLimboDocuments.has(s)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,s))}),o.push(Ri(e,i,t.documentUpdates).next(e=>{a=e})),!s.isEqual(q.min())){const t=n.ls.getLastRemoteSnapshotVersion(e).next(t=>n.ls.setTargetsMetadata(e,e.currentSequenceNumber,s));o.push(t)}return zs.waitFor(o).next(()=>i.apply(e)).next(()=>n.ai.Gs(e,a)).next(()=>a)}).then(e=>(n.si=r,e))}function Ri(e,t,n){let s=Sn();return n.forEach(e=>s=s.add(e)),t.getEntries(e,s).next(e=>{let s=wn();return n.forEach((n,r)=>{const i=e.get(n);r.isNoDocument()&&r.version.isEqual(q.min())?(t.removeEntry(n,r.readTime),s=s.insert(n,r)):!i.isValidDocument()||r.version.compareTo(i.version)>0||0===r.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(r),s=s.insert(n,r)):d("LocalStore","Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",r.version)}),s})}function Li(e,t){const n=v(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.$s.getNextMutationBatchAfterBatchId(e,t)))}function Fi(e,t){const n=v(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let s;return n.ls.getTargetData(e,t).next(r=>r?(s=r,zs.resolve(s)):n.ls.allocateTargetId(e).next(r=>(s=new or(t,r,0,e.currentSequenceNumber),n.ls.addTargetData(e,s).next(()=>s))))}).then(e=>{const s=n.si.get(e.targetId);return(null===s||e.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e})}async function Pi(e,t,n){const s=v(e),r=s.si.get(t),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,e=>s.persistence.referenceDelegate.removeTarget(e,r))}catch(e){if(!Ys(e))throw e;d("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}s.si=s.si.remove(t),s.ii.delete(r.target)}function Oi(e,t,n){const s=v(e);let r=q.min(),i=Sn();return s.persistence.runTransaction("Execute query","readonly",e=>(function(e,t,n){const s=v(e),r=s.ii.get(n);return void 0!==r?zs.resolve(s.si.get(r)):s.ls.getTargetData(t,n)})(s,e,gt(t)).next(t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,s.ls.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>s.ni.Ks(e,t,n?r:q.min(),n?i:Sn())).next(e=>(Bi(s,Et(t),e),{documents:e,hi:i})))}function qi(e,t){const n=v(e),s=v(n.ls),r=n.si.get(t);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",e=>s.Et(e,t).next(e=>e?e.target:null))}function Ui(e,t){const n=v(e),s=n.ri.get(t)||q.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.oi.getAllFromCollectionGroup(e,t,Fe(s,-1),Number.MAX_SAFE_INTEGER)).then(e=>(Bi(n,t,e),e))}function Bi(e,t,n){let s=q.min();n.forEach((e,t)=>{t.readTime.compareTo(s)>0&&(s=t.readTime)}),e.ri.set(t,s)}async function Gi(e,t,n,s){const r=v(e);let i=Sn(),o=wn();for(const c of n){const e=t.li(c.metadata.name);c.document&&(i=i.add(e));const n=t.fi(c);n.setReadTime(t.di(c.metadata.readTime)),o=o.insert(e,n)}const a=r.oi.newChangeBuffer({trackRemovals:!0}),u=await Fi(r,function(e){return gt(ct($.fromString(`__bundle__/docs/${e}`)))}(s));return r.persistence.runTransaction("Apply bundle documents","readwrite",e=>Ri(e,a,o).next(t=>(a.apply(e),t)).next(t=>r.ls.removeMatchingKeysForTargetId(e,u.targetId).next(()=>r.ls.addMatchingKeys(e,i,u.targetId)).next(()=>r.ai.Gs(e,t)).next(()=>t)))}async function Ki(e,t,n=Sn()){const s=await Fi(e,gt(gr(t.bundledQuery))),r=v(e);return r.persistence.runTransaction("Save named query","readwrite",e=>{const i=Gn(t.readTime);if(s.snapshotVersion.compareTo(i)>=0)return r.ds.saveNamedQuery(e,t);const o=s.withResumeToken(H.EMPTY_BYTE_STRING,i);return r.si=r.si.insert(o.targetId,o),r.ls.updateTargetData(e,o).next(()=>r.ls.removeMatchingKeysForTargetId(e,s.targetId)).next(()=>r.ls.addMatchingKeys(e,n,s.targetId)).next(()=>r.ds.saveNamedQuery(e,t))})}class $i{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return zs.resolve(this._i.get(t))}saveBundleMetadata(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:Gn(n.createTime)}),zs.resolve()}getNamedQuery(e,t){return zs.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:gr(e.bundledQuery),readTime:Gn(e.readTime)}}(t)),zs.resolve()}}class zi{constructor(){this.overlays=new hn(ue.comparator),this.mi=new Map}getOverlay(e,t){return zs.resolve(this.overlays.get(t))}saveOverlays(e,t,n){return n.forEach((n,s)=>{this.Xt(e,t,s)}),zs.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.mi.get(n);return void 0!==s&&(s.forEach(e=>this.overlays=this.overlays.remove(e)),this.mi.delete(n)),zs.resolve()}getOverlaysForCollection(e,t,n){const s=bn(),r=t.length+1,i=new ue(t.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const e=o.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===r&&e.largestBatchId>n&&s.set(e.getKey(),e)}return zs.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let r=new hn((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=bn(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=bn(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=s)););return zs.resolve(o)}Xt(e,t,n){if(null===n)return;const s=this.overlays.get(n.key);if(null!==s){const e=this.mi.get(s.largestBatchId).delete(n.key);this.mi.set(s.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ir(t,n));let r=this.mi.get(t);void 0===r&&(r=Sn(),this.mi.set(t,r)),this.mi.set(t,r.add(n.key))}}class ji{constructor(){this.gi=new mn(Qi.yi),this.pi=new mn(Qi.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const n=new Qi(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}Ti(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Ei(new Qi(e,t))}Ai(e,t){e.forEach(e=>this.removeReference(e,t))}Ri(e){const t=new ue(new $([])),n=new Qi(t,e),s=new Qi(t,e+1),r=[];return this.pi.forEachInRange([n,s],e=>{this.Ei(e),r.push(e.key)}),r}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new ue(new $([])),n=new Qi(t,e),s=new Qi(t,e+1);let r=Sn();return this.pi.forEachInRange([n,s],e=>{r=r.add(e.key)}),r}containsKey(e){const t=new Qi(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Qi{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return ue.comparator(e.key,t.key)||L(e.Vi,t.Vi)}static Ii(e,t){return L(e.Vi,t.Vi)||ue.comparator(e.key,t.key)}}class Wi{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new mn(Qi.yi)}checkEmpty(e){return zs.resolve(0===this.$s.length)}addMutationBatch(e,t,n,s){const r=this.vi;this.vi++,this.$s.length>0&&this.$s[this.$s.length-1];const i=new sr(r,t,n,s);this.$s.push(i);for(const o of s)this.Si=this.Si.add(new Qi(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return zs.resolve(i)}lookupMutationBatch(e,t){return zs.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.Ci(n),r=s<0?0:s;return zs.resolve(this.$s.length>r?this.$s[r]:null)}getHighestUnacknowledgedBatchId(){return zs.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return zs.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Qi(t,0),s=new Qi(t,Number.POSITIVE_INFINITY),r=[];return this.Si.forEachInRange([n,s],e=>{const t=this.Di(e.Vi);r.push(t)}),zs.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mn(L);return t.forEach(e=>{const t=new Qi(e,0),s=new Qi(e,Number.POSITIVE_INFINITY);this.Si.forEachInRange([t,s],e=>{n=n.add(e.Vi)})}),zs.resolve(this.xi(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let r=n;ue.isDocumentKey(r)||(r=r.child(""));const i=new Qi(new ue(r),0);let o=new mn(L);return this.Si.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===s&&(o=o.add(e.Vi)),!0)},i),zs.resolve(this.xi(o))}xi(e){const t=[];return e.forEach(e=>{const n=this.Di(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){y(0===this.Ni(t.batchId,"removed")),this.$s.shift();let n=this.Si;return zs.forEach(t.mutations,s=>{const r=new Qi(s.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Si=n})}dn(e){}containsKey(e,t){const n=new Qi(t,0),s=this.Si.firstAfterOrEqual(n);return zs.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.$s.length,zs.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class Hi{constructor(e){this.ki=e,this.docs=new hn(ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),r=s?s.size:0,i=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return zs.resolve(n?n.document.mutableCopy():Ce.newInvalidDocument(t))}getEntries(e,t){let n=wn();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ce.newInvalidDocument(e))}),zs.resolve(n)}getAllFromCollection(e,t,n){let s=wn();const r=new ue(t.child("")),i=this.docs.getIteratorFrom(r);for(;i.hasNext();){const{key:e,value:{document:r}}=i.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||qe(Pe(r),n)<=0||(s=s.insert(r.key,r.mutableCopy()))}return zs.resolve(s)}getAllFromCollectionGroup(e,t,n,s){g()}Mi(e,t){return zs.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Yi(this)}getSize(e){return zs.resolve(this.size)}}class Yi extends li{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?t.push(this.qn.addEntry(e,s)):this.qn.removeEntry(n)}),zs.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class Ji{constructor(e){this.persistence=e,this.Oi=new ln(e=>Ge(e),$e),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.Fi=0,this.$i=new ji,this.targetCount=0,this.Bi=Xr.mn()}forEachTarget(e,t){return this.Oi.forEach((e,n)=>t(n)),zs.resolve()}getLastRemoteSnapshotVersion(e){return zs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return zs.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),zs.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fi&&(this.Fi=t),zs.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new Xr(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,zs.resolve()}updateTargetData(e,t){return this.In(t),zs.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,zs.resolve()}removeTargets(e,t,n){let s=0;const r=[];return this.Oi.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Oi.delete(i),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),zs.waitFor(r).next(()=>s)}getTargetCount(e){return zs.resolve(this.targetCount)}getTargetData(e,t){const n=this.Oi.get(t)||null;return zs.resolve(n)}addMatchingKeys(e,t,n){return this.$i.Ti(t,n),zs.resolve()}removeMatchingKeys(e,t,n){this.$i.Ai(t,n);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(t=>{r.push(s.markPotentiallyOrphaned(e,t))}),zs.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),zs.resolve()}getMatchingKeysForTargetId(e,t){const n=this.$i.Pi(t);return zs.resolve(n)}containsKey(e,t){return zs.resolve(this.$i.containsKey(t))}}class Xi{constructor(e,t){this.Li={},this.overlays={},this.ts=new M(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new Ji(this),this.indexManager=new Lr,this.fs=function(e){return new Hi(e)}(e=>this.referenceDelegate.Ui(e)),this.M=new ar(t),this.ds=new $i(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zi,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Li[e.toKey()];return n||(n=new Wi(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,n){d("MemoryPersistence","Starting transaction:",e);const s=new Zi(this.ts.next());return this.referenceDelegate.qi(),n(s).next(e=>this.referenceDelegate.Gi(s).next(()=>e)).toPromise().then(e=>(s.raiseOnCommittedEvent(),e))}Ki(e,t){return zs.or(Object.values(this.Li).map(n=>()=>n.containsKey(e,t)))}}class Zi extends $s{constructor(e){super(),this.currentSequenceNumber=e}}class eo{constructor(e){this.persistence=e,this.Qi=new ji,this.ji=null}static Wi(e){return new eo(e)}get zi(){if(this.ji)return this.ji;throw g()}addReference(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),zs.resolve()}removeReference(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),zs.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),zs.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(e=>this.zi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.zi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return zs.forEach(this.zi,n=>{const s=ue.fromPath(n);return this.Hi(e,s).next(e=>{e||t.removeEntry(s,q.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(e=>{e?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return zs.or([()=>zs.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function to(e,t){return`firestore_clients_${e}_${t}`}function no(e,t,n){let s=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(s+=`_${t.uid}`),s}function so(e,t){return`firestore_targets_${e}_${t}`}class ro{constructor(e,t,n,s){this.user=e,this.batchId=t,this.state=n,this.error=s}static Ji(e,t,n){const s=JSON.parse(n);let r,i="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return i&&s.error&&((i="string"==typeof s.error.message&&"string"==typeof s.error.code)&&(r=new b(s.error.code,s.error.message))),i?new ro(e,t,s.state,r):(f("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class io{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ji(e,t){const n=JSON.parse(t);let s,r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return r&&n.error&&((r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(s=new b(n.error.code,n.error.message))),r?new io(e,n.state,s):(f("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oo{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const n=JSON.parse(t);let s="object"==typeof n&&n.activeTargetIds instanceof Array,r=_n();for(let i=0;s&&i<n.activeTargetIds.length;++i)s=ae(n.activeTargetIds[i]),r=r.add(n.activeTargetIds[i]);return s?new oo(e,r):(f("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ao{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ao(t.clientId,t.onlineState):(f("SharedClientState",`Failed to parse online state: ${e}`),null)}}class uo{constructor(){this.activeTargetIds=_n()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class co{constructor(e,t,n,s,r){this.window=e,this.Jn=t,this.persistenceKey=n,this.tr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new hn(L),this.started=!1,this.ir=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.rr=to(this.persistenceKey,this.tr),this.ur=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new uo),this.ar=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.lr=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.dr=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Os();for(const n of e){if(n===this.tr)continue;const e=this.getItem(to(this.persistenceKey,n));if(e){const t=oo.Ji(n,e);t&&(this.sr=this.sr.insert(t.clientId,t))}}this._r();const t=this.storage.getItem(this.lr);if(t){const e=this.wr(t);e&&this.mr(e)}for(const n of this.ir)this.nr(n);this.ir=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((n,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,n){this.yr(e,t,n),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(so(this.persistenceKey,e));if(n){const s=io.Ji(e,n);s&&(t=s.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(so(this.persistenceKey,e))}updateQueryState(e,t,n){this.Tr(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.pr(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return d("SharedClientState","READ",e,t),t}setItem(e,t){d("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){d("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){const t=e;if(t.storageArea===this.storage){if(d("SharedClientState","EVENT",t.key,t.newValue),t.key===this.rr)return void f("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.ar.test(t.key)){if(null==t.newValue){const e=this.Rr(t.key);return this.br(e,null)}{const e=this.Pr(t.key,t.newValue);if(e)return this.br(e.clientId,e)}}else if(this.cr.test(t.key)){if(null!==t.newValue){const e=this.Vr(t.key,t.newValue);if(e)return this.vr(e)}}else if(this.hr.test(t.key)){if(null!==t.newValue){const e=this.Sr(t.key,t.newValue);if(e)return this.Dr(e)}}else if(t.key===this.lr){if(null!==t.newValue){const e=this.wr(t.newValue);if(e)return this.mr(e)}}else if(t.key===this.ur){const e=function(e){let t=M.A;if(null!=e)try{const n=JSON.parse(e);y("number"==typeof n),t=n}catch(e){f("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==M.A&&this.sequenceNumberHandler(e)}else if(t.key===this.dr){const e=this.Cr(t.newValue);await Promise.all(e.map(e=>this.syncEngine.Nr(e)))}}else this.ir.push(t)})}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,n){const s=new ro(this.currentUser,e,t,n),r=no(this.persistenceKey,this.currentUser,e);this.setItem(r,s.Yi())}pr(e){const t=no(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){const t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}Tr(e,t,n){const s=so(this.persistenceKey,e),r=new io(e,t,n);this.setItem(s,r.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const n=this.Rr(e);return oo.Ji(n,t)}Vr(e,t){const n=this.cr.exec(e),s=Number(n[1]),r=void 0!==n[2]?n[2]:null;return ro.Ji(new a(r),s,t)}Sr(e,t){const n=this.hr.exec(e),s=Number(n[1]);return io.Ji(s,t)}wr(e){return ao.Ji(e)}Cr(e){return JSON.parse(e)}async vr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.kr(e.batchId,e.state,e.error);d("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const n=t?this.sr.insert(e,t):this.sr.remove(e),s=this.gr(this.sr),r=this.gr(n),i=[],o=[];return r.forEach(e=>{s.has(e)||i.push(e)}),s.forEach(e=>{r.has(e)||o.push(e)}),this.syncEngine.Or(i,o).then(()=>{this.sr=n})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=_n();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class lo{constructor(){this.Fr=new uo,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,n){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new uo,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ho{Br(e){}shutdown(){}}class fo{constructor(){this.Lr=(()=>this.Ur()),this.qr=(()=>this.Gr()),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const mo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class po{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class go extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.so=t+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,n,s,r){const i=this.oo(e,t);d("RestConnection","Sending: ",i,n);const o={};return this.uo(o,s,r),this.ao(e,i,o,n).then(e=>(d("RestConnection","Received: ",e),e),t=>{throw m("RestConnection",`${e} failed with error: `,t,"url: ",i,"request:",n),t})}co(e,t,n,s,r){return this.ro(e,t,n,s,r)}uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+u,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}oo(e,t){const n=mo[e];return`${this.so}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,n,s){return new Promise((r,o)=>{const a=new i.XhrIo;a.listenOnce(i.EventType.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case i.ErrorCode.NO_ERROR:const t=a.getResponseJson();d("Connection","XHR received:",JSON.stringify(t)),r(t);break;case i.ErrorCode.TIMEOUT:d("Connection",'RPC "'+e+'" timed out'),o(new b(I.DEADLINE_EXCEEDED,"Request time out"));break;case i.ErrorCode.HTTP_ERROR:const n=a.getStatus();if(d("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){const e=a.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(I).indexOf(t)>=0?t:I.UNKNOWN}(e.status);o(new b(t,e.message))}else o(new b(I.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new b(I.UNAVAILABLE,"Connection failed."));break;default:g()}}finally{d("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(s);a.send(t,"POST",u,n,15)})}ho(e,t,n){const s=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=(0,i.createWebChannelTransport)(),a=(0,i.getStatEventTarget)(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new i.FetchXmlHttpFactory({})),this.uo(u.initMessageHeaders,t,n),(0,r.isMobileCordova)()||(0,r.isReactNative)()||(0,r.isElectron)()||(0,r.isIE)()||(0,r.isUWP)()||(0,r.isBrowserExtension)()||(u.httpHeadersOverwriteParam="$httpHeaders");const c=s.join("");d("Connection","Creating WebChannel: "+c,u);const l=o.createWebChannel(c,u);let h=!1,f=!1;const p=new po({jr:e=>{f?d("Connection","Not sending because WebChannel is closed:",e):(h||(d("Connection","Opening WebChannel transport."),l.open(),h=!0),d("Connection","WebChannel sending:",e),l.send(e))},Wr:()=>l.close()}),g=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return g(l,i.WebChannel.EventType.OPEN,()=>{f||d("Connection","WebChannel transport opened.")}),g(l,i.WebChannel.EventType.CLOSE,()=>{f||(f=!0,d("Connection","WebChannel transport closed"),p.eo())}),g(l,i.WebChannel.EventType.ERROR,e=>{f||(f=!0,m("Connection","WebChannel transport errored:",e),p.eo(new b(I.UNAVAILABLE,"The operation could not be completed")))}),g(l,i.WebChannel.EventType.MESSAGE,e=>{var t;if(!f){const n=e.data[0];y(!!n);const s=n,r=s.error||(null===(t=s[0])||void 0===t?void 0:t.error);if(r){d("Connection","WebChannel received error:",r);const e=r.status;let t=function(e){const t=on[e];if(void 0!==t)return cn(t)}(e),n=r.message;void 0===t&&(t=I.INTERNAL,n="Unknown error status: "+e+" with message "+r.message),f=!0,p.eo(new b(t,n)),l.close()}else d("Connection","WebChannel received:",n),p.no(n)}}),g(a,i.Event.STAT_EVENT,e=>{e.stat===i.Stat.PROXY?d("Connection","Detected buffering proxy"):e.stat===i.Stat.NOPROXY&&d("Connection","Detected no buffering proxy")}),setTimeout(()=>{p.Zr()},0),p}}function yo(){return"undefined"!=typeof window?window:null}function wo(){return"undefined"!=typeof document?document:null}function vo(e){return new On(e,!0)}class Io{constructor(e,t,n=1e3,s=1.5,r=6e4){this.Jn=e,this.timerId=t,this.lo=n,this.fo=s,this._o=r,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),n=Math.max(0,Date.now()-this.yo),s=Math.max(0,t-n);s>0&&d("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,s,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class bo{constructor(e,t,n,s,r,i,o,a){this.Jn=e,this.Ao=n,this.Ro=s,this.bo=r,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Io(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}async Mo(){if(this.Co())return this.close(0)}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}async close(e,t){this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==e?this.So.reset():t&&t.code===I.RESOURCE_EXHAUSTED?(f(t.toString()),f("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):t&&t.code===I.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(t)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Po===t&&this.Uo(e,n)},t=>{e(()=>{const e=new b(I.UNKNOWN,"Fetching auth token failed: "+t.message);return this.qo(e)})})}Uo(e,t){const n=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{n(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(e=>{n(()=>this.qo(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}xo(){this.state=5,this.So.Io(async()=>{this.state=0,this.start()})}qo(e){return d("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Eo extends bo{constructor(e,t,n,s,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,i),this.M=r}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=es(this.M,e),n=function(e){if(!("targetChange"in e))return q.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?q.min():t.readTime?Gn(t.readTime):q.min()}(e);return this.listener.Ko(t,n)}Qo(e){const t={};t.database=Hn(this.M),t.addTarget=function(e,t){let n;const s=t.target;return(n=ze(s)?{documents:rs(e,s)}:{query:is(e,s)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Un(e,t.resumeToken):t.snapshotVersion.compareTo(q.min())>0&&(n.readTime=qn(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);const n=as(this.M,e);n&&(t.labels=n),this.Oo(t)}jo(e){const t={};t.database=Hn(this.M),t.removeTarget=e,this.Oo(t)}}class To extends bo{constructor(e,t,n,s,r,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,i),this.M=r,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=ss(e.writeResults,e.commitTime),n=Gn(e.commitTime);return this.listener.Jo(n,t)}return y(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Hn(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>ts(this.M,e))};this.Oo(t)}}class So extends class{}{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=n,this.M=s,this.Zo=!1}tu(){if(this.Zo)throw new b(I.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.bo.ro(e,t,n,s,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===I.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new b(I.UNKNOWN,e.toString())})}co(e,t,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.bo.co(e,t,n,s,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===I.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new b(I.UNKNOWN,e.toString())})}terminate(){this.Zo=!0}}class xo{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(f(t),this.su=!1):d("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class _o{constructor(e,t,n,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=r,this.du.Br(e=>{n.enqueueAndForget(async()=>{Lo(this)&&(d("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=v(e);t.lu.add(4),await No(t),t._u.set("Unknown"),t.lu.delete(4),await Do(t)}(this))})}),this._u=new xo(n,s)}}async function Do(e){if(Lo(e))for(const t of e.fu)await t(!0)}async function No(e){for(const t of e.fu)await t(!1)}function Ao(e,t){const n=v(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),Ro(n)?Vo(n):Zo(n).Co()&&ko(n,t))}function Co(e,t){const n=v(e),s=Zo(n);n.hu.delete(t),s.Co()&&Mo(n,t),0===n.hu.size&&(s.Co()?s.ko():Lo(n)&&n._u.set("Unknown"))}function ko(e,t){e.wu.Z(t.targetId),Zo(e).Qo(t)}function Mo(e,t){e.wu.Z(t),Zo(e).jo(t)}function Vo(e){e.wu=new Vn({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.hu.get(t)||null}),Zo(e).start(),e._u.iu()}function Ro(e){return Lo(e)&&!Zo(e).Do()&&e.hu.size>0}function Lo(e){return 0===v(e).lu.size}function Fo(e){e.wu=void 0}async function Po(e){e.hu.forEach((t,n)=>{ko(e,t)})}async function Oo(e,t){Fo(e),Ro(e)?(e._u.uu(t),Vo(e)):e._u.set("Unknown")}async function qo(e,t,n){if(e._u.set("Online"),t instanceof kn&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const s of t.targetIds)e.hu.has(s)&&(await e.remoteSyncer.rejectListen(s,n),e.hu.delete(s),e.wu.removeTarget(s))}(e,t)}catch(n){d("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Uo(e,n)}else if(t instanceof An?e.wu.ut(t):t instanceof Cn?e.wu._t(t):e.wu.ht(t),!n.isEqual(q.min()))try{const s=await Mi(e.localStore);n.compareTo(s)>=0&&await function(e,t){const n=e.wu.yt(t);return n.targetChanges.forEach((n,s)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.hu.get(s);r&&e.hu.set(s,r.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.hu.get(t);if(!n)return;e.hu.set(t,n.withResumeToken(H.EMPTY_BYTE_STRING,n.snapshotVersion)),Mo(e,t);const s=new or(n.target,t,1,n.sequenceNumber);ko(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){d("RemoteStore","Failed to raise snapshot:",t),await Uo(e,t)}}async function Uo(e,t,n){if(!Ys(t))throw t;e.lu.add(1),await No(e),e._u.set("Offline"),n||(n=(()=>Mi(e.localStore))),e.asyncQueue.enqueueRetryable(async()=>{d("RemoteStore","Retrying IndexedDB access"),await n(),e.lu.delete(1),await Do(e)})}function Bo(e,t){return t().catch(n=>Uo(e,n,t))}async function Go(e){const t=v(e),n=ea(t);let s=t.cu.length>0?t.cu[t.cu.length-1].batchId:-1;for(;Ko(t);)try{const r=await Li(t.localStore,s);if(null===r){0===t.cu.length&&n.ko();break}s=r.batchId,$o(t,r)}catch(e){await Uo(t,e)}zo(t)&&jo(t)}function Ko(e){return Lo(e)&&e.cu.length<10}function $o(e,t){e.cu.push(t);const n=ea(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function zo(e){return Lo(e)&&!ea(e).Do()&&e.cu.length>0}function jo(e){ea(e).start()}async function Qo(e){ea(e).Xo()}async function Wo(e){const t=ea(e);for(const n of e.cu)t.Ho(n.mutations)}async function Ho(e,t,n){const s=e.cu.shift(),r=rr.from(s,t,n);await Bo(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Go(e)}async function Yo(e,t){t&&ea(e).zo&&await async function(e,t){if(un(n=t.code)&&n!==I.ABORTED){const n=e.cu.shift();ea(e).No(),await Bo(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Go(e)}var n}(e,t),zo(e)&&jo(e)}async function Jo(e,t){const n=v(e);n.asyncQueue.verifyOperationInProgress(),d("RemoteStore","RemoteStore received new credentials");const s=Lo(n);n.lu.add(3),await No(n),s&&n._u.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.lu.delete(3),await Do(n)}async function Xo(e,t){const n=v(e);t?(n.lu.delete(2),await Do(n)):t||(n.lu.add(2),await No(n),n._u.set("Unknown"))}function Zo(e){return e.mu||(e.mu=function(e,t,n){const s=v(e);return s.tu(),new Eo(t,s.bo,s.authCredentials,s.appCheckCredentials,s.M,n)}(e.datastore,e.asyncQueue,{zr:Po.bind(null,e),Jr:Oo.bind(null,e),Ko:qo.bind(null,e)}),e.fu.push(async t=>{t?(e.mu.No(),Ro(e)?Vo(e):e._u.set("Unknown")):(await e.mu.stop(),Fo(e))})),e.mu}function ea(e){return e.gu||(e.gu=function(e,t,n){const s=v(e);return s.tu(),new To(t,s.bo,s.authCredentials,s.appCheckCredentials,s.M,n)}(e.datastore,e.asyncQueue,{zr:Qo.bind(null,e),Jr:Yo.bind(null,e),Yo:Wo.bind(null,e),Jo:Ho.bind(null,e)}),e.fu.push(async t=>{t?(e.gu.No(),await Go(e)):(await e.gu.stop(),e.cu.length>0&&(d("RemoteStore",`Stopping write stream with ${e.cu.length} pending writes`),e.cu=[]))})),e.gu}class ta{constructor(e,t,n,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=r,this.deferred=new E,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,s,r){const i=Date.now()+n,o=new ta(e,t,i,s,r);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new b(I.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function na(e,t){if(f("AsyncQueue",`${t}: ${e}`),Ys(e))return new b(I.UNAVAILABLE,`${t}: ${e}`);throw e}class sa{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ue.comparator(t.key,n.key):(e,t)=>ue.comparator(e.key,t.key),this.keyedMap=In(),this.sortedSet=new hn(this.comparator)}static emptySet(e){return new sa(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sa))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(!e.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new sa;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ra{constructor(){this.yu=new hn(ue.comparator)}track(e){const t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):g():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,n)=>{e.push(n)}),e}}class ia{constructor(e,t,n,s,r,i,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=r,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,s){const r=[];return t.forEach(e=>{r.push({type:0,doc:e})}),new ia(e,t,sa.emptySet(t),r,n,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wt(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}class oa{constructor(){this.Iu=void 0,this.listeners=[]}}class aa{constructor(){this.queries=new ln(e=>vt(e),wt),this.onlineState="Unknown",this.Tu=new Set}}async function ua(e,t){const n=v(e),s=t.query;let r=!1,i=n.queries.get(s);if(i||(r=!0,i=new oa),r)try{i.Iu=await n.onListen(s)}catch(e){const n=na(e,`Initialization of query '${It(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,i),i.listeners.push(t),t.Eu(n.onlineState),i.Iu&&t.Au(i.Iu)&&da(n)}async function ca(e,t){const n=v(e),s=t.query;let r=!1;const i=n.queries.get(s);if(i){const e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),r=0===i.listeners.length)}if(r)return n.queries.delete(s),n.onUnlisten(s)}function la(e,t){const n=v(e);let s=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.Au(r)&&(s=!0);t.Iu=r}}s&&da(n)}function ha(e,t,n){const s=v(e),r=s.queries.get(t);if(r)for(const i of r.listeners)i.onError(n);s.queries.delete(t)}function da(e){e.Tu.forEach(e=>{e.next()})}class fa{constructor(e,t,n){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=n||{}}Au(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ia(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return!(this.options.Du&&n||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){if(e.docChanges.length>0)return!0;const t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Su(e){e=ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class ma{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class pa{constructor(e){this.M=e}li(e){return jn(this.M,e)}fi(e){return e.metadata.exists?Xn(this.M,e.document,!1):Ce.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Gn(e)}}class ga{constructor(e,t,n){this.xu=e,this.localStore=t,this.M=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ya(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const n=$.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,n=new pa(this.M);for(const s of e)if(s.metadata.queries){const e=n.li(s.metadata.name);for(const n of s.metadata.queries){const s=(t.get(n)||Sn()).add(e);t.set(n,s)}}return t}async complete(){const e=await Gi(this.localStore,new pa(this.M),this.documents,this.xu.id),t=this.ku(this.documents);for(const n of this.queries)await Ki(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:e}}}function ya(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class wa{constructor(e){this.key=e}}class va{constructor(e){this.key=e}}class Ia{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Sn(),this.mutatedKeys=Sn(),this.Lu=Tt(e),this.Uu=new sa(this.Lu)}get qu(){return this.Fu}Gu(e,t){const n=t?t.Ku:new ra,s=t?t.Uu:this.Uu;let r=t?t.mutatedKeys:this.mutatedKeys,i=s,o=!1;const a=lt(this.query)&&s.size===this.query.limit?s.last():null,u=ht(this.query)&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((e,t)=>{const c=s.get(e),l=bt(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Qu(c,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Lu(l,a)>0||u&&this.Lu(l,u)<0)&&(o=!0)):!c&&l?(n.track({type:0,doc:l}),f=!0):c&&!l&&(n.track({type:1,doc:c}),f=!0,(a||u)&&(o=!0)),f&&(l?(i=i.add(l),r=d?r.add(e):r.delete(e)):(i=i.delete(e),r=r.delete(e)))}),lt(this.query)||ht(this.query))for(;i.size>this.query.limit;){const e=lt(this.query)?i.last():i.first();i=i.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{Uu:i,Ku:n,ei:o,mutatedKeys:r}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const s=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const r=e.Ku.pu();r.sort((e,t)=>(function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return g()}};return n(e)-n(t)})(e.type,t.type)||this.Lu(e.doc,t.doc)),this.ju(n);const i=t?this.Wu():[],o=0===this.Bu.size&&this.current?1:0,a=o!==this.$u;return this.$u=o,0!==r.length||a?{snapshot:new ia(this.query,e.Uu,s,r,e.mutatedKeys,0===o,a,!1),zu:i}:{zu:i}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new ra,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(e=>this.Fu=this.Fu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Fu=this.Fu.delete(e)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Sn(),this.Uu.forEach(e=>{this.Hu(e.key)&&(this.Bu=this.Bu.add(e.key))});const t=[];return e.forEach(e=>{this.Bu.has(e)||t.push(new va(e))}),this.Bu.forEach(n=>{e.has(n)||t.push(new wa(n))}),t}Ju(e){this.Fu=e.hi,this.Bu=Sn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return ia.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class ba{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Ea{constructor(e){this.key=e,this.Xu=!1}}class Ta{constructor(e,t,n,s,r,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=i,this.Zu={},this.ta=new ln(e=>vt(e),wt),this.ea=new Map,this.na=new Set,this.sa=new hn(ue.comparator),this.ia=new Map,this.ra=new ji,this.oa={},this.ua=new Map,this.aa=Xr.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}async function Sa(e,t){const n=Za(e);let s,r;const i=n.ta.get(t);if(i)s=i.targetId,n.sharedClientState.addLocalQueryTarget(s),r=i.view.Yu();else{const e=await Fi(n.localStore,gt(t));n.isPrimaryClient&&Ao(n.remoteStore,e);const i=n.sharedClientState.addLocalQueryTarget(e.targetId);s=e.targetId,r=await xa(n,t,s,"current"===i)}return r}async function xa(e,t,n,s){e.ha=((t,n,s)=>(async function(e,t,n,s){let r=t.view.Gu(n);r.ei&&(r=await Oi(e.localStore,t.query,!1).then(({documents:e})=>t.view.Gu(e,r)));const i=s&&s.targetChanges.get(t.targetId),o=t.view.applyChanges(r,e.isPrimaryClient,i);return Oa(e,t.targetId,o.zu),o.snapshot})(e,t,n,s));const r=await Oi(e.localStore,t,!0),i=new Ia(t,r.hi),o=i.Gu(r.documents),a=Nn.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==e.onlineState),u=i.applyChanges(o,e.isPrimaryClient,a);Oa(e,n,u.zu);const c=new ba(t,n,i);return e.ta.set(t,c),e.ea.has(n)?e.ea.get(n).push(t):e.ea.set(n,[t]),u.snapshot}async function _a(e,t){const n=v(e),s=n.ta.get(t),r=n.ea.get(s.targetId);if(r.length>1)return n.ea.set(s.targetId,r.filter(e=>!wt(e,t))),void n.ta.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Pi(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),Co(n.remoteStore,s.targetId),Fa(n,s.targetId)}).catch(si)):(Fa(n,s.targetId),await Pi(n.localStore,s.targetId,!0))}async function Da(e,t,n){const s=eu(e);try{const r=await function(e,t){const n=v(e),s=O.now(),r=t.reduce((e,t)=>e.add(t.key),Sn());let i;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.ai.qs(e,r).next(r=>{i=r;const o=[];for(const e of t){const t=Wt(e,i.get(e.key));null!=t&&o.push(new Xt(e.key,t,Ae(t.value.mapValue),Kt.exists(!0)))}return n.$s.addMutationBatch(e,s,o,t)})).then(e=>(e.applyToLocalDocumentSet(i),{batchId:e.batchId,changes:i}))}(s.localStore,t);s.sharedClientState.addPendingMutation(r.batchId),function(e,t,n){let s=e.oa[e.currentUser.toKey()];s||(s=new hn(L)),s=s.insert(t,n),e.oa[e.currentUser.toKey()]=s}(s,r.batchId,n),await Ba(s,r.changes),await Go(s.remoteStore)}catch(e){const t=na(e,"Failed to persist write");n.reject(t)}}async function Na(e,t){const n=v(e);try{const s=await Vi(n.localStore,t);t.targetChanges.forEach((e,t)=>{const s=n.ia.get(t);s&&(y(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?s.Xu=!0:e.modifiedDocuments.size>0?y(s.Xu):e.removedDocuments.size>0&&(y(s.Xu),s.Xu=!1))}),await Ba(n,s,t)}catch(e){await si(e)}}function Aa(e,t,n){const s=v(e);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const e=[];s.ta.forEach((n,s)=>{const r=s.view.Eu(t);r.snapshot&&e.push(r.snapshot)}),function(e,t){const n=v(e);n.onlineState=t;let s=!1;n.queries.forEach((e,n)=>{for(const r of n.listeners)r.Eu(t)&&(s=!0)}),s&&da(n)}(s.eventManager,t),e.length&&s.Zu.Ko(e),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function Ca(e,t,n){const s=v(e);s.sharedClientState.updateQueryState(t,"rejected",n);const r=s.ia.get(t),i=r&&r.key;if(i){let e=new hn(ue.comparator);e=e.insert(i,Ce.newNoDocument(i,q.min()));const n=Sn().add(i),r=new Dn(q.min(),new Map,new mn(L),e,n);await Na(s,r),s.sa=s.sa.remove(i),s.ia.delete(t),Ua(s)}else await Pi(s.localStore,t,!1).then(()=>Fa(s,t,n)).catch(si)}async function ka(e,t){const n=v(e),s=t.batch.batchId;try{const r=await ki(n.localStore,t);La(n,s,null),Ra(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ba(n,r)}catch(e){await si(e)}}async function Ma(e,t,n){const s=v(e);try{const e=await function(e,t){const n=v(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let s;return n.$s.lookupMutationBatch(e,t).next(t=>(y(null!==t),s=t.keys(),n.$s.removeMutationBatch(e,t))).next(()=>n.$s.performConsistencyCheck(e)).next(()=>n.ai.qs(e,s))})}(s.localStore,t);La(s,t,n),Ra(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Ba(s,e)}catch(n){await si(n)}}async function Va(e,t){const n=v(e);Lo(n.remoteStore)||d("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=await function(e){const t=v(n.localStore);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.$s.getHighestUnacknowledgedBatchId(e))}();if(-1===s)return void t.resolve();const r=n.ua.get(s)||[];r.push(t),n.ua.set(s,r)}catch(e){const n=na(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}function Ra(e,t){(e.ua.get(t)||[]).forEach(e=>{e.resolve()}),e.ua.delete(t)}function La(e,t,n){const s=v(e);let r=s.oa[s.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),s.oa[s.currentUser.toKey()]=r}}function Fa(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.ea.get(t))e.ta.delete(s),n&&e.Zu.la(s,n);e.ea.delete(t),e.isPrimaryClient&&e.ra.Ri(t).forEach(t=>{e.ra.containsKey(t)||Pa(e,t)})}function Pa(e,t){e.na.delete(t.path.canonicalString());const n=e.sa.get(t);null!==n&&(Co(e.remoteStore,n),e.sa=e.sa.remove(t),e.ia.delete(n),Ua(e))}function Oa(e,t,n){for(const s of n)s instanceof wa?(e.ra.addReference(s.key,t),qa(e,s)):s instanceof va?(d("SyncEngine","Document no longer in limbo: "+s.key),e.ra.removeReference(s.key,t),e.ra.containsKey(s.key)||Pa(e,s.key)):g()}function qa(e,t){const n=t.key,s=n.path.canonicalString();e.sa.get(n)||e.na.has(s)||(d("SyncEngine","New document in limbo: "+n),e.na.add(s),Ua(e))}function Ua(e){for(;e.na.size>0&&e.sa.size<e.maxConcurrentLimboResolutions;){const t=e.na.values().next().value;e.na.delete(t);const n=new ue($.fromString(t)),s=e.aa.next();e.ia.set(s,new Ea(n)),e.sa=e.sa.insert(n,s),Ao(e.remoteStore,new or(gt(ct(n.path)),s,2,M.A))}}async function Ba(e,t,n){const s=v(e),r=[],i=[],o=[];s.ta.isEmpty()||(s.ta.forEach((e,a)=>{o.push(s.ha(a,t,n).then(e=>{if(e){s.isPrimaryClient&&s.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),r.push(e);const t=_i.Js(a.targetId,e);i.push(t)}}))}),await Promise.all(o),s.Zu.Ko(r),await async function(e,t){const n=v(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>zs.forEach(t,t=>zs.forEach(t.zs,s=>n.persistence.referenceDelegate.addReference(e,t.targetId,s)).next(()=>zs.forEach(t.Hs,s=>n.persistence.referenceDelegate.removeReference(e,t.targetId,s)))))}catch(e){if(!Ys(e))throw e;d("LocalStore","Failed to update sequence numbers: "+e)}for(const s of t){const e=s.targetId;if(!s.fromCache){const t=n.si.get(e),s=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(s);n.si=n.si.insert(e,r)}}}(s.localStore,i))}async function Ga(e,t){const n=v(e);if(!n.currentUser.isEqual(t)){d("SyncEngine","User change. New user:",t.toKey());const e=await Ci(n.localStore,t);n.currentUser=t,function(e,t){e.ua.forEach(e=>{e.forEach(e=>{e.reject(new b(I.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.ua.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ba(n,e.ci)}}function Ka(e,t){const n=v(e),s=n.ia.get(t);if(s&&s.Xu)return Sn().add(s.key);{let e=Sn();const s=n.ea.get(t);if(!s)return e;for(const t of s){const s=n.ta.get(t);e=e.unionWith(s.view.qu)}return e}}async function $a(e,t){const n=v(e),s=await Oi(n.localStore,t.query,!0),r=t.view.Ju(s);return n.isPrimaryClient&&Oa(n,t.targetId,r.zu),r}async function za(e,t){const n=v(e);return Ui(n.localStore,t).then(e=>Ba(n,e))}async function ja(e,t,n,s){const r=v(e),i=await function(e,t){const n=v(e),s=v(n.$s);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>s.ln(e,t).next(t=>t?n.ai.qs(e,t):zs.resolve(null)))}(r.localStore,t);null!==i?("pending"===n?await Go(r.remoteStore):"acknowledged"===n||"rejected"===n?(La(r,t,s||null),Ra(r,t),function(e,t){v(v(e).$s).dn(t)}(r.localStore,t)):g(),await Ba(r,i)):d("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Qa(e,t){const n=v(e);if(Za(n),eu(n),!0===t&&!0!==n.ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Wa(n,e.toArray());n.ca=!0,await Xo(n.remoteStore,!0);for(const s of t)Ao(n.remoteStore,s)}else if(!1===t&&!1!==n.ca){const e=[];let t=Promise.resolve();n.ea.forEach((s,r)=>{n.sharedClientState.isLocalQueryTarget(r)?e.push(r):t=t.then(()=>(Fa(n,r),Pi(n.localStore,r,!0))),Co(n.remoteStore,r)}),await t,await Wa(n,e),function(e){const t=v(n);t.ia.forEach((e,n)=>{Co(t.remoteStore,n)}),t.ra.bi(),t.ia=new Map,t.sa=new hn(ue.comparator)}(),n.ca=!1,await Xo(n.remoteStore,!1)}}async function Wa(e,t,n){const s=v(e),r=[],i=[];for(const o of t){let e;const t=s.ea.get(o);if(t&&0!==t.length){e=await Fi(s.localStore,gt(t[0]));for(const e of t){const t=s.ta.get(e),n=await $a(s,t);n.snapshot&&i.push(n.snapshot)}}else{const t=await qi(s.localStore,o);e=await Fi(s.localStore,t),await xa(s,Ha(t),o,!1)}r.push(e)}return s.Zu.Ko(i),r}function Ha(e){return ut(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ya(e){const t=v(e);return v(v(t.localStore).persistence).Os()}async function Ja(e,t,n,s){const r=v(e);if(r.ca)return void d("SyncEngine","Ignoring unexpected query state notification.");const i=r.ea.get(t);if(i&&i.length>0)switch(n){case"current":case"not-current":{const e=await Ui(r.localStore,Et(i[0])),s=Dn.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);await Ba(r,e,s);break}case"rejected":await Pi(r.localStore,t,!0),Fa(r,t,s);break;default:g()}}async function Xa(e,t,n){const s=Za(e);if(s.ca){for(const e of t){if(s.ea.has(e)){d("SyncEngine","Adding an already active target "+e);continue}const t=await qi(s.localStore,e),n=await Fi(s.localStore,t);await xa(s,Ha(t),n.targetId,!1),Ao(s.remoteStore,n)}for(const e of n)s.ea.has(e)&&await Pi(s.localStore,e,!1).then(()=>{Co(s.remoteStore,e),Fa(s,e)}).catch(si)}}function Za(e){const t=v(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Na.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ka.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ca.bind(null,t),t.Zu.Ko=la.bind(null,t.eventManager),t.Zu.la=ha.bind(null,t.eventManager),t}function eu(e){const t=v(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ka.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ma.bind(null,t),t}function tu(e,t,n){const s=v(e);(async function(e,t,n){try{const s=await t.getMetadata();if(await function(e,t){const n=v(e),s=Gn(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.ds.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(s)>=0)}(e.localStore,s))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(s)),Promise.resolve(new Set);n._updateProgress(ya(s));const r=new ga(s,e.localStore,t.M);let i=await t.fa();for(;i;){const e=await r.Nu(i);e&&n._updateProgress(e),i=await t.fa()}const o=await r.complete();return await Ba(e,o.Ou,void 0),await function(e,t){const n=v(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.ds.saveBundleMetadata(e,t))}(e.localStore,s),n._completeWith(o.progress),Promise.resolve(o.Mu)}catch(e){return m("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}})(s,t,n).then(e=>{s.sharedClientState.notifyBundleLoaded(e)})}class nu{constructor(){this.synchronizeTabs=!1}async initialize(e){this.M=vo(e.databaseInfo.databaseId),this.sharedClientState=this.da(e),this.persistence=this._a(e),await this.persistence.start(),this.gcScheduler=this.wa(e),this.localStore=this.ma(e)}wa(e){return null}ma(e){return Ai(this.persistence,new Di,e.initialUser,this.M)}_a(e){return new Xi(eo.Wi,this.M)}da(e){return new lo}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class su extends nu{constructor(e,t,n){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ga.initialize(this,e),await eu(this.ga.syncEngine),await Go(this.ga.remoteStore),await this.persistence.Is(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve()))}ma(e){return Ai(this.persistence,new Di,e.initialUser,this.M)}wa(e){const t=this.persistence.referenceDelegate.garbageCollector;return new oi(t,e.asyncQueue)}_a(e){const t=Si(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?$r.withCacheSize(this.cacheSizeBytes):$r.DEFAULT;return new bi(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,yo(),wo(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new lo}}class ru extends su{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ga.syncEngine;this.sharedClientState instanceof co&&(this.sharedClientState.syncEngine={kr:ja.bind(null,t),Mr:Ja.bind(null,t),Or:Xa.bind(null,t),Os:Ya.bind(null,t),Nr:za.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Is(async e=>{await Qa(this.ga.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop())})}da(e){const t=yo();if(!co.vt(t))throw new b(I.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Si(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new co(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class iu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=(e=>Aa(this.syncEngine,e,1)),this.remoteStore.remoteSyncer.handleCredentialChange=Ga.bind(null,this.syncEngine),await Xo(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new aa}createDatastore(e){const t=vo(e.databaseInfo.databaseId),n=(s=e.databaseInfo,new go(s));var s;return function(e,t,n,s){return new So(e,t,n,s)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,s=e.asyncQueue,r=(e=>Aa(this.syncEngine,e,0)),i=fo.vt()?new fo:new ho,new _o(t,n,s,r,i);var t,n,s,r,i}createSyncEngine(e,t){return function(e,t,n,s,r,i,o){const a=new Ta(e,t,n,s,r,i);return o&&(a.ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=v(e);d("RemoteStore","RemoteStore shutting down."),t.lu.add(5),await No(t),t.du.shutdown(),t._u.set("Unknown")}(this.remoteStore)}}function ou(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const s={value:e.slice(n,n+t),done:!1};return n+=t,s}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}class au{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class uu{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new E,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(e=>{e&&e.Cu()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.Ia.cancel()}async getMetadata(){return this.metadata.promise}async fa(){return await this.getMetadata(),this.Ea()}async Ea(){const e=await this.Aa();if(null===e)return null;const t=this.Ta.decode(e),n=Number(t);isNaN(n)&&this.Ra(`length string (${t}) is not valid number`);const s=await this.ba(n);return new ma(JSON.parse(s),e.length+n)}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Aa(){for(;this.Pa()<0&&!(await this.Va()););if(0===this.buffer.length)return null;const e=this.Pa();e<0&&this.Ra("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async ba(e){for(;this.buffer.length<e;)await this.Va()&&this.Ra("Reached the end of bundle when more is expected.");const t=this.Ta.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}async Va(){const e=await this.Ia.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class cu{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new b(I.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=v(e),s=Hn(n.M)+"/documents",r={documents:t.map(e=>zn(n.M,e))},i=await n.co("BatchGetDocuments",s,r),o=new Map;i.forEach(e=>{const t=Zn(n.M,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());y(!!t),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new nn(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=ue.fromPath(t);this.mutations.push(new sn(n,this.precondition(n)))}),await async function(e,t){const n=v(e),s=Hn(n.M)+"/documents",r={writes:t.map(e=>ts(n.M,e))};await n.ro("Commit",s,r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw g();t=q.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new b(I.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Kt.updateTime(t):Kt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(q.min()))throw new b(I.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kt.updateTime(t)}return Kt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class lu{constructor(e,t,n,s){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=s,this.va=5,this.So=new Io(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){this.So.Io(async()=>{const e=new cu(this.datastore),t=this.Da(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Ca(e)}))}).catch(e=>{this.Ca(e)})})}Da(e){try{const t=this.updateFunction(e);return!ie(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!un(t)}return!1}}class hu{constructor(e,t,n,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=a.UNAUTHENTICATED,this.clientId=R.R(),this.authCredentialListener=(()=>Promise.resolve()),this.appCheckCredentialListener=(()=>Promise.resolve()),this.authCredentials.start(n,async e=>{d("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(d("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new b(I.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new E;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=na(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function du(e,t){e.asyncQueue.verifyOperationInProgress(),d("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async e=>{s.isEqual(e)||(await Ci(t.localStore,e),s=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t}async function fu(e,t){e.asyncQueue.verifyOperationInProgress();const n=await mu(e);d("FirestoreClient","Initializing OnlineComponentProvider");const s=await e.getConfiguration();await t.initialize(n,s),e.setCredentialChangeListener(e=>Jo(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Jo(t.remoteStore,n)),e.onlineComponents=t}async function mu(e){return e.offlineComponents||(d("FirestoreClient","Using default OfflineComponentProvider"),await du(e,new nu)),e.offlineComponents}async function pu(e){return e.onlineComponents||(d("FirestoreClient","Using default OnlineComponentProvider"),await fu(e,new iu)),e.onlineComponents}function gu(e){return mu(e).then(e=>e.persistence)}function yu(e){return mu(e).then(e=>e.localStore)}function wu(e){return pu(e).then(e=>e.remoteStore)}function vu(e){return pu(e).then(e=>e.syncEngine)}async function Iu(e){const t=await pu(e),n=t.eventManager;return n.onListen=Sa.bind(null,t.syncEngine),n.onUnlisten=_a.bind(null,t.syncEngine),n}function bu(e){return e.asyncQueue.enqueue(async()=>{const t=await gu(e),n=await wu(e);return t.setNetworkEnabled(!0),function(e){const t=v(n);return t.lu.delete(0),Do(t)}()})}function Eu(e){return e.asyncQueue.enqueue(async()=>{const t=await gu(e),n=await wu(e);return t.setNetworkEnabled(!1),async function(e){const t=v(n);t.lu.add(0),await No(t),t._u.set("Offline")}()})}function Tu(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>(async function(e,t,n){try{const s=await function(e,t){const n=v(e);return n.persistence.runTransaction("read document","readonly",e=>n.ai.Bs(e,t))}(e,t);s.isFoundDocument()?n.resolve(s):s.isNoDocument()?n.resolve(null):n.reject(new b(I.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const s=na(e,`Failed to get document '${t} from cache`);n.reject(s)}})(await yu(e),t,n)),n.promise}function Su(e,t,n={}){const s=new E;return e.asyncQueue.enqueueAndForget(async()=>(function(e,t,n,s,r){const i=new au({next:i=>{t.enqueueAndForget(()=>ca(e,o));const a=i.docs.has(n);!a&&i.fromCache?r.reject(new b(I.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&i.fromCache&&s&&"server"===s.source?r.reject(new b(I.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(i)},error:e=>r.reject(e)}),o=new fa(ct(n.path),i,{includeMetadataChanges:!0,Du:!0});return ua(e,o)})(await Iu(e),e.asyncQueue,t,n,s)),s.promise}function xu(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>(async function(e,t,n){try{const s=await Oi(e,t,!0),r=new Ia(t,s.hi),i=r.Gu(s.documents),o=r.applyChanges(i,!1);n.resolve(o.snapshot)}catch(e){const s=na(e,`Failed to execute query '${t} against cache`);n.reject(s)}})(await yu(e),t,n)),n.promise}function _u(e,t,n={}){const s=new E;return e.asyncQueue.enqueueAndForget(async()=>(function(e,t,n,s,r){const i=new au({next:n=>{t.enqueueAndForget(()=>ca(e,o)),n.fromCache&&"server"===s.source?r.reject(new b(I.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),o=new fa(n,i,{includeMetadataChanges:!0,Du:!0});return ua(e,o)})(await Iu(e),e.asyncQueue,t,n,s)),s.promise}function Du(e,t){const n=new au(t);return e.asyncQueue.enqueueAndForget(async()=>(function(e,t){v(e).Tu.add(t),t.next()})(await Iu(e),n)),()=>{n.pa(),e.asyncQueue.enqueueAndForget(async()=>(function(e,t){v(e).Tu.delete(t)})(await Iu(e),n))}}function Nu(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>{const s=await function(e){return pu(e).then(e=>e.datastore)}(e);new lu(e.asyncQueue,s,t,n).run()}),n.promise}function Au(e,t,n,s){const r=function(e,t){let n;return function(e,t){return new uu(e,t)}(function(e,t){if(e instanceof Uint8Array)return ou(e,t);if(e instanceof ArrayBuffer)return ou(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n="string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,vo(t));e.asyncQueue.enqueueAndForget(async()=>{tu(await vu(e),r,s)})}function Cu(e,t){return e.asyncQueue.enqueue(async()=>(function(e,t){const n=v(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.ds.getNamedQuery(e,t))})(await yu(e),t))}const ku=new Map;function Mu(e,t,n){if(!n)throw new b(I.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Vu(e,t,n,s){if(!0===t&&!0===s)throw new b(I.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Ru(e){if(!ue.isDocumentKey(e))throw new b(I.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Lu(e){if(ue.isDocumentKey(e))throw new b(I.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Fu(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":g()}function Pu(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new b(I.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fu(e);throw new b(I.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Ou(e,t){if(t<=0)throw new b(I.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class qu{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new b(I.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new b(I.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Vu("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uu{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qu({}),this._settingsFrozen=!1,e instanceof re?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new b(I.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new re(e.options.projectId)}(e))}get app(){if(!this._app)throw new b(I.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new b(I.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qu(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new S;switch(e.type){case"gapi":const t=e.client;return y(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new N(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new b(I.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ku.get(e);t&&(d("ComponentProvider","Removing Datastore"),ku.delete(e),t.terminate())}(this),Promise.resolve()}}function Bu(e,t,n,s={}){var i;const o=(e=Pu(e,Uu))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&m("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:`${t}:${n}`,ssl:!1})),s.mockUserToken){let t,n;if("string"==typeof s.mockUserToken)t=s.mockUserToken,n=a.MOCK_USER;else{t=(0,r.createMockUserToken)(s.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=s.mockUserToken.sub||s.mockUserToken.user_id;if(!o)throw new b(I.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new a(o)}e._authCredentials=new x(new T(t,n))}}class Gu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $u(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gu(this.firestore,e,this._key)}}exports.DocumentReference=Gu;class Ku{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ku(this.firestore,e,this._query)}}exports.Query=Ku;class $u extends Ku{constructor(e,t,n){super(e,t,ct(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gu(this.firestore,null,new ue(e))}withConverter(e){return new $u(this.firestore,e,this._path)}}function zu(e,t,...n){if(e=(0,r.getModularInstance)(e),Mu("collection","path",t),e instanceof Uu){const s=$.fromString(t,...n);return Lu(s),new $u(e,null,s)}{if(!(e instanceof Gu||e instanceof $u))throw new b(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child($.fromString(t,...n));return Lu(s),new $u(e.firestore,null,s)}}function ju(e,t){if(e=Pu(e,Uu),Mu("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new b(I.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ku(e,null,function(e){return new at($.emptyPath(),e)}(t))}function Qu(e,t,...n){if(e=(0,r.getModularInstance)(e),1===arguments.length&&(t=R.R()),Mu("doc","path",t),e instanceof Uu){const s=$.fromString(t,...n);return Ru(s),new Gu(e,null,new ue(s))}{if(!(e instanceof Gu||e instanceof $u))throw new b(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child($.fromString(t,...n));return Ru(s),new Gu(e.firestore,e instanceof $u?e.converter:null,new ue(s))}}function Wu(e,t){return e=(0,r.getModularInstance)(e),t=(0,r.getModularInstance)(t),(e instanceof Gu||e instanceof $u)&&(t instanceof Gu||t instanceof $u)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Hu(e,t){return e=(0,r.getModularInstance)(e),t=(0,r.getModularInstance)(t),e instanceof Ku&&t instanceof Ku&&e.firestore===t.firestore&&wt(e._query,t._query)&&e.converter===t.converter}exports.CollectionReference=$u;class Yu{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Io(this,"async_queue_retry"),this.Ua=(()=>{const e=wo();e&&d("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()});const e=wo();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=wo();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new E;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}async Ka(){if(0!==this.ka.length){try{await this.ka[0](),this.ka.shift(),this.So.reset()}catch(e){if(!Ys(e))throw e;d("AsyncQueue","Operation failed with retryable error: "+e)}this.ka.length>0&&this.So.Io(()=>this.Ka())}}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(e=>{throw this.Fa=e,this.$a=!1,f("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.$a=!1,e))));return this.Na=t,t}enqueueAfterDelay(e,t,n){this.qa(),this.La.indexOf(e)>-1&&(t=0);const s=ta.createAndSchedule(this,e,t,n,e=>this.Qa(e));return this.Oa.push(s),s}qa(){this.Fa&&g()}verifyOperationInProgress(){}async ja(){let e;do{e=this.Na,await e}while(e!==this.Na)}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function Ju(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const s of["next","error","complete"])if(s in n&&"function"==typeof n[s])return!0;return!1}(e)}class Xu{constructor(){this._progressObserver={},this._taskCompletionResolver=new E,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}exports.LoadBundleTask=Xu;const Zu=-1;exports.CACHE_SIZE_UNLIMITED=-1;class ec extends Uu{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new Yu,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||rc(this),this._firestoreClient.terminate()}}function tc(e,n){const s=(0,t._getProvider)(e,"firestore");if(s.isInitialized()){const e=s.getImmediate(),t=s.getOptions();if((0,r.deepEqual)(t,n))return e;throw new b(I.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==n.cacheSizeBytes&&-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new b(I.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return s.initialize({options:n})}function nc(e=(0,t.getApp)()){return(0,t._getProvider)(e,"firestore").getImmediate()}function sc(e){return e._firestoreClient||rc(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function rc(e){var t;const n=e._freezeSettings(),s=function(e,t,n,s){return new se(e,t,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new hu(e._authCredentials,e._appCheckCredentials,e._queue,s)}function ic(e,t){pc(e=Pu(e,ec));const n=sc(e),s=e._freezeSettings(),r=new iu;return ac(n,r,new su(r,s.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function oc(e){pc(e=Pu(e,ec));const t=sc(e),n=e._freezeSettings(),s=new iu;return ac(t,s,new ru(s,n.cacheSizeBytes))}function ac(e,t,n){const s=new E;return e.asyncQueue.enqueue(async()=>{try{await du(e,n),await fu(e,t),s.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===I.FAILED_PRECONDITION||e.code===I.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),s.reject(e)}}).then(()=>s.promise)}function uc(e){if(e._initialized&&!e._terminated)throw new b(I.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new E;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!Qs.vt())return Promise.resolve();const t=e+"main";await Qs.delete(t)}(Si(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}function cc(e){return function(e){const t=new E;return e.asyncQueue.enqueueAndForget(async()=>Va(await vu(e),t)),t.promise}(sc(e=Pu(e,ec)))}function lc(e){return bu(sc(e=Pu(e,ec)))}function hc(e){return Eu(sc(e=Pu(e,ec)))}function dc(e){return(0,t._removeServiceInstance)(e.app,"firestore"),e._delete()}function fc(e,t){const n=sc(e=Pu(e,ec)),s=new Xu;return Au(n,e._databaseId,t,s),s}function mc(e,t){return Cu(sc(e=Pu(e,ec)),t).then(t=>t?new Ku(e,null,t.query):null)}function pc(e){if(e._initialized||e._terminated)throw new b(I.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}exports.Firestore=ec;class gc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new b(I.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new j(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function yc(){return new gc("__name__")}exports.FieldPath=gc;class wc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wc(H.fromBase64String(e))}catch(e){throw new b(I.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new wc(H.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}exports.Bytes=wc;class vc{constructor(e){this._methodName=e}}exports.FieldValue=vc;class Ic{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new b(I.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new b(I.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return L(this._lat,e._lat)||L(this._long,e._long)}}exports.GeoPoint=Ic;const bc=/^__.*__$/;class Ec{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Xt(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jt(e,this.data,t,this.fieldTransforms)}}class Tc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Xt(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Sc(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw g()}}class xc{constructor(e,t,n,s,r,i){this.settings=e,this.databaseId=t,this.M=n,this.ignoreUndefinedProperties=s,void 0===r&&this.Ja(),this.fieldTransforms=r||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new xc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Xa({path:n,tc:!1});return s.ec(e),s}nc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Xa({path:n,tc:!1});return s.Ja(),s}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return zc(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(Sc(this.Ya)&&bc.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class _c{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=n||vo(e)}uc(e,t,n,s=!1){return new xc({Ya:e,methodName:t,oc:n,path:j.emptyPath(),tc:!1,rc:s},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Dc(e){const t=e._freezeSettings(),n=vo(e._databaseId);return new _c(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Nc(e,t,n,s,r,i={}){const o=e.uc(i.merge||i.mergeFields?2:0,t,n,r);Bc("Data must be an object, but it was:",o,s);const a=qc(s,o);let u,c;if(i.merge)u=new Q(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const s of i.mergeFields){const r=Gc(t,s,n);if(!o.contains(r))throw new b(I.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);jc(e,r)||e.push(r)}u=new Q(e),c=o.fieldTransforms.filter(e=>u.covers(e.field))}else u=null,c=o.fieldTransforms;return new Ec(new Ne(a),u,c)}class Ac extends vc{_toFieldTransform(e){if(2!==e.Ya)throw 1===e.Ya?e.ic(`${this._methodName}() can only appear at the top level of your update data`):e.ic(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ac}}function Cc(e,t,n){return new xc({Ya:3,oc:t.settings.oc,methodName:e._methodName,tc:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}class kc extends vc{_toFieldTransform(e){return new Ut(e.path,new Mt)}isEqual(e){return e instanceof kc}}class Mc extends vc{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=Cc(this,e,!0),n=this.ac.map(e=>Oc(e,t)),s=new Vt(n);return new Ut(e.path,s)}isEqual(e){return this===e}}class Vc extends vc{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=Cc(this,e,!0),n=this.ac.map(e=>Oc(e,t)),s=new Lt(n);return new Ut(e.path,s)}isEqual(e){return this===e}}class Rc extends vc{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Pt(e.M,Dt(e.M,this.cc));return new Ut(e.path,t)}isEqual(e){return this===e}}function Lc(e,t,n,s){const i=e.uc(1,t,n);Bc("Data must be an object, but it was:",i,s);const o=[],a=Ne.empty();B(s,(e,s)=>{const u=$c(t,e,n);s=(0,r.getModularInstance)(s);const c=i.nc(u);if(s instanceof Ac)o.push(u);else{const e=Oc(s,c);null!=e&&(o.push(u),a.set(u,e))}});const u=new Q(o);return new Tc(a,u,i.fieldTransforms)}function Fc(e,t,n,s,i,o){const a=e.uc(1,t,n),u=[Gc(t,s,n)],c=[i];if(o.length%2!=0)throw new b(I.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let r=0;r<o.length;r+=2)u.push(Gc(t,o[r])),c.push(o[r+1]);const l=[],h=Ne.empty();for(let f=u.length-1;f>=0;--f)if(!jc(l,u[f])){const e=u[f];let t=c[f];t=(0,r.getModularInstance)(t);const n=a.nc(e);if(t instanceof Ac)l.push(e);else{const s=Oc(t,n);null!=s&&(l.push(e),h.set(e,s))}}const d=new Q(l);return new Tc(h,d,a.fieldTransforms)}function Pc(e,t,n,s=!1){return Oc(n,e.uc(s?4:3,t))}function Oc(e,t){if(Uc(e=(0,r.getModularInstance)(e)))return Bc("Unsupported field value:",t,e),qc(e,t);if(e instanceof vc)return function(e,t){if(!Sc(t.Ya))throw t.ic(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.ic(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.tc&&4!==t.Ya)throw t.ic("Nested arrays are not supported");return function(e,t){const n=[];let s=0;for(const r of e){let e=Oc(r,t.sc(s));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),s++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,r.getModularInstance)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Dt(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=O.fromDate(e);return{timestampValue:qn(t.M,n)}}if(e instanceof O){const n=new O(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:qn(t.M,n)}}if(e instanceof Ic)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof wc)return{bytesValue:Un(t.M,e._byteString)};if(e instanceof Gu){const n=t.databaseId,s=e.firestore._databaseId;if(!s.isEqual(n))throw t.ic(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Kn(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ic(`Unsupported field value: ${Fu(e)}`)}(e,t)}function qc(e,t){const n={};return G(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):B(e,(e,s)=>{const r=Oc(s,t.Za(e));null!=r&&(n[e]=r)}),{mapValue:{fields:n}}}function Uc(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof O||e instanceof Ic||e instanceof wc||e instanceof Gu||e instanceof vc)}function Bc(e,t,n){if(!Uc(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const s=Fu(n);throw"an object"===s?t.ic(e+" a custom object"):t.ic(e+" "+s)}}function Gc(e,t,n){if((t=(0,r.getModularInstance)(t))instanceof gc)return t._internalPath;if("string"==typeof t)return $c(e,t);throw zc("Field path arguments must be of type string or ",e,!1,void 0,n)}const Kc=new RegExp("[~\\*/\\[\\]]");function $c(e,t,n){if(t.search(Kc)>=0)throw zc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new gc(...t.split("."))._internalPath}catch(s){throw zc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function zc(e,t,n,s,r){const i=s&&!s.isEmpty(),o=void 0!==r;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${s}`),o&&(u+=` in document ${r}`),u+=")"),new b(I.INVALID_ARGUMENT,a+e+u)}function jc(e,t){return e.some(e=>e.isEqual(t))}class Qc{constructor(e,t,n,s,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Gu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Wc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Wc extends Qc{data(){return super.data()}}function Hc(e,t){return"string"==typeof t?$c(e,t):t instanceof gc?t._internalPath:t._delegate._internalPath}class Yc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}exports.SnapshotMetadata=Yc;class Jc extends Qc{constructor(e,t,n,s,r,i){super(e,t,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Hc("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}exports.DocumentSnapshot=Jc;class Xc extends Jc{data(e={}){return super.data(e)}}exports.QueryDocumentSnapshot=Xc;class Zc{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Yc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Xc(this._firestore,this._userDataWriter,n.key,n,new Yc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new b(I.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new Xc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Yc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const s=new Xc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Yc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,i=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(i=(n=n.add(t.doc)).indexOf(t.doc.key)),{type:el(t.type),doc:s,oldIndex:r,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function el(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return g()}}function tl(e,t){return e instanceof Jc&&t instanceof Jc?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Zc&&t instanceof Zc&&e._firestore===t._firestore&&Hu(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function nl(e){if(ht(e)&&0===e.explicitOrderBy.length)throw new b(I.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}exports.QuerySnapshot=Zc;class sl{}function rl(e,...t){for(const n of t)e=n._apply(e);return e}exports.QueryConstraint=sl;class il extends sl{constructor(e,t,n){super(),this.hc=e,this.lc=t,this.fc=n,this.type="where"}_apply(e){const t=Dc(e.firestore),n=function(e,t,n,s,r,i,o){let a;if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new b(I.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){Il(o,i);const t=[];for(const n of o)t.push(vl(s,e,n));a={arrayValue:{values:t}}}else a=vl(s,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Il(o,i),a=Pc(n,"where",o,"in"===i||"not-in"===i);const u=Qe.create(r,i,a);return function(e,t){if(t.S()){const n=ft(e);if(null!==n&&!n.isEqual(t.field))throw new b(I.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const s=dt(e);null!==s&&bl(e,t.field,s)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(t.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==n)throw n===t.op?new b(I.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new b(I.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,u),u}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Ku(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new at(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}function ol(e,t,n){const s=t,r=Hc("where",e);return new il(r,s,n)}class al extends sl{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new b(I.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new b(I.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const s=new st(t,n);return function(e,t){if(null===dt(e)){const n=ft(e);null!==n&&bl(e,n,t.field)}}(e,s),s}(e._query,this.hc,this.dc);return new Ku(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new at(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function ul(e,t="asc"){const n=t,s=Hc("orderBy",e);return new al(s,n)}class cl extends sl{constructor(e,t,n){super(),this.type=e,this._c=t,this.wc=n}_apply(e){return new Ku(e.firestore,e.converter,yt(e._query,this._c,this.wc))}}function ll(e){return Ou("limit",e),new cl("limit",e,"F")}function hl(e){return Ou("limitToLast",e),new cl("limitToLast",e,"L")}class dl extends sl{constructor(e,t,n){super(),this.type=e,this.mc=t,this.gc=n}_apply(e){const t=wl(e,this.type,this.mc,this.gc);return new Ku(e.firestore,e.converter,function(e,t){return new at(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function fl(...e){return new dl("startAt",e,!0)}function ml(...e){return new dl("startAfter",e,!1)}class pl extends sl{constructor(e,t,n){super(),this.type=e,this.mc=t,this.gc=n}_apply(e){const t=wl(e,this.type,this.mc,this.gc);return new Ku(e.firestore,e.converter,function(e,t){return new at(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function gl(...e){return new pl("endBefore",e,!1)}function yl(...e){return new pl("endAt",e,!0)}function wl(e,t,n,s){if(n[0]=(0,r.getModularInstance)(n[0]),n[0]instanceof Qc)return function(e,t,n,s,r){if(!s)throw new b(I.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const i=[];for(const o of pt(e))if(o.field.isKeyField())i.push(we(t,s.key));else{const e=s.data.field(o.field);if(ee(e))throw new b(I.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new b(I.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}i.push(e)}return new nt(i,r)}(e._query,e.firestore._databaseId,t,n[0]._document,s);{const r=Dc(e.firestore);return function(e,t,n,s,r,i){const o=e.explicitOrderBy;if(r.length>o.length)throw new b(I.INVALID_ARGUMENT,`Too many arguments provided to ${s}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let u=0;u<r.length;u++){const i=r[u];if(o[u].field.isKeyField()){if("string"!=typeof i)throw new b(I.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${s}(), but got a ${typeof i}`);if(!mt(e)&&-1!==i.indexOf("/"))throw new b(I.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${s}() must be a plain document ID, but '${i}' contains a slash.`);const n=e.path.child($.fromString(i));if(!ue.isDocumentKey(n))throw new b(I.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${s}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const r=new ue(n);a.push(we(t,r))}else{const e=Pc(n,s,i);a.push(e)}}return new nt(a,i)}(e._query,e.firestore._databaseId,r,t,n,s)}}function vl(e,t,n){if("string"==typeof(n=(0,r.getModularInstance)(n))){if(""===n)throw new b(I.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mt(t)&&-1!==n.indexOf("/"))throw new b(I.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child($.fromString(n));if(!ue.isDocumentKey(s))throw new b(I.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return we(e,new ue(s))}if(n instanceof Gu)return we(e,n._key);throw new b(I.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fu(n)}.`)}function Il(e,t){if(!Array.isArray(e)||0===e.length)throw new b(I.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new b(I.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function bl(e,t,n){if(!n.isEqual(t))throw new b(I.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class El{convertValue(e,t="none"){switch(he(e)){case 0:return null;case 1:return e.booleanValue;case 2:return X(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Z(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw g()}}convertObject(e,t){const n={};return B(e.fields,(e,s)=>{n[e]=this.convertValue(s,t)}),n}convertGeoPoint(e){return new Ic(X(e.latitude),X(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=te(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ne(e));default:return null}}convertTimestamp(e){const t=J(e);return new O(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=$.fromString(e);y(gs(n));const s=new re(n.get(1),n.get(3)),r=new ue(n.popFirst(5));return s.isEqual(t)||f(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}function Tl(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}exports.AbstractUserDataWriter=El;class Sl extends El{constructor(e){super(),this.firestore=e}convertBytes(e){return new wc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gu(this.firestore,null,t)}}class xl{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dc(e)}set(e,t,n){this._verifyNotCommitted();const s=_l(e,this._firestore),r=Tl(s.converter,t,n),i=Nc(this._dataReader,"WriteBatch.set",s._key,r,null!==s.converter,n);return this._mutations.push(i.toMutation(s._key,Kt.none())),this}update(e,t,n,...s){this._verifyNotCommitted();const i=_l(e,this._firestore);let o;return o="string"==typeof(t=(0,r.getModularInstance)(t))||t instanceof gc?Fc(this._dataReader,"WriteBatch.update",i._key,t,n,s):Lc(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(o.toMutation(i._key,Kt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_l(e,this._firestore);return this._mutations=this._mutations.concat(new nn(t._key,Kt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new b(I.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _l(e,t){if((e=(0,r.getModularInstance)(e)).firestore!==t)throw new b(I.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Dl(e){e=Pu(e,Gu);const t=Pu(e.firestore,ec);return Su(sc(t),e._key).then(n=>Bl(t,e,n))}exports.WriteBatch=xl;class Nl extends El{constructor(e){super(),this.firestore=e}convertBytes(e){return new wc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gu(this.firestore,null,t)}}function Al(e){e=Pu(e,Gu);const t=Pu(e.firestore,ec),n=sc(t),s=new Nl(t);return Tu(n,e._key).then(n=>new Jc(t,s,e._key,n,new Yc(null!==n&&n.hasLocalMutations,!0),e.converter))}function Cl(e){e=Pu(e,Gu);const t=Pu(e.firestore,ec);return Su(sc(t),e._key,{source:"server"}).then(n=>Bl(t,e,n))}function kl(e){e=Pu(e,Ku);const t=Pu(e.firestore,ec),n=sc(t),s=new Nl(t);return nl(e._query),_u(n,e._query).then(n=>new Zc(t,s,e,n))}function Ml(e){e=Pu(e,Ku);const t=Pu(e.firestore,ec),n=sc(t),s=new Nl(t);return xu(n,e._query).then(n=>new Zc(t,s,e,n))}function Vl(e){e=Pu(e,Ku);const t=Pu(e.firestore,ec),n=sc(t),s=new Nl(t);return _u(n,e._query,{source:"server"}).then(n=>new Zc(t,s,e,n))}function Rl(e,t,n){e=Pu(e,Gu);const s=Pu(e.firestore,ec),r=Tl(e.converter,t,n);return Ul(s,[Nc(Dc(s),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,Kt.none())])}function Ll(e,t,n,...s){e=Pu(e,Gu);const i=Pu(e.firestore,ec),o=Dc(i);let a;return Ul(i,[(a="string"==typeof(t=(0,r.getModularInstance)(t))||t instanceof gc?Fc(o,"updateDoc",e._key,t,n,s):Lc(o,"updateDoc",e._key,t)).toMutation(e._key,Kt.exists(!0))])}function Fl(e){return Ul(Pu(e.firestore,ec),[new nn(e._key,Kt.none())])}function Pl(e,t){const n=Pu(e.firestore,ec),s=Qu(e),r=Tl(e.converter,t);return Ul(n,[Nc(Dc(e.firestore),"addDoc",s._key,r,null!==e.converter,{}).toMutation(s._key,Kt.exists(!1))]).then(()=>s)}function Ol(e,...t){var n,s,i;e=(0,r.getModularInstance)(e);let o={includeMetadataChanges:!1},a=0;"object"!=typeof t[a]||Ju(t[a])||(o=t[a],a++);const u={includeMetadataChanges:o.includeMetadataChanges};if(Ju(t[a])){const e=t[a];t[a]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[a+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),t[a+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let c,l,h;if(e instanceof Gu)l=Pu(e.firestore,ec),h=ct(e._key.path),c={next:n=>{t[a]&&t[a](Bl(l,e,n))},error:t[a+1],complete:t[a+2]};else{const n=Pu(e,Ku);l=Pu(n.firestore,ec),h=n._query;const s=new Nl(l);c={next:e=>{t[a]&&t[a](new Zc(l,s,n,e))},error:t[a+1],complete:t[a+2]},nl(e._query)}return function(e,t,n,s){const r=new au(c),i=new fa(t,r,n);return e.asyncQueue.enqueueAndForget(async()=>ua(await Iu(e),i)),()=>{r.pa(),e.asyncQueue.enqueueAndForget(async()=>ca(await Iu(e),i))}}(sc(l),h,u)}function ql(e,t){return Du(sc(e=Pu(e,ec)),Ju(t)?t:{next:t})}function Ul(e,t){return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>Da(await vu(e),t,n)),n.promise}(sc(e),t)}function Bl(e,t,n){const s=n.docs.get(t._key),r=new Nl(e);return new Jc(e,r,t._key,s,new Yc(n.hasPendingWrites,n.fromCache),t.converter)}class Gl extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dc(e)}get(e){const t=_l(e,this._firestore),n=new Sl(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return g();const s=e[0];if(s.isFoundDocument())return new Qc(this._firestore,n,s.key,s,t.converter);if(s.isNoDocument())return new Qc(this._firestore,n,t._key,null,t.converter);throw g()})}set(e,t,n){const s=_l(e,this._firestore),r=Tl(s.converter,t,n),i=Nc(this._dataReader,"Transaction.set",s._key,r,null!==s.converter,n);return this._transaction.set(s._key,i),this}update(e,t,n,...s){const i=_l(e,this._firestore);let o;return o="string"==typeof(t=(0,r.getModularInstance)(t))||t instanceof gc?Fc(this._dataReader,"Transaction.update",i._key,t,n,s):Lc(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,o),this}delete(e){const t=_l(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_l(e,this._firestore),n=new Nl(this._firestore);return super.get(e).then(e=>new Jc(this._firestore,n,t._key,e._document,new Yc(!1,!1),t.converter))}}function Kl(e,t){return Nu(sc(e=Pu(e,ec)),n=>t(new Gl(e,n)))}function $l(){return new Ac("deleteField")}function zl(){return new kc("serverTimestamp")}function jl(...e){return new Mc("arrayUnion",e)}function Ql(...e){return new Vc("arrayRemove",e)}function Wl(e){return new Rc("increment",e)}function Hl(e){return sc(e=Pu(e,ec)),new xl(e,t=>Ul(e,t))}function Yl(e,t){sc(e=Pu(e,ec));const n="string"==typeof t?function(e){try{return JSON.parse(e)}catch(e){throw new b(I.INVALID_ARGUMENT,"Failed to parse JSON:"+e.message)}}(t):t,s=[];if(Array.isArray(n.indexes))for(const r of n.indexes){const e=Jl(r,"collectionGroup"),t=[];if(Array.isArray(r.fields))for(const n of r.fields){const e=$c("setIndexConfiguration",Jl(n,"fieldPath"));"CONTAINS"===n.arrayConfig?t.push(new Re(e,2)):"ASCENDING"===n.order?t.push(new Re(e,0)):"DESCENDING"===n.order&&t.push(new Re(e,1))}s.push(new ke(ke.UNKNOWN_ID,e,t,Le.empty()))}return Promise.resolve()}function Jl(e,t){if("string"!=typeof e[t])throw new b(I.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}exports.Transaction=Gl,function(e,s=!0){!function(e){u=e}(t.SDK_VERSION),(0,t._registerComponent)(new n.Component("firestore",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=new ec(n,new _(e.getProvider("auth-internal")),new C(e.getProvider("app-check-internal")));return t=Object.assign({useFetchStreams:s},t),r._setSettings(t),r},"PUBLIC")),(0,t.registerVersion)(o,"3.4.7",void 0),(0,t.registerVersion)(o,"3.4.7","esm2017")}();
},{"@firebase/app":"h2Mb","@firebase/component":"vhY9","@firebase/logger":"JJem","@firebase/util":"chA2","@firebase/webchannel-wrapper":"qQDx","process":"pBGv"}],"vHL5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/firestore");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"@firebase/firestore":"lBbe"}],"qA1g":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,a=arguments[3];!function(a,e){"function"==typeof t&&t.amd?t([],function(){return e(a)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(a):a.Notiflix=e(a)}(void 0!==a?a:"undefined"!=typeof window?window:this,function(t){"use strict";if(void 0===t&&void 0===t.document)return!1;var a,e="Success",n="Failure",i="Warning",r="Info",o={ID:"NotiflixReportWrap",className:"notiflix-report",width:"320px",backgroundColor:"#f8f8f8",borderRadius:"25px",rtl:!1,zindex:4002,backOverlay:!0,backOverlayColor:"rgba(0,0,0,0.5)",backOverlayClickToClose:!1,fontFamily:"Quicksand",svgSize:"110px",plainText:!0,titleFontSize:"16px",titleMaxLength:34,messageFontSize:"13px",messageMaxLength:400,buttonFontSize:"14px",buttonMaxLength:34,cssAnimation:!0,cssAnimationDuration:360,cssAnimationStyle:"fade",success:{svgColor:"#32c682",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#32c682",buttonColor:"#fff",backOverlayColor:"rgba(50,198,130,0.2)"},failure:{svgColor:"#ff5549",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#ff5549",buttonColor:"#fff",backOverlayColor:"rgba(255,85,73,0.2)"},warning:{svgColor:"#eebf31",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#eebf31",buttonColor:"#fff",backOverlayColor:"rgba(238,191,49,0.2)"},info:{svgColor:"#26c0d3",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#26c0d3",buttonColor:"#fff",backOverlayColor:"rgba(38,192,211,0.2)"}},s=function(t){return console.error("%c Notiflix Error ","padding:2px;border-radius:20px;color:#fff;background:#ff5549","\n"+t+"\n\nVisit documentation page to learn more: https://notiflix.github.io/documentation")},p=function(a){return a||(a="head"),null!==t.document[a]||(s('\nNotiflix needs to be appended to the "<'+a+'>" element, but you called it before the "<'+a+'>" element has been created.'),!1)},l=function(){var t={},a=!1,e=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(a=arguments[0],e++);for(var n=function(e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a&&"[object Object]"===Object.prototype.toString.call(e[n])?t[n]=l(t[n],e[n]):t[n]=e[n])};e<arguments.length;e++)n(arguments[e]);return t},c=function(a){var e=t.document.createElement("div");return e.innerHTML=a,e.textContent||e.innerText||""},m=function(){return'[id^=NotiflixReportWrap]{position:fixed;z-index:4002;width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;left:0;top:0;padding:10px;color:#1e1e1e;border-radius:25px;background:transparent;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}[id^=NotiflixReportWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixReportWrap]>div[class*="-overlay"]{width:100%;height:100%;left:0;top:0;background:rgba(255,255,255,.5);position:fixed;z-index:0}[id^=NotiflixReportWrap]>div.nx-report-click-to-close{cursor:pointer}[id^=NotiflixReportWrap]>div[class*="-content"]{width:320px;max-width:100%;max-height:96vh;overflow-x:hidden;overflow-y:auto;border-radius:inherit;padding:10px;-webkit-filter:drop-shadow(0 0 5px rgba(0,0,0,0.05));filter:drop-shadow(0 0 5px rgba(0, 0, 0, .05));border:1px solid rgba(0,0,0,.03);background:#f8f8f8;position:relative;z-index:1}[id^=NotiflixReportWrap]>div[class*="-content"]::-webkit-scrollbar{width:0;height:0}[id^=NotiflixReportWrap]>div[class*="-content"]::-webkit-scrollbar-thumb{background:transparent}[id^=NotiflixReportWrap]>div[class*="-content"]::-webkit-scrollbar-track{background:transparent}[id^=NotiflixReportWrap]>div[class*="-content"]>div[class$="-icon"]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:110px;height:110px;display:block;margin:6px auto 12px}[id^=NotiflixReportWrap]>div[class*="-content"]>div[class$="-icon"] svg{min-width:100%;max-width:100%;height:auto}[id^=NotiflixReportWrap]>*>h5{word-break:break-all;word-break:break-word;font-family:inherit!important;font-size:16px;font-weight:500;line-height:1.4;margin:0 0 10px;padding:0 0 10px;border-bottom:1px solid rgba(0,0,0,.1);float:left;width:100%;text-align:center}[id^=NotiflixReportWrap]>*>p{word-break:break-all;word-break:break-word;font-family:inherit!important;font-size:13px;line-height:1.4;font-weight:normal;float:left;width:100%;padding:0 10px;margin:0 0 10px}[id^=NotiflixReportWrap] a#NXReportButton{word-break:break-all;word-break:break-word;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit!important;-webkit-transition:all .25s ease-in-out;-o-transition:all .25s ease-in-out;transition:all .25s ease-in-out;cursor:pointer;float:right;padding:7px 17px;background:#32c682;font-size:14px;line-height:1.4;font-weight:500;border-radius:inherit!important;color:#fff}[id^=NotiflixReportWrap] a#NXReportButton:hover{-webkit-box-shadow:inset 0 -60px 5px -5px rgba(0,0,0,.25);box-shadow:inset 0 -60px 5px -5px rgba(0,0,0,.25)}[id^=NotiflixReportWrap].nx-rtl-on a#NXReportButton{float:left}[id^=NotiflixReportWrap]>div[class*="-overlay"].nx-with-animation{-webkit-animation:report-overlay-animation .3s ease-in-out 0s normal;animation:report-overlay-animation .3s ease-in-out 0s normal}@-webkit-keyframes report-overlay-animation{0%{opacity:0}100%{opacity:1}}@keyframes report-overlay-animation{0%{opacity:0}100%{opacity:1}}[id^=NotiflixReportWrap]>div[class*="-content"].nx-with-animation.nx-fade{-webkit-animation:report-animation-fade .3s ease-in-out 0s normal;animation:report-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes report-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixReportWrap]>div[class*="-content"].nx-with-animation.nx-zoom{-webkit-animation:report-animation-zoom .3s ease-in-out 0s normal;animation:report-animation-zoom .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-zoom{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes report-animation-zoom{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}[id^=NotiflixReportWrap].nx-remove>div[class*="-overlay"].nx-with-animation{opacity:0;-webkit-animation:report-overlay-animation-remove .3s ease-in-out 0s normal;animation:report-overlay-animation-remove .3s ease-in-out 0s normal}@-webkit-keyframes report-overlay-animation-remove{0%{opacity:1}100%{opacity:0}}@keyframes report-overlay-animation-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixReportWrap].nx-remove>div[class*="-content"].nx-with-animation.nx-fade{opacity:0;-webkit-animation:report-animation-fade-remove .3s ease-in-out 0s normal;animation:report-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes report-animation-fade-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixReportWrap].nx-remove>div[class*="-content"].nx-with-animation.nx-zoom{opacity:0;-webkit-animation:report-animation-zoom-remove .3s ease-in-out 0s normal;animation:report-animation-zoom-remove .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-zoom-remove{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.5;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}@keyframes report-animation-zoom-remove{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.5;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}'},x=function(s,m,x,b,u,d){if(!p("body"))return!1;a||f.Report.init({});var k={};if("object"==typeof u&&!Array.isArray(u)||"object"==typeof d&&!Array.isArray(d)){var g={};"object"==typeof u?g=u:"object"==typeof d&&(g=d),k=l(!0,a,{}),a=l(!0,a,g)}var y=a[s.toLocaleLowerCase("en")];"string"!=typeof m&&(m="Notiflix "+s),"string"!=typeof x&&(s===e?x='"Do not try to become a person of success but try to become a person of value." <br><br>- Albert Einstein':s===n?x='"Failure is simply the opportunity to begin again, this time more intelligently." <br><br>- Henry Ford':s===i?x='"The peoples who want to live comfortably without producing and fatigue; they are doomed to lose their dignity, then liberty, and then independence and destiny." <br><br>- Mustafa Kemal Ataturk':s===r&&(x='"Knowledge rests not upon truth alone, but upon error also." <br><br>- Carl Gustav Jung')),"string"!=typeof b&&(b="Okay"),a.plainText&&(m=c(m),x=c(x),b=c(b)),a.plainText||(m.length>a.titleMaxLength&&(m="Possible HTML Tags Error",x='The "plainText" option is "false" and the title content length is more than the "titleMaxLength" option.',b="Okay"),x.length>a.messageMaxLength&&(m="Possible HTML Tags Error",x='The "plainText" option is "false" and the message content length is more than the "messageMaxLength" option.',b="Okay"),b.length>a.buttonMaxLength&&(m="Possible HTML Tags Error",x='The "plainText" option is "false" and the button content length is more than the "buttonMaxLength" option.',b="Okay")),m.length>a.titleMaxLength&&(m=m.substring(0,a.titleMaxLength)+"..."),x.length>a.messageMaxLength&&(x=x.substring(0,a.messageMaxLength)+"..."),b.length>a.buttonMaxLength&&(b=b.substring(0,a.buttonMaxLength)+"..."),a.cssAnimation||(a.cssAnimationDuration=0);var w=t.document.createElement("div");w.id=o.ID,w.className=a.className,w.style.zIndex=a.zindex,w.style.borderRadius=a.borderRadius,w.style.fontFamily='"'+a.fontFamily+'", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif',a.rtl&&(w.setAttribute("dir","rtl"),w.classList.add("nx-rtl-on")),w.style.display="flex",w.style.flexWrap="wrap",w.style.flexDirection="column",w.style.alignItems="center",w.style.justifyContent="center";var h="",v=!0===a.backOverlayClickToClose;a.backOverlay&&(h='<div class="'+a.className+"-overlay"+(a.cssAnimation?" nx-with-animation":"")+(v?" nx-report-click-to-close":"")+'" style="background:'+(y.backOverlayColor||a.backOverlayColor)+";animation-duration:"+a.cssAnimationDuration+'ms;"></div>');var N,R,z="";if(s===e?(N=a.svgSize,R=y.svgColor,N||(N="110px"),R||(R="#32c682"),z='<svg xmlns="http://www.w3.org/2000/svg" id="NXReportSuccess" width="'+N+'" height="'+N+'" fill="'+R+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportSuccess1-animation{0%{-webkit-transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px)}50%,to{-webkit-transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px)}60%{-webkit-transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px)}}@keyframes NXReportSuccess1-animation{0%{-webkit-transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px)}50%,to{-webkit-transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px)}60%{-webkit-transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px)}}@-webkit-keyframes NXReportSuccess4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportSuccess4-animation{0%{opacity:0}50%,to{opacity:1}}@-webkit-keyframes NXReportSuccess3-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportSuccess3-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportSuccess2-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportSuccess2-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}#NXReportSuccess *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportSuccess2-animation;animation-name:NXReportSuccess2-animation;-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)"><path d="M60 115.38C29.46 115.38 4.62 90.54 4.62 60 4.62 29.46 29.46 4.62 60 4.62c30.54 0 55.38 24.84 55.38 55.38 0 30.54-24.84 55.38-55.38 55.38zM60 0C26.92 0 0 26.92 0 60s26.92 60 60 60 60-26.92 60-60S93.08 0 60 0z" style="-webkit-animation-name:NXReportSuccess3-animation;animation-name:NXReportSuccess3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportSuccess1-animation;animation-name:NXReportSuccess1-animation;-webkit-transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px);-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)"><path d="M88.27 35.39L52.8 75.29 31.43 58.2c-.98-.81-2.44-.63-3.24.36-.79.99-.63 2.44.36 3.24l23.08 18.46c.43.34.93.51 1.44.51.64 0 1.27-.26 1.74-.78l36.91-41.53a2.3 2.3 0 0 0-.19-3.26c-.95-.86-2.41-.77-3.26.19z" style="-webkit-animation-name:NXReportSuccess4-animation;animation-name:NXReportSuccess4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>'):s===n?z=function(t,a){return t||(t="110px"),a||(a="#ff5549"),'<svg xmlns="http://www.w3.org/2000/svg" id="NXReportFailure" width="'+t+'" height="'+t+'" fill="'+a+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportFailure2-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportFailure2-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportFailure1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportFailure1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportFailure3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportFailure3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportFailure4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportFailure4-animation{0%{opacity:0}50%,to{opacity:1}}#NXReportFailure *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportFailure1-animation;animation-name:NXReportFailure1-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M4.35 34.95c0-16.82 13.78-30.6 30.6-30.6h50.1c16.82 0 30.6 13.78 30.6 30.6v50.1c0 16.82-13.78 30.6-30.6 30.6h-50.1c-16.82 0-30.6-13.78-30.6-30.6v-50.1zM34.95 120h50.1c19.22 0 34.95-15.73 34.95-34.95v-50.1C120 15.73 104.27 0 85.05 0h-50.1C15.73 0 0 15.73 0 34.95v50.1C0 104.27 15.73 120 34.95 120z" style="-webkit-animation-name:NXReportFailure2-animation;animation-name:NXReportFailure2-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportFailure3-animation;animation-name:NXReportFailure3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M82.4 37.6c-.9-.9-2.37-.9-3.27 0L60 56.73 40.86 37.6a2.306 2.306 0 0 0-3.26 3.26L56.73 60 37.6 79.13c-.9.9-.9 2.37 0 3.27.45.45 1.04.68 1.63.68.59 0 1.18-.23 1.63-.68L60 63.26 79.13 82.4c.45.45 1.05.68 1.64.68.58 0 1.18-.23 1.63-.68.9-.9.9-2.37 0-3.27L63.26 60 82.4 40.86c.9-.91.9-2.36 0-3.26z" style="-webkit-animation-name:NXReportFailure4-animation;animation-name:NXReportFailure4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>'}(a.svgSize,y.svgColor):s===i?z=function(t,a){return t||(t="110px"),a||(a="#eebf31"),'<svg xmlns="http://www.w3.org/2000/svg" id="NXReportWarning" width="'+t+'" height="'+t+'" fill="'+a+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportWarning2-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportWarning2-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportWarning1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportWarning1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportWarning3-animation{0%{-webkit-transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px)}50%,to{-webkit-transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px)}60%{-webkit-transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px)}}@keyframes NXReportWarning3-animation{0%{-webkit-transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px)}50%,to{-webkit-transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px)}60%{-webkit-transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px)}}@-webkit-keyframes NXReportWarning4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportWarning4-animation{0%{opacity:0}50%,to{opacity:1}}#NXReportWarning *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportWarning1-animation;animation-name:NXReportWarning1-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M115.46 106.15l-54.04-93.8c-.61-1.06-2.23-1.06-2.84 0l-54.04 93.8c-.62 1.07.21 2.29 1.42 2.29h108.08c1.21 0 2.04-1.22 1.42-2.29zM65.17 10.2l54.04 93.8c2.28 3.96-.65 8.78-5.17 8.78H5.96c-4.52 0-7.45-4.82-5.17-8.78l54.04-93.8c2.28-3.95 8.03-4 10.34 0z" style="-webkit-animation-name:NXReportWarning2-animation;animation-name:NXReportWarning2-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportWarning3-animation;animation-name:NXReportWarning3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px)"><path d="M57.83 94.01c0 1.2.97 2.17 2.17 2.17s2.17-.97 2.17-2.17v-3.2c0-1.2-.97-2.17-2.17-2.17s-2.17.97-2.17 2.17v3.2zm0-14.15c0 1.2.97 2.17 2.17 2.17s2.17-.97 2.17-2.17V39.21c0-1.2-.97-2.17-2.17-2.17s-2.17.97-2.17 2.17v40.65z" style="-webkit-animation-name:NXReportWarning4-animation;animation-name:NXReportWarning4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>'}(a.svgSize,y.svgColor):s===r&&(z=function(t,a){return t||(t="110px"),a||(a="#26c0d3"),'<svg xmlns="http://www.w3.org/2000/svg" id="NXReportInfo" width="'+t+'" height="'+t+'" fill="'+a+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportInfo4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportInfo4-animation{0%{opacity:0}50%,to{opacity:1}}@-webkit-keyframes NXReportInfo3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportInfo3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportInfo2-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportInfo2-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportInfo1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportInfo1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}#NXReportInfo *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportInfo1-animation;animation-name:NXReportInfo1-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M60 115.38C29.46 115.38 4.62 90.54 4.62 60 4.62 29.46 29.46 4.62 60 4.62c30.54 0 55.38 24.84 55.38 55.38 0 30.54-24.84 55.38-55.38 55.38zM60 0C26.92 0 0 26.92 0 60s26.92 60 60 60 60-26.92 60-60S93.08 0 60 0z" style="-webkit-animation-name:NXReportInfo2-animation;animation-name:NXReportInfo2-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportInfo3-animation;animation-name:NXReportInfo3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M57.75 43.85c0-1.24 1.01-2.25 2.25-2.25s2.25 1.01 2.25 2.25v48.18c0 1.24-1.01 2.25-2.25 2.25s-2.25-1.01-2.25-2.25V43.85zm0-15.88c0-1.24 1.01-2.25 2.25-2.25s2.25 1.01 2.25 2.25v3.32c0 1.25-1.01 2.25-2.25 2.25s-2.25-1-2.25-2.25v-3.32z" style="-webkit-animation-name:NXReportInfo4-animation;animation-name:NXReportInfo4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>'}(a.svgSize,y.svgColor)),w.innerHTML=h+'<div class="'+a.className+"-content"+(a.cssAnimation?" nx-with-animation ":"")+" nx-"+a.cssAnimationStyle+'" style="width:'+a.width+"; background:"+a.backgroundColor+"; animation-duration:"+a.cssAnimationDuration+'ms;"><div style="width:'+a.svgSize+"; height:"+a.svgSize+';" class="'+a.className+'-icon">'+z+'</div><h5 class="'+a.className+'-title" style="font-weight:500; font-size:'+a.titleFontSize+"; color:"+y.titleColor+';">'+m+'</h5><p class="'+a.className+'-message" style="font-size:'+a.messageFontSize+"; color:"+y.messageColor+';">'+x+'</p><a id="NXReportButton" class="'+a.className+'-button" style="font-weight:500; font-size:'+a.buttonFontSize+"; background:"+y.buttonBackground+"; color:"+y.buttonColor+';">'+b+"</a></div>",!t.document.getElementById(w.id)){t.document.body.appendChild(w);var X=function(){var e=t.document.getElementById(w.id);e.classList.add("nx-remove");var n=setTimeout(function(){null!==e.parentNode&&e.parentNode.removeChild(e),clearTimeout(n)},a.cssAnimationDuration)};if(t.document.getElementById("NXReportButton").addEventListener("click",function(){"function"==typeof u&&u(),X()}),h&&v)t.document.querySelector(".nx-report-click-to-close").addEventListener("click",function(){X()})}a=l(!0,a,k)},f={Report:{init:function(e){a=l(!0,o,e),function(a,e){if(!p("head"))return!1;if(null!==a()&&!t.document.getElementById(e)){var n=t.document.createElement("style");n.id=e,n.innerHTML=a(),t.document.head.appendChild(n)}}(m,"NotiflixReportInternalCSS")},merge:function(t){if(!a)return s("You have to initialize the Report module before call Merge function."),!1;a=l(!0,a,t)},success:function(t,a,n,i,r){x(e,t,a,n,i,r)},failure:function(t,a,e,i,r){x(n,t,a,e,i,r)},warning:function(t,a,e,n,r){x(i,t,a,e,n,r)},info:function(t,a,e,n,i){x(r,t,a,e,n,i)}}};return"object"==typeof t.Notiflix?l(!0,t.Notiflix,{Report:f.Report}):{Report:f.Report}});
},{}],"MeeU":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,o=arguments[3];!function(o,i){"function"==typeof t&&t.amd?t([],function(){return i(o)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=i(o):o.Notiflix=i(o)}(void 0!==o?o:"undefined"!=typeof window?window:this,function(t){"use strict";if(void 0===t&&void 0===t.document)return!1;var o,i="Success",e="Failure",n="Warning",a="Info",s={wrapID:"NotiflixNotifyWrap",overlayID:"NotiflixNotifyOverlay",width:"280px",position:"right-top",distance:"10px",opacity:1,borderRadius:"5px",rtl:!1,timeout:3e3,messageMaxLength:110,backOverlay:!1,backOverlayColor:"rgba(0,0,0,0.5)",plainText:!0,showOnlyTheLastOne:!1,clickToClose:!1,pauseOnHover:!0,ID:"NotiflixNotify",className:"notiflix-notify",zindex:4001,fontFamily:"Quicksand",fontSize:"13px",cssAnimation:!0,cssAnimationDuration:400,cssAnimationStyle:"fade",closeButton:!1,useIcon:!0,useFontAwesome:!1,fontAwesomeIconStyle:"basic",fontAwesomeIconSize:"34px",success:{background:"#32c682",textColor:"#fff",childClassName:"notiflix-notify-success",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-check-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(50,198,130,0.2)"},failure:{background:"#ff5549",textColor:"#fff",childClassName:"notiflix-notify-failure",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-times-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(255,85,73,0.2)"},warning:{background:"#eebf31",textColor:"#fff",childClassName:"notiflix-notify-warning",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-exclamation-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(238,191,49,0.2)"},info:{background:"#26c0d3",textColor:"#fff",childClassName:"notiflix-notify-info",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-info-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(38,192,211,0.2)"}},r=function(t){return console.error("%c Notiflix Error ","padding:2px;border-radius:20px;color:#fff;background:#ff5549","\n"+t+"\n\nVisit documentation page to learn more: https://notiflix.github.io/documentation")},l=function(o){return o||(o="head"),null!==t.document[o]||(r('\nNotiflix needs to be appended to the "<'+o+'>" element, but you called it before the "<'+o+'>" element has been created.'),!1)},f=function(){var t={},o=!1,i=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(o=arguments[0],i++);for(var e=function(i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(o&&"[object Object]"===Object.prototype.toString.call(i[e])?t[e]=f(t[e],i[e]):t[e]=i[e])};i<arguments.length;i++)e(arguments[i]);return t},c=function(){return'[id^=NotiflixNotifyWrap]{pointer-events:none;position:fixed;z-index:4001;opacity:1;right:10px;top:10px;width:280px;max-width:96%;-webkit-box-sizing:border-box;box-sizing:border-box;background:transparent}[id^=NotiflixNotifyWrap].nx-flex-center-center{max-height:calc(100vh - 20px);overflow-x:hidden;overflow-y:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:auto}[id^=NotiflixNotifyWrap]::-webkit-scrollbar{width:0;height:0}[id^=NotiflixNotifyWrap]::-webkit-scrollbar-thumb{background:transparent}[id^=NotiflixNotifyWrap]::-webkit-scrollbar-track{background:transparent}[id^=NotiflixNotifyWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixNotifyOverlay]{-webkit-transition:background .3s ease-in-out;-o-transition:background .3s ease-in-out;transition:background .3s ease-in-out}[id^=NotiflixNotifyWrap]>div{pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;width:100%;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;position:relative;margin:0 0 10px;border-radius:5px;background:#1e1e1e;color:#fff;padding:10px 12px;font-size:14px;line-height:1.4}[id^=NotiflixNotifyWrap]>div:last-child{margin:0}[id^=NotiflixNotifyWrap]>div.nx-with-callback{cursor:pointer}[id^=NotiflixNotifyWrap]>div.nx-with-icon{padding:8px;min-height:56px}[id^=NotiflixNotifyWrap]>div.nx-paused{cursor:auto}[id^=NotiflixNotifyWrap]>div.nx-notify-click-to-close{cursor:pointer}[id^=NotiflixNotifyWrap]>div.nx-with-close-button{padding:10px 36px 10px 12px}[id^=NotiflixNotifyWrap]>div.nx-with-icon.nx-with-close-button{padding:6px 36px 6px 6px}[id^=NotiflixNotifyWrap]>div>span.nx-message{cursor:inherit;font-weight:normal;font-family:inherit!important;word-break:break-all;word-break:break-word}[id^=NotiflixNotifyWrap]>div>span.nx-close-button{cursor:pointer;-webkit-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out;position:absolute;right:8px;top:0;bottom:0;margin:auto;color:inherit;width:20px;height:20px}[id^=NotiflixNotifyWrap]>div>span.nx-close-button:hover{-webkit-transform:rotate(90deg);transform:rotate(90deg)}[id^=NotiflixNotifyWrap]>div>span.nx-close-button>svg{position:absolute;width:16px;height:16px;right:2px;top:2px}[id^=NotiflixNotifyWrap]>div>.nx-message-icon{position:absolute;width:40px;height:40px;font-size:30px;line-height:40px;text-align:center;left:8px;top:0;bottom:0;margin:auto;border-radius:inherit}[id^=NotiflixNotifyWrap]>div>.nx-message-icon-fa.nx-message-icon-fa-shadow{color:inherit;background:rgba(0,0,0,.15);-webkit-box-shadow:inset 0 0 34px rgba(0,0,0,.2);box-shadow:inset 0 0 34px rgba(0,0,0,.2);text-shadow:0 0 10px rgba(0,0,0,.3)}[id^=NotiflixNotifyWrap]>div>span.nx-with-icon{position:relative;float:left;width:calc(100% - 40px);margin:0 0 0 40px;padding:0 0 0 10px;-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixNotifyWrap]>div.nx-rtl-on>.nx-message-icon{left:auto;right:8px}[id^=NotiflixNotifyWrap]>div.nx-rtl-on>span.nx-with-icon{padding:0 10px 0 0;margin:0 40px 0 0}[id^=NotiflixNotifyWrap]>div.nx-rtl-on>span.nx-close-button{right:auto;left:8px}[id^=NotiflixNotifyWrap]>div.nx-with-icon.nx-with-close-button.nx-rtl-on{padding:6px 6px 6px 36px}[id^=NotiflixNotifyWrap]>div.nx-with-close-button.nx-rtl-on{padding:10px 12px 10px 36px}[id^=NotiflixNotifyOverlay].nx-with-animation,[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-fade{-webkit-animation:notify-animation-fade .3s ease-in-out 0s normal;animation:notify-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes notify-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-zoom{-webkit-animation:notify-animation-zoom .3s ease-in-out 0s normal;animation:notify-animation-zoom .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-zoom{0%{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes notify-animation-zoom{0%{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(1);transform:scale(1)}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-right{-webkit-animation:notify-animation-from-right .3s ease-in-out 0s normal;animation:notify-animation-from-right .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-right{0%{right:-300px;opacity:0}50%{right:8px;opacity:1}100%{right:0;opacity:1}}@keyframes notify-animation-from-right{0%{right:-300px;opacity:0}50%{right:8px;opacity:1}100%{right:0;opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-left{-webkit-animation:notify-animation-from-left .3s ease-in-out 0s normal;animation:notify-animation-from-left .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-left{0%{left:-300px;opacity:0}50%{left:8px;opacity:1}100%{left:0;opacity:1}}@keyframes notify-animation-from-left{0%{left:-300px;opacity:0}50%{left:8px;opacity:1}100%{left:0;opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-top{-webkit-animation:notify-animation-from-top .3s ease-in-out 0s normal;animation:notify-animation-from-top .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-top{0%{top:-50px;opacity:0}50%{top:8px;opacity:1}100%{top:0;opacity:1}}@keyframes notify-animation-from-top{0%{top:-50px;opacity:0}50%{top:8px;opacity:1}100%{top:0;opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-bottom{-webkit-animation:notify-animation-from-bottom .3s ease-in-out 0s normal;animation:notify-animation-from-bottom .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-bottom{0%{bottom:-50px;opacity:0}50%{bottom:8px;opacity:1}100%{bottom:0;opacity:1}}@keyframes notify-animation-from-bottom{0%{bottom:-50px;opacity:0}50%{bottom:8px;opacity:1}100%{bottom:0;opacity:1}}[id^=NotiflixNotifyOverlay].nx-with-animation.nx-remove,[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-fade.nx-remove{opacity:0;-webkit-animation:notify-remove-fade .3s ease-in-out 0s normal;animation:notify-remove-fade .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-fade{0%{opacity:1}100%{opacity:0}}@keyframes notify-remove-fade{0%{opacity:1}100%{opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-zoom.nx-remove{-webkit-transform:scale(0);transform:scale(0);-webkit-animation:notify-remove-zoom .3s ease-in-out 0s normal;animation:notify-remove-zoom .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-zoom{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(0);transform:scale(0)}}@keyframes notify-remove-zoom{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(0);transform:scale(0)}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-top.nx-remove{opacity:0;-webkit-animation:notify-remove-to-top .3s ease-in-out 0s normal;animation:notify-remove-to-top .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-top{0%{top:0;opacity:1}50%{top:8px;opacity:1}100%{top:-50px;opacity:0}}@keyframes notify-remove-to-top{0%{top:0;opacity:1}50%{top:8px;opacity:1}100%{top:-50px;opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-right.nx-remove{opacity:0;-webkit-animation:notify-remove-to-right .3s ease-in-out 0s normal;animation:notify-remove-to-right .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-right{0%{right:0;opacity:1}50%{right:8px;opacity:1}100%{right:-300px;opacity:0}}@keyframes notify-remove-to-right{0%{right:0;opacity:1}50%{right:8px;opacity:1}100%{right:-300px;opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-bottom.nx-remove{opacity:0;-webkit-animation:notify-remove-to-bottom .3s ease-in-out 0s normal;animation:notify-remove-to-bottom .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-bottom{0%{bottom:0;opacity:1}50%{bottom:8px;opacity:1}100%{bottom:-50px;opacity:0}}@keyframes notify-remove-to-bottom{0%{bottom:0;opacity:1}50%{bottom:8px;opacity:1}100%{bottom:-50px;opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-left.nx-remove{opacity:0;-webkit-animation:notify-remove-to-left .3s ease-in-out 0s normal;animation:notify-remove-to-left .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-left{0%{left:0;opacity:1}50%{left:8px;opacity:1}100%{left:-300px;opacity:0}}@keyframes notify-remove-to-left{0%{left:0;opacity:1}50%{left:8px;opacity:1}100%{left:-300px;opacity:0}}'},m=0,p=function(r,c,p,d){if(!l("body"))return!1;o||y.Notify.init({});var x=f(!0,o,{});if("object"==typeof p&&!Array.isArray(p)||"object"==typeof d&&!Array.isArray(d)){var u={};"object"==typeof p?u=p:"object"==typeof d&&(u=d),o=f(!0,o,u)}var b,g,w=o[r.toLocaleLowerCase("en")];m++,"string"!=typeof c&&(c="Notiflix "+r),o.plainText&&(b=c,(g=t.document.createElement("div")).innerHTML=b,c=g.textContent||g.innerText||""),!o.plainText&&c.length>o.messageMaxLength&&(o=f(!0,o,{closeButton:!0,messageMaxLength:150}),c='Possible HTML Tags Error: The "plainText" option is "false" and the notification content length is more than the "messageMaxLength" option.'),c.length>o.messageMaxLength&&(c=c.substring(0,o.messageMaxLength)+"..."),"shadow"===o.fontAwesomeIconStyle&&(w.fontAwesomeIconColor=w.background),o.cssAnimation||(o.cssAnimationDuration=0);var h=t.document.getElementById(s.wrapID)||t.document.createElement("div");if(h.id=s.wrapID,h.style.width=o.width,h.style.zIndex=o.zindex,h.style.opacity=o.opacity,"center-center"===o.position?(h.style.left=o.distance,h.style.top=o.distance,h.style.right=o.distance,h.style.bottom=o.distance,h.style.margin="auto",h.classList.add("nx-flex-center-center"),h.style.maxHeight="calc((100vh - "+o.distance+") - "+o.distance+")",h.style.display="flex",h.style.flexWrap="wrap",h.style.flexDirection="column",h.style.justifyContent="center",h.style.alignItems="center",h.style.pointerEvents="none"):"center-top"===o.position?(h.style.left=o.distance,h.style.right=o.distance,h.style.top=o.distance,h.style.bottom="auto",h.style.margin="auto"):"center-bottom"===o.position?(h.style.left=o.distance,h.style.right=o.distance,h.style.bottom=o.distance,h.style.top="auto",h.style.margin="auto"):"right-bottom"===o.position?(h.style.right=o.distance,h.style.bottom=o.distance,h.style.top="auto",h.style.left="auto"):"left-top"===o.position?(h.style.left=o.distance,h.style.top=o.distance,h.style.right="auto",h.style.bottom="auto"):"left-bottom"===o.position?(h.style.left=o.distance,h.style.bottom=o.distance,h.style.top="auto",h.style.right="auto"):(h.style.right=o.distance,h.style.top=o.distance,h.style.left="auto",h.style.bottom="auto"),o.backOverlay){var v=t.document.getElementById(s.overlayID)||t.document.createElement("div");v.id=s.overlayID,v.style.width="100%",v.style.height="100%",v.style.position="fixed",v.style.zIndex=o.zindex-1,v.style.left=0,v.style.top=0,v.style.right=0,v.style.bottom=0,v.style.background=w.backOverlayColor||o.backOverlayColor,v.className=o.cssAnimation?"nx-with-animation":"",v.style.animationDuration=o.cssAnimation?o.cssAnimationDuration+"ms":"",t.document.getElementById(s.overlayID)||t.document.body.appendChild(v)}t.document.getElementById(s.wrapID)||t.document.body.appendChild(h);var k=t.document.createElement("div");k.id=o.ID+"-"+m,k.className=o.className+" "+w.childClassName+" "+(o.cssAnimation?"nx-with-animation":"")+" "+(o.useIcon?"nx-with-icon":"")+" nx-"+o.cssAnimationStyle+" "+(o.closeButton&&"function"!=typeof p?"nx-with-close-button":"")+" "+("function"==typeof p?"nx-with-callback":"")+" "+(o.clickToClose?"nx-notify-click-to-close":""),k.style.fontSize=o.fontSize,k.style.color=w.textColor,k.style.background=w.background,k.style.borderRadius=o.borderRadius,k.style.pointerEvents="all",o.rtl&&(k.setAttribute("dir","rtl"),k.classList.add("nx-rtl-on")),k.style.fontFamily='"'+o.fontFamily+'", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif',o.cssAnimation&&(k.style.animationDuration=o.cssAnimationDuration+"ms");var N="";if(o.closeButton&&"function"!=typeof p&&(N='<span class="nx-close-button"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g><path fill="'+w.notiflixIconColor+'" d="M0.38 2.19l7.8 7.81 -7.8 7.81c-0.51,0.5 -0.51,1.31 -0.01,1.81 0.25,0.25 0.57,0.38 0.91,0.38 0.34,0 0.67,-0.14 0.91,-0.38l7.81 -7.81 7.81 7.81c0.24,0.24 0.57,0.38 0.91,0.38 0.34,0 0.66,-0.14 0.9,-0.38 0.51,-0.5 0.51,-1.31 0,-1.81l-7.81 -7.81 7.81 -7.81c0.51,-0.5 0.51,-1.31 0,-1.82 -0.5,-0.5 -1.31,-0.5 -1.81,0l-7.81 7.81 -7.81 -7.81c-0.5,-0.5 -1.31,-0.5 -1.81,0 -0.51,0.51 -0.51,1.32 0,1.82z"/></g></svg></span>'),o.useIcon)if(o.useFontAwesome)k.innerHTML='<i style="color:'+w.fontAwesomeIconColor+"; font-size:"+o.fontAwesomeIconSize+';" class="nx-message-icon nx-message-icon-fa '+w.fontAwesomeClassName+" "+("shadow"===o.fontAwesomeIconStyle?"nx-message-icon-fa-shadow":"nx-message-icon-fa-basic")+'"></i><span class="nx-message nx-with-icon">'+c+"</span>"+(o.closeButton?N:"");else{var I="";r===i?I='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+w.notiflixIconColor+'" d="M20 0c11.03,0 20,8.97 20,20 0,11.03 -8.97,20 -20,20 -11.03,0 -20,-8.97 -20,-20 0,-11.03 8.97,-20 20,-20zm0 37.98c9.92,0 17.98,-8.06 17.98,-17.98 0,-9.92 -8.06,-17.98 -17.98,-17.98 -9.92,0 -17.98,8.06 -17.98,17.98 0,9.92 8.06,17.98 17.98,17.98zm-2.4 -13.29l11.52 -12.96c0.37,-0.41 1.01,-0.45 1.42,-0.08 0.42,0.37 0.46,1 0.09,1.42l-12.16 13.67c-0.19,0.22 -0.46,0.34 -0.75,0.34 -0.23,0 -0.45,-0.07 -0.63,-0.22l-7.6 -6.07c-0.43,-0.35 -0.5,-0.99 -0.16,-1.42 0.35,-0.43 0.99,-0.5 1.42,-0.16l6.85 5.48z"/></g></svg>':r===e?I='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+w.notiflixIconColor+'" d="M20 0c11.03,0 20,8.97 20,20 0,11.03 -8.97,20 -20,20 -11.03,0 -20,-8.97 -20,-20 0,-11.03 8.97,-20 20,-20zm0 37.98c9.92,0 17.98,-8.06 17.98,-17.98 0,-9.92 -8.06,-17.98 -17.98,-17.98 -9.92,0 -17.98,8.06 -17.98,17.98 0,9.92 8.06,17.98 17.98,17.98zm1.42 -17.98l6.13 6.12c0.39,0.4 0.39,1.04 0,1.43 -0.19,0.19 -0.45,0.29 -0.71,0.29 -0.27,0 -0.53,-0.1 -0.72,-0.29l-6.12 -6.13 -6.13 6.13c-0.19,0.19 -0.44,0.29 -0.71,0.29 -0.27,0 -0.52,-0.1 -0.71,-0.29 -0.39,-0.39 -0.39,-1.03 0,-1.43l6.13 -6.12 -6.13 -6.13c-0.39,-0.39 -0.39,-1.03 0,-1.42 0.39,-0.39 1.03,-0.39 1.42,0l6.13 6.12 6.12 -6.12c0.4,-0.39 1.04,-0.39 1.43,0 0.39,0.39 0.39,1.03 0,1.42l-6.13 6.13z"/></g></svg>':r===n?I='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+w.notiflixIconColor+'" d="M21.91 3.48l17.8 30.89c0.84,1.46 -0.23,3.25 -1.91,3.25l-35.6 0c-1.68,0 -2.75,-1.79 -1.91,-3.25l17.8 -30.89c0.85,-1.47 2.97,-1.47 3.82,0zm16.15 31.84l-17.8 -30.89c-0.11,-0.2 -0.41,-0.2 -0.52,0l-17.8 30.89c-0.12,0.2 0.05,0.4 0.26,0.4l35.6 0c0.21,0 0.38,-0.2 0.26,-0.4zm-19.01 -4.12l0 -1.05c0,-0.53 0.42,-0.95 0.95,-0.95 0.53,0 0.95,0.42 0.95,0.95l0 1.05c0,0.53 -0.42,0.95 -0.95,0.95 -0.53,0 -0.95,-0.42 -0.95,-0.95zm0 -4.66l0 -13.39c0,-0.52 0.42,-0.95 0.95,-0.95 0.53,0 0.95,0.43 0.95,0.95l0 13.39c0,0.53 -0.42,0.96 -0.95,0.96 -0.53,0 -0.95,-0.43 -0.95,-0.96z"/></g></svg>':r===a&&(I='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+w.notiflixIconColor+'" d="M20 0c11.03,0 20,8.97 20,20 0,11.03 -8.97,20 -20,20 -11.03,0 -20,-8.97 -20,-20 0,-11.03 8.97,-20 20,-20zm0 37.98c9.92,0 17.98,-8.06 17.98,-17.98 0,-9.92 -8.06,-17.98 -17.98,-17.98 -9.92,0 -17.98,8.06 -17.98,17.98 0,9.92 8.06,17.98 17.98,17.98zm-0.99 -23.3c0,-0.54 0.44,-0.98 0.99,-0.98 0.55,0 0.99,0.44 0.99,0.98l0 15.86c0,0.55 -0.44,0.99 -0.99,0.99 -0.55,0 -0.99,-0.44 -0.99,-0.99l0 -15.86zm0 -5.22c0,-0.55 0.44,-0.99 0.99,-0.99 0.55,0 0.99,0.44 0.99,0.99l0 1.09c0,0.54 -0.44,0.99 -0.99,0.99 -0.55,0 -0.99,-0.45 -0.99,-0.99l0 -1.09z"/></g></svg>'),k.innerHTML=I+'<span class="nx-message nx-with-icon">'+c+"</span>"+(o.closeButton?N:"")}else k.innerHTML='<span class="nx-message">'+c+"</span>"+(o.closeButton?N:"");if("left-bottom"===o.position||"right-bottom"===o.position){var C=t.document.getElementById(s.wrapID);C.insertBefore(k,C.firstChild)}else t.document.getElementById(s.wrapID).appendChild(k);var z=t.document.getElementById(k.id);if(z){var A,W,B=function(){z.classList.add("nx-remove");var o=t.document.getElementById(s.overlayID);o&&h.childElementCount<=0&&o.classList.add("nx-remove"),clearTimeout(A)},T=function(){if(z&&null!==z.parentNode&&z.parentNode.removeChild(z),h.childElementCount<=0&&null!==h.parentNode){h.parentNode.removeChild(h);var o=t.document.getElementById(s.overlayID);o&&null!==o.parentNode&&o.parentNode.removeChild(o)}clearTimeout(W)};if(o.closeButton&&"function"!=typeof p)t.document.getElementById(k.id).querySelector("span.nx-close-button").addEventListener("click",function(){B();var t=setTimeout(function(){T(),clearTimeout(t)},o.cssAnimationDuration)});if(("function"==typeof p||o.clickToClose)&&z.addEventListener("click",function(){"function"==typeof p&&p(),B();var t=setTimeout(function(){T(),clearTimeout(t)},o.cssAnimationDuration)}),!o.closeButton&&"function"!=typeof p){var D=function(){A=setTimeout(function(){B()},o.timeout),W=setTimeout(function(){T()},o.timeout+o.cssAnimationDuration)};D(),o.pauseOnHover&&(z.addEventListener("mouseenter",function(){z.classList.add("nx-paused"),clearTimeout(A),clearTimeout(W)}),z.addEventListener("mouseleave",function(){z.classList.remove("nx-paused"),D()}))}}if(o.showOnlyTheLastOne&&m>0)for(var E=t.document.querySelectorAll("[id^="+o.ID+"-]:not([id="+o.ID+"-"+m+"])"),L=0;L<E.length;L++){var O=E[L];null!==O.parentNode&&O.parentNode.removeChild(O)}o=f(!0,o,x)},y={Notify:{init:function(i){o=f(!0,s,i),function(o,i){if(!l("head"))return!1;if(null!==o()&&!t.document.getElementById(i)){var e=t.document.createElement("style");e.id=i,e.innerHTML=o(),t.document.head.appendChild(e)}}(c,"NotiflixNotifyInternalCSS")},merge:function(t){if(!o)return r("You have to initialize the Notify module before call Merge function."),!1;o=f(!0,o,t)},success:function(t,o,e){p(i,t,o,e)},failure:function(t,o,i){p(e,t,o,i)},warning:function(t,o,i){p(n,t,o,i)},info:function(t,o,i){p(a,t,o,i)}}};return"object"==typeof t.Notiflix?f(!0,t.Notiflix,{Notify:y.Notify}):{Notify:y.Notify}});
},{}],"w9Hs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFilmQueue=b;var e=require("./refs"),t=require("firebase/app"),s=require("firebase/analytics"),i=require("firebase/auth"),r=require("./fetch"),a=require("firebase/firestore"),n=require("notiflix/build/notiflix-report-aio"),o=require("notiflix/build/notiflix-notify-aio");const c={apiKey:"AIzaSyDyDgzI_bPeljmgMmOE_ydsk6-uC9s-z44",authDomain:"filmoteka-418dc.firebaseapp.com",databaseURL:"https://filmoteka-418dc-default-rtdb.firebaseio.com",projectId:"filmoteka-418dc",storageBucket:"filmoteka-418dc.appspot.com",messagingSenderId:"844992729026",appId:"1:844992729026:web:d52e8c884494acc227d05b",measurementId:"G-XX5M9G1BCJ"},l=(0,t.initializeApp)(c),d=(0,s.getAnalytics)(l),u=(0,i.getAuth)(),g=(0,a.getFirestore)(l);function f(){e.refs.signOutBtn.classList.toggle("visually-hidden"),e.refs.openRegisterForm.classList.toggle("visually-hidden"),e.refs.openSignInForm.classList.toggle("visually-hidden")}function m(t){t.preventDefault();const s=t.target.registerEmail.value,r=t.target.registerPassword.value;(0,i.createUserWithEmailAndPassword)(u,s,r).then(t=>{e.refs.registerForm.classList.toggle("is-hidden"),n.Report.success("Успішно зареєстрований",`Гарного перегляду ${s}`,"Ok"),(0,a.setDoc)((0,a.doc)(g,"users",t.user.uid),{watched:[],queue:[]})}).catch(e=>{n.Report.failure("Помилка",` ${e.message}`,"Ok")})}function h(t){t.preventDefault();const s=t.target.signInEmail.value,r=t.target.signInPassword.value;(0,i.signInWithEmailAndPassword)(u,s,r).then(t=>{o.Notify.success(`Привіт ${s}`),e.refs.signInForm.classList.toggle("is-hidden")}).catch(e=>n.Report.failure("Помилка",` ${e.message}`,"Ok"))}function p(){location.reload(),(0,i.signOut)(u).then(()=>{o.Notify.info("До побачення"),f()}).catch(e=>{o.Notify.failure(`${e.message}`)})}function y(t){document.addEventListener("click",s=>{const i=s.target.closest(".card__link");if(!i)return;const n=i.id;e.refs.addToQueueBtn.addEventListener("click",()=>{(0,r.getFilmById)(n).then(e=>{(0,a.updateDoc)((0,a.doc)(g,"users",t),{queue:(0,a.arrayUnion)(e)})})}),e.refs.addToWatchedBtn.addEventListener("click",()=>{(0,r.getFilmById)(n).then(e=>{(0,a.updateDoc)((0,a.doc)(g,"users",t),{watched:(0,a.arrayUnion)(e)})})})})}function I(e){(0,a.onSnapshot)((0,a.doc)(g,"users",e),e=>{const t=e.data().watched;localStorage.setItem("UserFilmWatched",JSON.stringify(t))})}function b(e){(0,a.onSnapshot)((0,a.doc)(g,"users",e),e=>{const t=e.data().queue;localStorage.setItem("UserFilmQueue",JSON.stringify(t))})}e.refs.registerForm.addEventListener("submit",m),e.refs.signInForm.addEventListener("submit",h),e.refs.signOutBtn.addEventListener("click",p),(0,i.onAuthStateChanged)(u,t=>{if(null!==t){const s=t.uid;localStorage.setItem("User",JSON.stringify(s)),f(),I(s),b(s),y(s),e.refs.library.classList.remove("disabled")}else localStorage.setItem("User",JSON.stringify("noUser")),localStorage.setItem("UserFilmWatched",JSON.stringify("[]")),localStorage.setItem("UserFilmQueue",JSON.stringify("[]"))});
},{"./refs":"VyiV","firebase/app":"OJEJ","firebase/analytics":"JWp9","firebase/auth":"zKjx","./fetch":"spyz","firebase/firestore":"vHL5","notiflix/build/notiflix-report-aio":"qA1g","notiflix/build/notiflix-notify-aio":"MeeU"}],"oWyB":[function(require,module,exports) {
"use strict";function e(e){console.log(e.code),"Escape"===e.code&&t()}function o(e){e.target===e.currentTarget&&t()}function t(){backdropCardModal.classList.add("is-hidden"),window.removeEventListener("keydown",e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.onKeyPress=e,exports.onBackdropClick=o;
},{}],"AUp6":[function(require,module,exports) {
"use strict";var e=require("./refs"),s=require("./closeModal.js");function r(){e.refs.signInForm.classList.toggle("is-hidden")}function n(s){s.target!==e.refs.signInForm&&s.currentTarget!==e.refs.signInModal__closebtn&&"Escape"!==s.code||e.refs.signInForm.classList.toggle("is-hidden")}function i(){e.refs.registerForm.classList.toggle("is-hidden")}function t(s){s.target!==e.refs.registerForm&&s.currentTarget!==e.refs.registerModal__closebtn&&"Escape"!==s.code||e.refs.registerForm.classList.toggle("is-hidden")}e.refs.openSignInForm.addEventListener("click",r),e.refs.signInModal__closebtn.addEventListener("click",n),e.refs.signInForm.addEventListener("click",n),e.refs.openRegisterForm.addEventListener("click",i),e.refs.registerModal__closebtn.addEventListener("click",t),e.refs.registerForm.addEventListener("click",t);
},{"./refs":"VyiV","./closeModal.js":"oWyB"}],"wSgt":[function(require,module,exports) {
"use strict";var e=require("./refs");function s(s){s.preventDefault(),location.reload(),e.refs.pagination.classList.remove("is-hidden"),e.refs.home.classList.add("current"),e.refs.library.classList.remove("current"),e.refs.buttonLibrary.classList.add("visually-hidden"),e.refs.input.classList.remove("visually-hidden"),e.refs.background.classList.add("header"),e.refs.background.classList.remove("library")}function r(s){s.preventDefault(),e.refs.pagination.classList.add("is-hidden"),e.refs.library.classList.add("current"),e.refs.home.classList.remove("current"),e.refs.input.classList.add("visually-hidden"),e.refs.buttonLibrary.classList.remove("visually-hidden"),e.refs.background.classList.add("library"),e.refs.background.classList.remove("header")}function t(){e.refs.queue.classList.add("library__current"),e.refs.watched.classList.remove("library__current")}function i(){e.refs.watched.classList.add("library__current"),e.refs.queue.classList.remove("library__current")}function a(){const e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;document.getElementById("myBar").style.width=e+"%"}e.refs.queue.addEventListener("click",t),e.refs.watched.addEventListener("click",i),e.refs.home.addEventListener("click",s),e.refs.library.addEventListener("click",r),window.onscroll=function(){a()};
},{"./refs":"VyiV"}],"dPw5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.teamItems=void 0;const i=[{image:"https://raw.githubusercontent.com/oliarosiak/filmoteka-project/main/src/images/team/rosiak.jpg",firstName:"Olha",secondName:"Rosiak",position:"Team Lead",github:"https://github.com/oliarosiak",linkedin:"https://www.linkedin.com/in/olia-rosiak/"},{image:"https://raw.githubusercontent.com/oliarosiak/filmoteka-project/main/src/images/team/protashchuk.jpg",firstName:"Stanislav",secondName:"Protashchuk",position:"Scrum Master",github:"https://github.com/StanislavProtashchuk",linkedin:"https://www.linkedin.com/in/stanislav-protashchuk-317325226/"},{image:"https://raw.githubusercontent.com/oliarosiak/filmoteka-project/main/src/images/team/ivanytskyi.jpg",firstName:"Oleh",secondName:"Ivanytskyi",position:"Developer",github:"https://github.com/ivanytskyi2407",linkedin:"https://www.linkedin.com/in/oleh-ivanytskyi-6b54851a0/"},{image:"https://raw.githubusercontent.com/oliarosiak/filmoteka-project/main/src/images/team/hembarska.jpg",firstName:"Oleksandra",secondName:"Hembarska",position:"Developer",github:"https://github.com/Oleksandra9",linkedin:""},{image:"https://raw.githubusercontent.com/oliarosiak/filmoteka-project/main/src/images/team/hrytsyshyn.jpg",firstName:"Vasyl",secondName:"Hrytsyshyn",position:"Developer",github:"https://github.com/VasylHrytsyshyn",linkedin:""},{image:"https://raw.githubusercontent.com/oliarosiak/filmoteka-project/main/src/images/team/tsiruh.jpg",firstName:"Marta",secondName:"Tsiruh",position:"Developer",github:"https://github.com/martatsiruh",linkedin:""},{image:"https://raw.githubusercontent.com/oliarosiak/filmoteka-project/main/src/images/team/lokshuk.jpg",firstName:"Oleksandr",secondName:"Lokshuk",position:"Developer",github:"https://github.com/12Sasha21",linkedin:""},{image:"https://raw.githubusercontent.com/oliarosiak/filmoteka-project/main/src/images/team/khmil.jpg",firstName:"Oksana",secondName:"Khmil",position:"Developer",github:"https://github.com/Oksana-Khmil",linkedin:""},{image:"https://raw.githubusercontent.com/oliarosiak/filmoteka-project/main/src/images/team/havryliuk.jpg",firstName:"Mykola",secondName:"Havryliuk",position:"Developer",github:"https://github.com/nik-349",linkedin:""},{image:"https://raw.githubusercontent.com/oliarosiak/filmoteka-project/main/src/images/team/boliachevets.jpg",firstName:"Oleksandr",secondName:"Boliachevets",position:"Developer",github:"https://github.com/Schamotnic",linkedin:""},{image:"https://raw.githubusercontent.com/oliarosiak/filmoteka-project/main/src/images/team/radkovska.jpg",firstName:"Iryna",secondName:"Radkovska",position:"Developer",github:"https://github.com/Akrisia",linkedin:"https://www.linkedin.com/in/iryna-radkovska-343698159/"}];exports.teamItems=i;
},{}],"EdNd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.teamMarkup=void 0;var s=require("./team-items");const i=s.teamItems.map(({image:s,firstName:i,secondName:a,position:e,github:t,linkedin:n})=>`\n                <li class="team__item">\n                    <img class="team__image" src="${s}" alt="${i} ${a}" width="300" loading="lazy">\n                    <div class="team__content">\n                        <h3 lang="en" class="team__title">${i} <br>${a}</h3>\n                        <p lang="en" class="team__desc">${e}</p>\n                        <ul class="team__socials">\n                            <li class="socials__item">\n                                <a href="${t}" class="socials__link">\n                                    <img class="socials__icon" src="https://raw.githubusercontent.com/oliarosiak/filmoteka-project/main/src/images/team/icon-github.png" width="25" height="25">\n                                </a>\n                            </li>\n                            <li class="socials__item">\n                                <a href="${n}" class="socials__link">\n                                    <img class="socials__icon" src="https://raw.githubusercontent.com/oliarosiak/filmoteka-project/main/src/images/team/icon-linkedin.png" width="25" height="25">\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n                </li>`).join("");exports.teamMarkup=i;
},{"./team-items":"dPw5"}],"O9Th":[function(require,module,exports) {
"use strict";var e=require("./refs"),r=require("./team-markup");function n(){e.refs.teamContainer.insertAdjacentHTML("beforeend",r.teamMarkup),e.refs.modalTeam.classList.remove("is-hidden"),e.refs.closeModalTeamBtn.addEventListener("click",a),e.refs.modalTeam.addEventListener("click",a),window.addEventListener("keydown",a)}function a(r){r.target!==e.refs.modalTeam&&r.currentTarget!==e.refs.closeModalTeamBtn&&"Escape"!==r.code||(e.refs.modalTeam.classList.add("is-hidden"),e.refs.teamContainer.innerHTML="",e.refs.closeModalTeamBtn.removeEventListener("click",a),e.refs.modalTeam.removeEventListener("click",a),window.removeEventListener("keydown",a))}e.refs.openModalTeamBtn.addEventListener("click",n);
},{"./refs":"VyiV","./team-markup":"EdNd"}],"B03W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderCardModalMurkup=r;const a=document.querySelector(".card-modal__container");function r({poster_path:a,original_title:r,title:l,name:e,vote_average:p,vote_count:d,genres:n,overview:s,popularity:t,id:c}){return`<div class="card-modal__image-box">\n        <img class="card-modal__banner" src="https://image.tmdb.org/t/p/original${a}" alt="">\n        <button class='btn-trailer' type='button' aria-label='play movie trailer'> \n            <svg class='btn-trailer__svg' width='68' height='48' viewBox='0 0 68 48'> \n                <path class='btn-trailer__path' \n                    d='M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z' \n                    fill='#212121'> \n                </path> \n                <path d='M 45,24 27,14 27,34' fill='#fff'></path> \n            </svg> \n        </button>\n        </div>\n        <div class="card-modal__information-box">\n        <h2 class="card-modal__title">${l}</h2>\n        <div class="card-modal__wrapper">\n            <p class="card-modal__wrapper-category">Vote / Votes</p>\n            <p class="card-modal__wrapper-value">\n                <span class=" card-modal__wrapper-value card-modal__wrapper-value--color">${p}</span>\n                <span class="card-modal__wrapper-category">/</span>\n                <span class="card-modal__wrapper-value ">${d}</span>\n            </p>\n        </div>\n        <div class="card-modal__wrapper">\n            <p class="card-modal__wrapper-category">popularity</p>\n            <p class="card-modal__wrapper-value">${t}</p>\n        </div>\n        <div class="card-modal__wrapper">\n            <p class="card-modal__wrapper-category">Original Title</p>\n            <p class="card-modal__wrapper-value">${r}</p>\n        </div>\n        <div class="card-modal__wrapper">\n            <p class="card-modal__wrapper-category">Genre</p>\n            <p class="card-modal__wrapper-value card-modal__wrapper-value--size">${n.map(({name:a})=>a).join(", ")}</p>\n        </div>\n        <h3 class="card-modal__about-title">About</h3>\n        <p class="card-modal__about-text">${s}</p>   \n        </div>\n        `}
},{}],"BNjD":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,n=arguments[3];!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof e&&e.amd?e([],t):("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this).basicLightbox=t()}(function(){return function e(n,t,o){function r(c,u){if(!t[c]){if(!n[c]){var a="function"==typeof require&&require;if(!u&&a)return a(c,!0);if(i)return i(c,!0);var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s}var l=t[c]={exports:{}};n[c][0].call(l.exports,function(e){return r(n[c][1][e]||e)},l,l.exports,e,n,t,o)}return t[c].exports}for(var i="function"==typeof require&&require,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.visible=void 0;var o=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=document.createElement("div");return t.innerHTML=e.trim(),!0===n?t.children:t.firstChild},r=function(e,n){var t=e.children;return 1===t.length&&t[0].tagName===n},i=function(e){return null!=(e=e||document.querySelector(".basicLightbox"))&&!0===e.ownerDocument.body.contains(e)};t.visible=i,t.create=function(e,n){var t=function(e,n){var t=o('\n\t\t<div class="basicLightbox '.concat(n.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),i=t.querySelector(".basicLightbox__placeholder");e.forEach(function(e){return i.appendChild(e)});var c=r(i,"IMG"),u=r(i,"VIDEO"),a=r(i,"IFRAME");return!0===c&&t.classList.add("basicLightbox--img"),!0===u&&t.classList.add("basicLightbox--video"),!0===a&&t.classList.add("basicLightbox--iframe"),t}(e=function(e){var n="string"==typeof e,t=e instanceof HTMLElement==1;if(!1===n&&!1===t)throw new Error("Content must be a DOM element/node or string");return!0===n?Array.from(o(e,!0)):"TEMPLATE"===e.tagName?[e.content.cloneNode(!0)]:Array.from(e.children)}(e),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).closable&&(e.closable=!0),null==e.className&&(e.className=""),null==e.onShow&&(e.onShow=function(){}),null==e.onClose&&(e.onClose=function(){}),"boolean"!=typeof e.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof e.className)throw new Error("Property `className` must be a string");if("function"!=typeof e.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof e.onClose)throw new Error("Property `onClose` must be a function");return e}(n)),c=function(e){return!1!==n.onClose(u)&&function(e,n){return e.classList.remove("basicLightbox--visible"),setTimeout(function(){return!1===i(e)||e.parentElement.removeChild(e),n()},410),!0}(t,function(){if("function"==typeof e)return e(u)})};!0===n.closable&&t.addEventListener("click",function(e){e.target===t&&c()});var u={element:function(){return t},visible:function(){return i(t)},show:function(e){return!1!==n.onShow(u)&&function(e,n){return document.body.appendChild(e),setTimeout(function(){requestAnimationFrame(function(){return e.classList.add("basicLightbox--visible"),n()})},10),!0}(t,function(){if("function"==typeof e)return e(u)})},close:c};return u}},{}]},{},[1])(1)});
},{}],"J7DG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=o(require("basiclightbox")),t=require("./fetch");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var l=n?Object.getOwnPropertyDescriptor(e,c):null;l&&(l.get||l.set)?Object.defineProperty(o,c,l):o[c]=e[c]}return o.default=e,t&&t.set(e,o),o}const n=document.querySelector(".film-list");function c(){n.addEventListener("click",l)}function l(e){var r;e.preventDefault(),void 0!==(null===(r=e.target.closest(".card__link"))||void 0===r?void 0:r.querySelector("card__img"))&&(0,t.onfetchTrailers)(e.target.closest(".card__link").id).then(e=>{i(e)}).catch(e=>{console.log(e)})}function i(t){const r=document.querySelector(".card-modal__image-box"),o=e.create(`<iframe class="iframe" width="640" height="480" frameborder="0" allowfullscreen allow='autoplay'\n            src="https://www.youtube.com/embed/${t.results[0].key}?autoplay=1" >\n        </iframe>`,{onShow:e=>{e.element().onclick=e.close,document.addEventListener("keydown",n)}},{onClose:e=>{document.removeEventListener("keydown",n),console.log(e)}});function n(e){"Escape"===e.code&&o.close()}r.addEventListener("click",()=>{o.show()})}
},{"basiclightbox":"BNjD","./fetch":"spyz"}],"NM8I":[function(require,module,exports) {
"use strict";var e=require("./fetch"),r=require("./cardModalMurkup"),d=require("./refs"),t=o(require("./trailer"));function o(e){return e&&e.__esModule?e:{default:e}}function a(t){const o=t.target.closest(".card__link");if(!o)return;const a=o.id;(0,e.getFilmById)(a).then(e=>{d.refs.boxCardModal.insertAdjacentHTML("afterbegin",(0,r.renderCardModalMurkup)(e))}).catch(e=>{console.log(e)}),document.body.style.overflow="scroll",d.refs.backdropCardModal.classList.remove("is-hidden"),d.refs.buttonCloseModal.addEventListener("click",n),d.refs.backdropCardModal.addEventListener("click",n),window.addEventListener("keydown",n)}function n(e){e.target!==d.refs.backdropCardModal&&e.currentTarget!==d.refs.buttonCloseModal&&"Escape"!==e.code||(d.refs.backdropCardModal.classList.add("is-hidden"),d.refs.boxCardModal.innerHTML="",d.refs.buttonCloseModal.removeEventListener("click",n),d.refs.backdropCardModal.removeEventListener("click",n),window.removeEventListener("keydown",n))}d.refs.homeFilmList.addEventListener("click",a),(0,t.default)();
},{"./fetch":"spyz","./cardModalMurkup":"B03W","./refs":"VyiV","./trailer":"J7DG"}],"iH5e":[function(require,module,exports) {
const o=document.querySelector(".scroll-btn");function e(){document.body.scrollTop>60||document.documentElement.scrollTop>60?o.style.display="block":o.style.display="none"}function n(){document.body.scrollTop=0,document.documentElement.scrollTop=0}document.addEventListener("scroll",e),o.addEventListener("click",n);
},{}],"ys5n":[function(require,module,exports) {
"use strict";var e=require("./refs");function r(){window.scrollY>e.refs.background.clientHeight&&document.documentElement.scrollHeight-e.refs.background.clientHeight>800?e.refs.background.classList.add("header--fixed"):e.refs.background.classList.remove("header--fixed")}document.addEventListener("scroll",r);
},{"./refs":"VyiV"}],"V0dj":[function(require,module,exports) {
"use strict";var e=require("./refs"),r=require("./render-сard"),a=require("./clearRender");const t=document.getElementById("pagination");function n(){(0,a.clearRender)();const e=JSON.parse(localStorage.getItem("UserFilmWatched"));t.classList.add("is-hidden"),(0,r.renderCardMurkupLibreary)(e)}function s(){(0,a.clearRender)();const e=JSON.parse(localStorage.getItem("UserFilmQueue"));(0,r.renderCardMurkupLibreary)(e)}e.refs.library.addEventListener("click",()=>{(0,a.clearRender)(),e.refs.watched.classList.contains("library__current")?n():e.refs.queue.classList.contains("library__current")&&s()}),e.refs.watched.addEventListener("click",n),e.refs.queue.addEventListener("click",s);
},{"./refs":"VyiV","./render-сard":"hYIH","./clearRender":"mqQf"}],"uuhH":[function(require,module,exports) {
const e=document.querySelector(".header__toggle"),t=document.querySelector(".wrapper"),l=document.querySelector(".header__toggle--day-img"),r=document.querySelector(".header__toggle--night-img");function o(e){t.classList.toggle("wrapper__dark"),l.classList.toggle("visually-hidden"),r.classList.toggle("visually-hidden")}e.addEventListener("click",o);
},{}],"Focm":[function(require,module,exports) {
"use strict";require("./sass/main.scss"),require("./js/pagination"),require("./js/authFirebase"),require("./js/authModal"),require("./js/libraryButton"),require("./js/modal-team"),require("./js/fetch"),require("./js/render-сard"),require("./js/cardModal"),require("./js/trailer"),require("./js/scroll-btn"),require("./js/clearRender"),require("./js/searchMovie"),require("./js/header-fixed"),require("./js/libraryRender"),require("./js/searchAlert"),require("./js/loading"),require("./js/themeToggler");
},{"./sass/main.scss":"clu1","./js/pagination":"o8lo","./js/authFirebase":"w9Hs","./js/authModal":"AUp6","./js/libraryButton":"wSgt","./js/modal-team":"O9Th","./js/fetch":"spyz","./js/render-сard":"hYIH","./js/cardModal":"NM8I","./js/trailer":"J7DG","./js/scroll-btn":"iH5e","./js/clearRender":"mqQf","./js/searchMovie":"HUSp","./js/header-fixed":"ys5n","./js/libraryRender":"V0dj","./js/searchAlert":"krw9","./js/loading":"GTI9","./js/themeToggler":"uuhH"}]},{},["Focm"], null)
//# sourceMappingURL=/filmoteka-project/src.692ee00e.js.map